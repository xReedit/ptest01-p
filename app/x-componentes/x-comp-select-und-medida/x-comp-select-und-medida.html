<link rel="import"href="../../web_components/polymer/polymer.html"><dom-module id="x-comp-select-und-medida"><template><select id="selectUndMedida"class="selected-template-1"on-change="selectedUnidad"><template is="dom-repeat"items="{{listUndMedida}}"as="item"><option value="[[index]]">[[item.unidad]]</template></select></template><script>Polymer({is:"x-comp-select-und-medida",properties:{listUndMedidaFilter:{type:Array,notify:!0},listUndMedida:{type:Array,notify:!0},undmedida:{type:Object,notify:!0,observer:"get"},filtrotipo:{type:String,value:"all"}},listeners:{onchange:"get"},attached:function(){this.loadUnidadMedida()},loadUnidadMedida:function(){$.ajax({type:"POST",url:"../../bdphp/log_componentes.php?op=23"}).done(i=>{i=(i=JSON.parse(i)).datos;this.listUndMedida=JSON.parse(JSON.stringify(i)),this.listUndMedidaFilter=this.listUndMedida,this.undmedida=this.listUndMedida[0]})},selectedUnidad:function(){var i=this.$.selectUndMedida.value;this.undmedida=this.listUndMedida[i],this.fire("onchange",this.undmedida)},get:function(){return this.undmedida},set:function(d){d&&0!=d&&(this.undmedida=this.listUndMedida.find(i=>i.idunidad_medida.toString()===d.toString()),this.$.selectUndMedida.value=this.listUndMedida.indexOf(this.undmedida))},filter:function(d){this.filtrotipo=d,this.listUndMedida=this.listUndMedidaFilter.filter(i=>i.tipo.toLowerCase()===d.toLowerCase()),this.undmedida=this.listUndMedida[0]}})</script></dom-module>