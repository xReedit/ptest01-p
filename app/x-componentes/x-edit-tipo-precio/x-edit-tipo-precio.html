<dom-module id="x-edit-tipo-precio"><template><style>:host{display:block}.tipo-precio{display:flex;align-items:center;margin-bottom:8px}.tipo-precio span{flex:1}.tipo-precio button{margin-left:8px}.hidden{display:none}</style><div><h3>Tipos de Precio</h3><p class="m-0">Agrega, modifica los tipos de precio que se muestran en los productos.</p><br><table><thead><th align="left">Descripcion<td>Visible<th><tbody><template is="dom-repeat"items="{{tiposPrecio}}"as="item"><tr><td><input class="selected-template-1"value="{{item.titulo::input}}"on-input="mostrarBotonGuardar"onchange="conMayusculas(this)"data-index$="{{index}}"><td><input type="checkbox"checked="{{item.visible::change}}"on-change="mostrarBotonGuardar"disabled$="{{_isDisabled(index)}}"><td><button id="btn-modificar"class="btn btn-sm btn-primary hidden"on-click="guardarTitulo"data-index="{{index}}">Guardar</button></template></table></div></template><script>Polymer({is:"x-edit-tipo-precio",properties:{tiposPrecio:{type:Array,notify:!0},nuevoTipoPrecio:{type:String,value:""}},attached:function(){this.loadTiposPrecio()},loadTiposPrecio:function(){$.ajax({type:"POST",url:"../../bdphp/log_componentes.php?op=24"}).done(i=>{i=JSON.parse(i).datos.map(i=>(i.visible="1"===i.visible,i));this.tiposPrecio=JSON.parse(JSON.stringify(i))})},agregarTipoPrecio:function(){""!==this.nuevoTipoPrecio.trim()&&(this.tiposPrecio.push({titulo:this.nuevoTipoPrecio}),this.nuevoTipoPrecio="",this.tiposPrecio=JSON.parse(JSON.stringify(this.tiposPrecio)))},mostrarBotonGuardar:function(i){i.target.getAttribute("data-index");i.target.parentElement.parentElement.querySelector("#btn-modificar").classList.remove("hidden")},guardarTitulo:function(i){var t,o=i.target.dataIndex,e=this.tiposPrecio[o].titulo;e.trim().length<2||(this.set(`tiposPrecio.${o}.titulo`,e),t=this.tiposPrecio[o].visible?"1":"0",$.ajax({type:"POST",url:"../../bdphp/log_componentes.php?op=2401",data:{id:this.tiposPrecio[o].idtipo_precio,titulo:e,visible:t}}),showToastSwal("success","Titulo Guardado!"),i.target.classList.add("hidden"))},_isDisabled:function(i){return 0===i}})</script></dom-module>