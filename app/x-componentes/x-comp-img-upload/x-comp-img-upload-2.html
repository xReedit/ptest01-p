<dom-module id="x-comp-img-upload-2"><link rel="stylesheet"href="../../../css/croppie.css"><script src="../../../js/croppie.js"></script><template><div class="pb-2"hidden$="[[isShowResult]]"><a class="btn btn-sm btn-info file-btn2"><span>Cargar Imagen</span> <input type="file"id="upload2"value="Choose a file"accept="image/*"> </a><button class="btn btn-sm btn-success upload-result2">Establecer</button></div><div class="upload-demo2-wrap"hidden$="[[isShowResult]]"><div class="upload-demo2"></div></div><div hidden$="[[!isShowResult]]"class="animate__animated animate__fadeIn"><button class="btn btn-sm btn-secondary mb-2"onclick="xEditarComImg2()">Editar</button><div id="result2"></div></div></template></dom-module><style>.file-btn2{position:relative}.file-btn2 input[type=file]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0}.upload-demo2 .upload-demo2-wrap,.upload-demo2 .upload-result2,.upload-demo2.ready .upload-msg{display:none}.upload-demo2.ready .upload-demo2-wrap{display:block}.upload-demo2.ready .upload-result2{display:inline-block}.upload-demo2-wrap{width:350px;height:300px;margin:0 auto}#result img{border:2px solid #9e9e9e;border-radius:5px}</style><script>var xThisCompImg2,optsImg,imgCompImgBase64,$uploadCrop2;function xComIniUpLoadImg2(){optsImg={url:"../../file/promo_demo.JPG",viewport:{width:xThisCompImg2.medidasimg.width,height:xThisCompImg2.medidasimg.height}},demoUpload2(),resetMedidas2()}function resetMedidas2(o){xThisCompImg2.medidascontent?($(".upload-demo2-wrap").width(xThisCompImg2.medidascontent.width+50),$(".upload-demo2-wrap").height(xThisCompImg2.medidascontent.height+50)):($(".upload-demo2-wrap").width(xThisCompImg2.medidasimg.width+50),$(".upload-demo2-wrap").height(xThisCompImg2.medidasimg.height+50)),$uploadCrop2.croppie("bind",optsImg)}function resetControlImg2(){$uploadCrop2.croppie("bind",optsImg)}function demoUpload2(){$uploadCrop2=$(".upload-demo2").croppie(optsImg),$("#upload2").on("change",function(){var o,i;(o=this).files&&o.files[0]&&((i=new FileReader).onload=function(o){$(".upload-demo2").addClass("ready"),$uploadCrop2.croppie("bind",{url:o.target.result}).then(function(){})},i.readAsDataURL(o.files[0]))}),$(".upload-result2").on("click",function(o){$uploadCrop2.croppie("result",{type:"canvas",size:"viewport"}).then(function(o){popupResult2({src:o}),xThisCompImg2.fire("setImg",xThisCompImg2.getImgBase64())})})}function popupResult2(o){var i;o.html&&(i=o.html),o.src&&(imgCompImgBase64=o.src,i='<img src="'+o.src+'" />'),$("#result2").html(i),xThisCompImg2.isShowResult=!0,xThisCompImg2.isEstablecioImg=!0,xThisCompImg2.isUploadImg=!0}function xEditarComImg2(){xThisCompImg2.isShowResult=!1}function setImagenFile2(o){xThisCompImg2.isShowResult=!0,xThisCompImg2.isEstablecioImg=!0,xThisCompImg2.isUploadImg=!1;o='<img src="'+o+'" />';$("#result2").html(o)}Polymer({is:"x-comp-img-upload-2",properties:{isShowResult:Boolean,medidasimg:[],medidascontent:[],isEstablecioImg:Boolean,isUploadImg:Boolean},attached:function(){this.isShowResult=!1,this.isEstablecioImg=!1,this.isUploadImg=!1,xThisCompImg2=this,xComIniUpLoadImg2()},getImgBase64:()=>imgCompImgBase64,getIsEstablecioImg:()=>xThisCompImg2.isEstablecioImg,getIsUploadImg:()=>xThisCompImg2.isUploadImg,setImgPathFile:o=>{setImagenFile2(o)},resetControl:()=>{xThisCompImg2.isShowResult=!1,xThisCompImg2.isEstablecioImg=!1,xThisCompImg2.isUploadImg=!1,resetControlImg2()},setMedidas:o=>{this.medidasimg=o,resetMedidas2()}})</script>