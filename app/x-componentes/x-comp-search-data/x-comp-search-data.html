<link rel="import"href="../../web_components/polymer/polymer.html"><link rel="import"href="../../web_components/paper-input-autocomplete/paper-input-autocomplete.html"><dom-module id="x-comp-search-data"><template><style>paper-input-autocomplete{width:100%}</style><paper-input-autocomplete id="inputAutocomplete"label="[[label]]"source="[[filteredData]]"on-autocomplete-selected="_onAutocompleteSelected"on-input="_onInput"search-property="[[displayKey]]"></paper-input-autocomplete></template><script>Polymer({is:"x-comp-search-data",properties:{label:{type:String,value:"Buscar"},sourceData:{type:Array,value:function(){return[]}},searchKey:{type:String,value:"id"},displayKey:{type:String,value:"label"},filteredData:{type:Array,value:function(){return[]}},minChars:{type:Number,value:2}},_onAutocompleteSelected:function(t){t=t.detail.value;this.dispatchEvent(new CustomEvent("item-selected",{detail:{item:t},bubbles:!0,composed:!0}))},_onInput:function(t){const e=this.$.inputAutocomplete.value;e.length<this.minChars?this.filteredData=[]:this.debounce("filterData",()=>{this.filteredData=this.sourceData.filter(t=>t[this.searchKey].toString().toLowerCase().includes(e.toLowerCase()))},300)},getValue:function(){return this.$.inputAutocomplete.value},setValue:function(t){this.$.inputAutocomplete.value=t,this.$.inputAutocomplete.$.input.value=t[this.displayKey]},clear:function(){this.$.inputAutocomplete.value="",this.$.inputAutocomplete.$.input.value="",this.filteredData=[]}})</script></dom-module>