<link rel="import"href="../../web_components/polymer/polymer.html"><link rel="import"href="../../web_components/paper-dropdown-menu/paper-dropdown-menu.html"><link rel="import"href="../../web_components/iron-dropdown/iron-dropdown.html"><dom-module id="x-comp-find-comprobante"><template><style>.cardTPC{display:inline-block;margin:1px;padding:3px;border:1px solid #919191;color:#575757;border-radius:5px;text-align:center;cursor:pointer;user-select:none;font-size:10px;background:#d3d3d3;opacity:.8}.cardTPC.selected{border:solid 2px #777;background-color:#b3e5fc;color:#000;font-weight:600;opacity:1}.content-card-tpc{display:flex;flex-wrap:nowrap;flex-direction:column;transition:opacity .5s ease-in-out}</style><div><select hidden$="[[showicons]]"id="compFindListComprobante"class$="[[applyClass]]"onchange="selectOptionComprobante()"><template is="dom-repeat"items="{{list}}"as="comprobante"><option value="[[index]]">[[comprobante.descripcion]]</template></select><div hidden$="[[!showicons]]"style="background:#e6e4cb;padding:10px;border-radius:8px;display:inline-block"><div class="content_div_op_pago"style="display:flex"><template is="dom-repeat"items="{{list}}"as="comprobante"><div class="xMiBoton_icon_option"data-index="{{index}}"selected$="{{comprobante.seleccionado}}"onclick="selectOptionComprobanteTouch(this)"><img src="{{comprobante.img}}"width="32px"class="mb-1"><p>{{comprobante.descripcion}}</div></template><div hidden$="{{hideContentCardTpc}}"><section class="content-card-tpc animated animate__headShake"hidden$="{{isSeletedFirtsOption}}"><template is="dom-repeat"items="{{cardsTPC}}"><div class$="{{getClass(index)}}"on-click="selectCard">{{item.descripcion}}</div></template></section></div></div><div hidden$="{{hideContentCardTpc}}"><div hidden$="{{isSeletedFirtsOption}}"><div class="animated fadeIn"hidden$="{{!isSelectedPorConsumo}}"><paper-input label="DescripciÃ³n del comprobante"class="xPasarEnter2 w-100"id="txt_des_comprobante_por_consumo"value$="{{modoComprobanteSelected.modo_title}}"on-change="onChangeTxtDesComprobantePorConsumo"></paper-input></div></div></div></div></div></template><script>var xThisComComprobante;function getAllComprobantes(){var o=1===xThisComComprobante.op?"2":"201";$.ajax({type:"POST",url:"../../bdphp/log_componentes.php?op="+o}).done(function(o){(o=$.parseJSON(o)).datos.map((o,e)=>{o.seleccionado=0==e,o.img="../../images/"+o.img}),xThisComComprobante.list=o.datos,xThisComComprobante.comprobantes=xThisComComprobante.list[0],xThisComComprobante.isSeletedFirtsOption=!0,xThisComComprobante.getValorIncial(xThisComComprobante.comprobantes);o=document.getElementsByClassName("cardTPC");0<o.length&&(o[0].classList.add("selected"),xThisComComprobante.modoComprobanteSelected=xThisComComprobante.cardsTPC[0],xThisComComprobante.modoComprobanteSelected.modo_title="",xThisComComprobante.cardsTPC[1].descripcion="POR CONSUMO")})}function selectOptionComprobante(o){var e=xThisComComprobante.$.compFindListComprobante.value;xThisComComprobante.comprobantes=xThisComComprobante.list[e]}function selectOptionComprobanteTouch(o){const t=o.dataIndex;xThisComComprobante.isSeletedFirtsOption=0===t,xThisComComprobante.comprobantes=xThisComComprobante.list[t],$(o).parent().find(".xMiBoton_icon_option").each((o,e)=>{e.dataIndex===t?$(e).attr("selected",!0):$(e).removeAttr("selected")}),xSelectViewOptionTC(t)}function xSelectViewOptionTC(o){xThisComComprobante.list.map(o=>(o.seleccionado=!1,o)),xThisComComprobante.comprobantes=xThisComComprobante.list[o],xThisComComprobante.comprobantes.seleccionado=!0,xThisComComprobante.modoComprobanteSelected.modo_title=txt_des_comprobante_por_consumo.value,xThisComComprobante.comprobantes.modo=xThisComComprobante.modoComprobanteSelected,xThisComComprobante.fire("_onchange",xThisComComprobante.comprobantes)}function resetListComprobante(){xThisComComprobante.$.compFindListComprobante.selectedIndex=0,xThisComComprobante.comprobantes=xThisComComprobante.list[0],xSelectViewOptionTC(0)}Polymer({is:"x-comp-find-comprobante",properties:{cardsTPC:{type:Array,value:[{descripcion:"DETALLADO",id:1,selected:!0,modo_title:""},{descripcion:"POR CONSUMO",id:2,selected:!1,modo_title:"POR CONSUMO"}]},hideContentCardTpc:{type:Boolean,value:!1},selected:{type:Number,notify:!0},modoComprobanteSelected:{type:Object,notify:!0},isSeletedFirtsOption:Boolean,isSelectedPorConsumo:Boolean,applyClass:{type:String,value:"xTextRow2 xCursor"},op:{type:Number,value:1},list:[],comprobantes:{type:Object,reflectToAttribute:!0,notify:!0,observer:"comprobanteNameChanged"},showicons:{type:Boolean,value:!0,reflectToAttribute:!0,notify:!0}},comprobanteNameChanged:function(o){return o},ready:function(){xThisComComprobante=this,getAllComprobantes()},getValorIncial:function(o){this.fire("getValorIncialx",{values:o})},getValorSelecionado:()=>(xThisComComprobante.modoComprobanteSelected||(xThisComComprobante.modoComprobanteSelected=xThisComComprobante.cardsTPC[0]),xThisComComprobante.modoComprobanteSelected.modo_title=txt_des_comprobante_por_consumo.value,xThisComComprobante.comprobantes),reloadAllComprobantes:()=>{getAllComprobantes()},reset:()=>{resetListComprobante()},getClass:function(o){return"cardTPC"+(o===this.selectedIndex?" selected":"")},selectCard:function(o){for(var e=Polymer.dom(this.root).querySelectorAll(".cardTPC"),t=0;t<e.length;t++)Polymer.dom(e[t]).classList.remove("selected");this.selectedIndex=this.cardsTPC.indexOf(o.model.item),Polymer.dom(o.target).classList.add("selected"),o.target.focus(),this.isSelectedPorConsumo=1===this.selectedIndex,this.modoComprobanteSelected=this.cardsTPC[this.selectedIndex],this.modoComprobanteSelected.modo_title=txt_des_comprobante_por_consumo.value,this.comprobantes.modo=this.modoComprobanteSelected,xThisComComprobante.fire("_onchange",xThisComComprobante.comprobantes)},resetModoComprobanteSelected:function(){this.modoComprobanteSelected=this.cardsTPC[0],this.modoComprobanteSelected.modo_title="",this.cardsTPC[1].modo_title="POR CONSUMO",this.selectFirstModoComprobante()},selectFirstModoComprobante:function(){for(var o=document.getElementsByClassName("cardTPC"),e=0;e<o.length;e++)o[e].classList.remove("selected");0<o.length&&(o[0].classList.add("selected"),this.modoComprobanteSelected=this.cardsTPC[0],this.modoComprobanteSelected.modo_title="",this.comprobantes.modo=this.modoComprobanteSelected,this.cardsTPC[1].descripcion="POR CONSUMO",this.isSelectedPorConsumo=!1,xThisComComprobante.fire("_onchange",xThisComComprobante.comprobantes))},onChangeTxtDesComprobantePorConsumo:function(o){this.modoComprobanteSelected.modo_title=o.target.value,this.comprobantes.modo=this.modoComprobanteSelected,xThisComComprobante.fire("_onchange",xThisComComprobante.comprobantes)}})</script></dom-module>