<link rel="import"href="../../web_components/polymer/polymer.html"><link rel="import"href="../../web_components/paper-input-autocomplete/paper-input-autocomplete.html"><dom-module id="x-comp-find-input-cliente"><template><paper-input-autocomplete id="input_clie_nombres_auto"label="{{label}}"value="{{inputValue}}"search-property$="{{searchProperty}}"onkeyup="searchClienteInput(this)"onchange="verifyChartLengthInput(this)"on-autocomplete-selected="xchangeCliente"autocomplete-search-length="2"disable-show-clear="true"></paper-input-autocomplete><p hidden$="[[!isShowInfoBuscar]]"class="fs-11 fw-100 text-primary"style="margin-top:-9px">ðŸ”Ž Busca por nombre o telefono<p hidden$="[[!isErrorLength]]"class="fs-13 text-danger">MÃ­nimo 5 caracteres.</template></dom-module><script>var xThisComInputCliente,_autocompleteComp;function verifyChartLengthInput(e){xThisComInputCliente.isErrorLength=0<e.target.value.length&&e.target.value.length<5}function getAllClientesInit(){getAllClientes()}function getAllClientes(e=""){e.length<3||$.ajax({type:"POST",url:"../../bdphp/log_componentes.php?op=70101",data:{val:e}}).done(function(e){var t=JSON.parse(e),e=(xThisComInputCliente.list_cliente=t.datos,input_clie_nombres_auto);if(e.length)for(var n of e)n.source=t.datos;else e.source=t.datos})}function resetSource(){input_clie_nombres_auto.source=xThisComInputCliente.list_cliente}function searchClienteInput(){var e;13==event.keyCode||(e=event.target.value,compRemoveSpecialCharObjClient(event),e.length<3)||getAllClientes(e)}function compRemoveSpecialCharObjClient(e){e.target.value=e.target.value.replace(/[&\/\\,~'"?]/g,""),xThisComInputCliente.isErrorLength=0<e.target.value.length&&e.target.value.length<5,xThisComInputCliente.xchangeCliente()}Polymer({is:"x-comp-find-input-cliente",properties:{_autocompleteComp:Object,label:String,searchProperty:{type:String,value:"nombres"},isShowInfoBuscar:{type:Boolean,value:!1},inputValue:{type:String,notify:!0},cliente:{},list_cliente:{type:Object,reflectToAttribute:!0,notify:!0,value:function(){return{}},observer:"clienteNameChanged"},valIdInt:{type:Object,notify:!0,reflectToAttribute:!0},isErrorLength:Boolean},listeners:{onchange:"getCliente"},clienteNameChanged:function(){return this.list_cliente},getCliente(e){return e},attached:function(){this.isErrorLength=!1,xThisComInputCliente=this,getAllClientesInit()},reloadllClientes:function(){getAllClientes()},xchangeCliente:()=>{var e=event.target.value;"autocomplete-selected"===event.type&&(event.target.$.input.value=e.nombres),xThisComInputCliente.isErrorLength=0<e.length&&e.length<5,event.target.fire("input-autocomplete-selected",e)}})</script>