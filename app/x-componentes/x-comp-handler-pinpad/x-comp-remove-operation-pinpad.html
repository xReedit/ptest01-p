<dom-module id="x-comp-remove-operation-pinpad"><template><style>.container{padding:20px;border-radius:5px;background-color:#f9f9f9;max-width:400px;margin:0 auto}.input-field-1{margin-bottom:10px}.input-field-1 label{display:block;margin-bottom:5px}.input-field-1 input,.input-field-1 textarea{width:100%;padding:8px;box-sizing:border-box}.button{display:inline-block;padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}.button:disabled{background-color:#ccc;cursor:not-allowed}</style><paper-dialog id="dlgRemovePinPad"class="dialog_redondo"modal style="min-width:320px"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="container"><p class="fs-18 fw-600">Anular Operación<div class="input-field-1"><label for="operationNumber">Número de Operación</label> <input class="selected-template-1"id="operationNumber"value="{{operationNumber::input}}"></div><div class="input-field-1"><label for="reason">Motivo</label> <textarea class="selected-template-1"id="reason"value="{{reason::input}}"></textarea></div><div class="pb-3"><div class="w-100 animate__animated fadeIn"hidden$="[[!isLoading]]"><paper-progress class="w-100"indeterminate></paper-progress></div><div class$="response-message [[responseStatus]]"hidden$="[[!responseMessage]]"style="max-width:300px">[[responseMessage]]</div></div><div hidden$="[[isLoading]]"><button class="btn btn-sm btn-primary"on-click="sendCancelRequest"disabled$="[[!canSend]]">Enviar Solicitud</button> <button class="btn btn-sm btn-dark"dialog-dismiss>Cancelar</button></div></div></paper-dialog></template><script>Polymer({is:"x-comp-remove-operation-pinpad",properties:{operationNumber:{type:String,value:""},reason:{type:String,value:""},canSend:{type:Boolean,computed:"_computeCanSend(operationNumber, reason)"},rowRegistro:{type:Number,value:0},isLoading:{type:Boolean,value:!1},responseMessage:{type:String,value:""},responseStatus:{type:String,value:""}},_computeCanSend:function(e,s){return""!==e.trim()&&""!==s.trim()},sendCancelRequest:async function(){this.isLoading=!0,this.responseMessage="Enviando Solciitud...",this.responseStatus="";var e={idregistro_pago:this.rowRegistro.idregistro_pago,motivo_anular:this.reason,data_adicional:this.operationNumber,amount:this.rowRegistro.total},e=await sendRemovePinPad(e);e.success?(this.responseMessage="Solicitud enviada exitosamente",this.responseStatus="success",setTimeout(()=>{this.$.dlgRemovePinPad.close(),this.isLoading=!1,this.responseMessage="",this.responseStatus="",this.operationNumber="",this.reason=""},2e3)):(this.isLoading=!1,this.responseMessage=e.data.message,this.responseStatus="error")},open:function(){this.$.dlgRemovePinPad.open()},setRowRegistroPago:function(e){this.rowRegistro=e}})</script></dom-module>