<dom-module id="x-proveedores"><link rel="import"href="./x-proveedores-detalle.html"><template><paper-dialog modal id="dialog_modificar_proveedor"style="max-width:350px"class="dialog_redondo"modal entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><h4>Modificar Proveedor</h4><div class="xLinea2"></div><br><div><form id="frm_comp_proveedor"><label for="descripcion"class="label-input">Razon Social</label> <input id="descripcion"name="descripcion"placeholder="Nombre / Razon social"onchange="conMayusculas(this)"class="xMiInput xPasarEnter2"> <label for="dni"class="label-input">DNI / RUC</label> <input id="dni"name="dni"placeholder="DNI / RUC"class="xMiInput xPasarEnter2"onchange="conMayusculas(this)"> <label for="telefono"class="label-input">Telefono</label> <input id="telefono"name="telefono"placeholder="Telefono"onchange="conMayusculas(this)"class="xMiInput xPasarEnter2"> <label for="direccion"class="label-input">Direccion</label> <input id="direccion"name="direccion"placeholder="Direccion"class="xMiInput xPasarEnter2"onchange="conMayusculas(this)"><div class="xInvisible"><input id="idorg"name="idorg"> <input id="idsede"name="idsede"> <input id="idproveedor"name="idproveedor"></div></form></div><br><br><button class="btn btn-sm btn-primary"onclick="saveProveedor()">Listo, guardar</button> <button class="btn btn-sm btn-secondary"dialog-dismiss>Cancelar</button></div></paper-dialog><br><div class="xMiCard xradius"style="width:90%;max-width:1250px"><div class="xEncanezadoCard d-flexx justify-content-between"style="background:#fff0f5;color:#424242"><div class="div-content-head-op"><p class="fw-600 fs-18">Proveedores</div><div><button class="btn btn-sm btn-secondary"hidden$="[[!isShowDetalleProveedor]]"onclick="goMainProveedor()">Atras</button></div></div><div class="p-3 mb-5"><div hidden$="[[isShowDetalleProveedor]]"><div class="d-flexx justify-content-between"><h4>Lista de Proveedores</h4><button class="btn btn-sm btn-primary"onclick="newProveedor()"><i class="fa fa-plus"></i> Agregar Proveedor</button></div><br><table class="w-100"><thead><th>Nombre / Razon Social<th>RUC<th>Telefono<th align="center"># Compras<tbody><template is="dom-repeat"items="{{listProveedores}}"as="item"><tr><td><p data-id="{{item.idproveedor}}"class="fw-600 text-primary xCursor"title="Editar Datos"onclick="openDialogModifyProveedor(this)">{{item.descripcion}} <i class="fa fa-pencil"></i><td>{{item.dni}}<td>{{item.telefono}}<td align="center"><div class="d-flexx text-center justify-content-center"><p class="fw-600 text-primary xCursor">{{item.num_compras}}</p><button data-id="{{item.idproveedor}}"class="ml-2 btn btn-sm btn-xsm xBoton_flat_2"onclick="goDetalleProveedor(this)">Ver</button></div></template></table></div><div hidden$="[[!isShowDetalleProveedor]]"><x-proveedores-detalle objproveedor$="[[objProveedor]]"></x-proveedores-detalle></div></div></div></template><script>var xThisProveedores,proveedorSelected;async function xInitProveedores(){xPopupLoad.xopen();var e=await(new httpFecht).postJson("../../bdphp/log_009.php?op=21");e.success&&(xThisProveedores.listProveedores=e.datos),xPopupLoad.xclose()}function openDialogModifyProveedor(e){const o=e.dataId;proveedorSelected=xThisProveedores.listProveedores.find(e=>e.idproveedor==o),$("#frm_comp_proveedor #descripcion").val(proveedorSelected.descripcion),$("#frm_comp_proveedor #dni").val(proveedorSelected.dni),$("#frm_comp_proveedor #telefono").val(proveedorSelected.telefono),$("#frm_comp_proveedor #direccion").val(proveedorSelected.direccion),$("#frm_comp_proveedor #idproveedor").val(proveedorSelected.idproveedor),dialog_modificar_proveedor.open()}function newProveedor(){$("#frm_comp_proveedor #descripcion").val(""),$("#frm_comp_proveedor #dni").val(""),$("#frm_comp_proveedor #telefono").val(""),$("#frm_comp_proveedor #direccion").val(""),$("#frm_comp_proveedor #idproveedor").val(""),dialog_modificar_proveedor.open()}function saveProveedor(){xPopupLoad.xopen(),$("#frm_comp_proveedor #idorg").val(xIdOrg),$("#frm_comp_proveedor #idsede").val(xIdSede),$.post("../../bdphp/ManejoBD_IUD.php?tb=proveedor",$("#frm_comp_proveedor").serialize(),function(e){dialog_modificar_proveedor.close(),xInitProveedores()})}function goDetalleProveedor(e){const o=e.dataId;xThisProveedores.objProveedor=xThisProveedores.listProveedores.find(e=>e.idproveedor==o),xThisProveedores.isShowDetalleProveedor=!0}function goMainProveedor(){xThisProveedores.isShowDetalleProveedor=!1}Polymer({is:"x-proveedores",properties:{listProveedores:[],objProveedor:[],isShowDetalleProveedor:Boolean},attached:function(){this.isShowDetalleProveedor=!1,xThisProveedores=this,xInitProveedores()},displayIndex:function(e){return xCeroIzq(e+1,1)}})</script></dom-module>