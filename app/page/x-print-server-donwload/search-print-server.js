const PrintServerDetector={NEW_SERVER_URL:"http://localhost:3847",NEW_SERVER_PING:"http://localhost:3847/api/ping",getOrgData:function(){var e=-1<window.location.href.indexOf("demo")?"d":"";return{o:"undefined"!=typeof xIdOrg?xIdOrg:"",s:"undefined"!=typeof xIdSede?xIdSede:"",d:e}},getEncodedOrgData:function(){return btoa(JSON.stringify(this.getOrgData()))},getLaragonServerUrl:function(){try{var e=xm_log_get("datos_org_sede");if(e&&e[0]&&e[0].ip_server_local)return"http://"+e[0].ip_server_local}catch(e){}return null},checkNewServer:async function(){try{const r=new AbortController;var e=setTimeout(()=>r.abort(),3e3);await fetch(this.NEW_SERVER_PING,{method:"GET",mode:"no-cors",signal:r.signal});return clearTimeout(e),{installed:!0,version:"1.0.0",hostname:"localhost",isConfigured:!0,serverType:"new"}}catch(e){}return{installed:!1,serverType:"new"}},checkLaragonServer:async function(){var e=this.getLaragonServerUrl();if(e)try{const t=new AbortController;var r=setTimeout(()=>t.abort(),3e3);await fetch(e,{method:"GET",mode:"no-cors",signal:t.signal});return clearTimeout(r),{installed:!0,baseUrl:e,serverType:"laragon"}}catch(e){}return{installed:!1,serverType:"laragon"}},detectInstalledServer:async function(){var e=await this.checkNewServer();return e.installed||(e=await this.checkLaragonServer()).installed?e:{installed:!1,serverType:"none"}},getRedirectUrl:function(e){var r=this.getEncodedOrgData();return"new"===e.serverType?this.NEW_SERVER_URL:"laragon"===e.serverType?e.baseUrl+"/restobar/print/client/index.html?o="+r:null},redirectToServer:async function(e=!0){var r,t=await this.detectInstalledServer();return t.installed?(r=this.getRedirectUrl(t))?(e?window.open(r,"Servidor de Impresion"):window.location.href=r,{success:!0,serverType:t.serverType,url:r}):{success:!1,reason:"no_url"}:(this.showDownloadPage(),{success:!1,reason:"no_server"})},showDownloadPage:function(){"undefined"!=typeof router?router.go("/print-server"):window.location.hash="#/print-server"},updateUIStatus:function(e,r){e=document.getElementById(e);e&&(r.installed?e.innerHTML=`
                <div class="server-status online">
                    <span class="status-icon">✓</span>
                    <span>Servidor de impresión detectado (${"new"===r.serverType?"Nueva versión":"Laragon"})</span>
                </div>`:e.innerHTML=`
                <div class="server-status offline">
                    <span class="status-icon">✗</span>
                    <span>No se detectó servidor de impresión</span>
                </div>`)}};async function searchAndRedirectPrintServer(e=!0){return PrintServerDetector.redirectToServer(e)}async function checkPrintServerStatus(){return PrintServerDetector.detectInstalledServer()}