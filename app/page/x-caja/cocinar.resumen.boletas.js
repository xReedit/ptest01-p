async function xCocinarResumenBoletas(){$("#dgl_sunat_img").removeClass("xInvisible"),$("#dgl_sunat_progress").removeClass("xInvisible"),$("#dlg_sunat_btn").addClass("xInvisible"),$("#dgl_sunat_msj").removeClass("xInvisible"),$(".dgl_sunat_msj2").addClass("xInvisible"),$(".dgl_sunat_msj3").text("...");var s="";if("0"!==xm_log_get("datos_org_sede")[0].facturacion_e_activo){$(".dgl_sunat_msj3").text("Verificando comprobantes...");var t=await xSoapSunat_getArrNoRegistrado();let a=!1,e="";for(const _ in t){$(".dgl_sunat_msj3").text("Verificando comprobantes B..."+xCeroIzq(_));try{e=JSON.parse(t[_].json_xml)}catch(a){try{e=JSON.parse(t[_].json_xml.replace(/\n/g,""))}catch(a){console.log("json error",t[_].json_xml);break}}var o=await xSoapSunat_EnviarDocumentApi(e,t[_].idce);o.ok||(this.hayError=!0,$("#xTituloRpt").append('<p style="color: red">'+o.msj_error+"</p>")),a}await d("F"),$(".dgl_sunat_msj3").text("Preparando resumen de boletas...");var r=await xSoapSunat_getArrFechaBoletasNoAceptadas();for(const u in r){$(".dgl_sunat_msj3").text("Preparando resumen de boletas..."+xCeroIzq(u));var n=await xSoapSunat_ResumenDiario(r[u].fecha);n.ok||(this.hayError=!0,s=n.msj_error,$("#xTituloRpt").append('<p style="color: red">'+s+"</p>"))}$(".dgl_sunat_msj3").text("Consultando resumen de boletas...");var l=await xSoapSunat_getListTicketResumenBoletas();for(const p in l){$(".dgl_sunat_msj3").text("Consultando resumen de boletas..."+xCeroIzq(p));var i=await xSoapSunat_ConsultarTicketResumen(l[p]);i.ok||(this.hayError=!0,s=i.msj_error,$("#xTituloRpt").append('<p style="color: red">'+s+"</p>"),await d("B"))}this.hayError?dialog_enviando_sunat.close():($(".dgl_sunat_msj3").text("..."),$("#dgl_sunat_img").addClass("xInvisible"),$("#dgl_sunat_progress").addClass("xInvisible"),$("#dlg_sunat_btn").removeClass("xInvisible"),$("#dgl_sunat_msj").addClass("xInvisible"),$(".dgl_sunat_msj2").removeClass("xInvisible"),$("#xTituloRpt").append('<p style="color: blue">Proceso concluido con exito!.</p>'),s="")}return s;async function d(a){var e,s=await xSoapSunat_getArrNoRegistradoSunat();f=!1;for(const t in s)-1===s[t].numero.indexOf(a)||($(".dgl_sunat_msj3").text("Verificando comprobantes "+a+"..."+xCeroIzq(t)),(e=await xSoapSunat_SendSunat(s[t].external_id,s[t].idce)).ok)||(this.hayError=!0,$("#xTituloRpt").append('<p style="color: red">'+e.msj_error+"</p>"))}}