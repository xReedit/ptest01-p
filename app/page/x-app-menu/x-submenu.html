<dom-module id="x-submenu">
<script type="text/javascript" src="../../view/item_pedidos.js"></script>
<template>
<div>
<div class="xMenu_body">
<div class="xAlinearCentro spinner">
<paper-spinner active></paper-spinner>
</div>
</div>
</div>
</template>
</dom-module>
<script>/*<![CDATA[*/var xThis;var xCadenaTC="";var xTituloDet;var xArrayPedidoObj;var xidItem_selected;var xreloj_update_subItem_sel;var xobj_row_selected;function xxaa(){}function xIniSubMenu(){xArrayPedidoObj=$.parseJSON(window.localStorage.getItem("::app3_sys_dta_pe"));xArmarMenuLateral(2);xCadenaTC=xArmarTipoConsumo();xLoadItems();$(document).on("click",".xmenu_item_2",function(c){xobj_row_selected=$(this);if($(this).find("input:radio")[0].disabled==true){c.stopPropagation();c.stopImmediatePropagation();return false}$(this).find("input:radio")[0].checked=true;xVerificarCheckItem();var d;var a="";var b;xTituloDet=$(this).attr("data-desseccion");xidItem=$(this).attr("data-id");_xcantidad=$(this).attr("data-cantidad");xidItem_selected=xidItem;$(this).find(".xpedir_row").each(function(e,f){b=$(f).attr("data-id");if(xArrayPedidoObj[b][xidItem]!=null){xidTipoConsumo=b;d=xArrayPedidoObj[xidTipoConsumo][xidItem].cantidad;a=xArrayPedidoObj[xidTipoConsumo][xidItem].indicaciones;$(f).find(".xCant_item").text(xCeroIzq(d,2))}});$(this).find("#txt_referencia").val(a);c.stopPropagation();c.stopImmediatePropagation();c.preventDefault();if(_xcantidad==="ND"){return false}xUpdateStockSubItem_selected();return false})}function xVerificarCheckItem(){$(".xmenu_item_2 .xcheck_item").each(function(a,b){if($(b).is(":checked")){$(this).parent().addClass("xitem_seleccionado")}else{$(this).parent().removeClass("xitem_seleccionado")}})}function xLoadItems(){$(".xMenu_body").html('<div class="xAlinearCentro spinner"><paper-spinner active></paper-spinner></div>').trigger("create");xTituloDet=window.localStorage.getItem("::app3_sys_dt_c");$("#xtitulo_bar").text(xTituloDet);const a=JSON.parse(window.localStorage.getItem("::app3_sys_dt_back"));$.ajax({type:"POST",url:"../../bdphp/log.php?op=2042",data:a}).done(function(n){var k=$.parseJSON(n);var l="";var j="";var m="";var c="";var e="";var b="";var g;var f="";k=k.datos;var d="";for(var h=0;h<k.length;h++){f="";g=k[h].cantidad;d=xClassEstadoItem(g);xClassEstado=d.split("|")[0];d=d.split("|")[1];if(g<=0){f="disabled"}j='<input class="xcheck_item" type="radio" name="option" value="other" '+f+'><p class="xprecio_item xEnLinea">'+k[h].precio+'</p><div id class="xstock_item '+d+'"><span>stock</span><p class="num_stock">'+xCeroIzq(g,2)+'</p></div><p class="xtitulo_item xEnLinea">'+k[h].des_item+"</p>";m="";if(k[h].img!=""){c='<img src="../img/'+k[h].img+'">';m="1"}if(k[h].detalle!=""){e='<div class="xsub_titulo_item">'+xMayusculaPrimera(k[h].detalle)+"</div>";m="1"}if(m=="1"){m='<div class="xdescripcion_foto">'+e+c+"</div>"}else{m=""}b='<div class="xdetalle_item">'+m+'<div class="xreferencia_item"><input type="text" autocomplete="on" placeholder="Escribe aqui las especificaciones..." class="xMiTextReferencia" id="txt_referencia"></div>'+xCadenaTC+"</div></div>";l=String(l+'<div onclick="xxaa();" class="xmenu_item_2 xPading10 '+xClassEstado+'" data-id="'+k[h].idcarta_lista+'" data-item="'+k[h].iditem+'" data-idseccion="'+k[h].idseccion+'" data-idseccionindex="'+k[h].idseccion_index+'" data-desseccion="'+k[h].des_seccion+'" data-cantidad="'+k[h].cantidad+'"  data-idimpresora="'+k[h].idimpresora+'" data-idprocede="'+k[h].idprocede+'" data-procede="'+k[h].procede+'" data-procedeindex="'+k[h].procede_index+'" data-imprimircomanda="'+k[h].imprimir_comanda+'" data-iddescontar="'+k[h].idprocede+'" data-cant_descontar="'+k[h].cant_descontar+'" data-idalmacen_items="'+k[h].idalmacen_items+'">'+j+b)}$(".xMenu_body div").remove();$(".xMenu_body .spinner").remove();$(".xMenu_body").append(l).trigger("create");$(window).scrollTop(window.localStorage.getItem("::app3_sys_scroll_pos")||0)})}function xUpdateStockSubItem_selected(){if(xidCatProcedencia=="almacen_items"){xidItem_selected=$(xobj_row_selected).attr("data-idalmacen_items")}$.ajax({type:"POST",url:"../../bdphp/log.php?op=2043",data:{i:xidItem_selected,p:xidCatProcedencia}}).done(function(a){xClassEstadoStock=xClassEstadoItem(a);xClassEstado=xClassEstadoStock.split("|")[0];xClassEstadoStock=xClassEstadoStock.split("|")[1];$(xobj_row_selected).addClass(xClassEstado);$(xobj_row_selected).find(".xstock_item").addClass(xClassEstadoStock);$(xobj_row_selected).find(".num_stock").text(xCeroIzq(a,2))})}Polymer({is:"x-submenu",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number},attached:function(){xThis=this;xIniSubMenu()},detached:function(){}});/*]]>*/</script>