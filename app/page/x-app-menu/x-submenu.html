<dom-module id="x-submenu">
<script type="text/javascript" src="../../view/item_pedidos.js"></script>
<template>
<div>
<div class="xMenu_body">
<div class="xAlinearCentro spinner">
<paper-spinner active></paper-spinner>
</div>
</div>
</div>
</template>
</dom-module>
<script>/*<![CDATA[*/var xThis;var xCadenaTC="";var xTituloDet;var xArrayPedidoObj;var xidItem_selected;var xreloj_update_subItem_sel;var xobj_row_selected;function xxaa(){}function xIniSubMenu(){xArrayPedidoObj=$.parseJSON(window.localStorage.getItem("::app3_sys_dta_pe"));xArmarMenuLateral(2);xCadenaTC=xArmarTipoConsumo();xLoadItems();$(document).on("click",".xmenu_item_2",function(c){xobj_row_selected=$(this);if($(this).find("input:radio")[0].disabled==true){c.stopPropagation();c.stopImmediatePropagation();return false}$(this).find("input:radio")[0].checked=true;xVerificarCheckItem();var d;var a="";var b;xTituloDet=$(this).attr("data-desseccion");xidItem=$(this).attr("data-id");_xcantidad=$(this).attr("data-cantidad");xidItem_selected=xidItem;$(this).find(".xpedir_row").each(function(e,f){b=$(f).attr("data-id");if(xArrayPedidoObj[b][xidItem]!=null){xidTipoConsumo=b;d=xArrayPedidoObj[xidTipoConsumo][xidItem].cantidad;a=xArrayPedidoObj[xidTipoConsumo][xidItem].indicaciones;$(f).find(".xCant_item").text(xCeroIzq(d,2))}});$(this).find("#txt_referencia").val(a);c.stopPropagation();c.stopImmediatePropagation();c.preventDefault();if(_xcantidad==="ND"){return false}xUpdateStockSubItem_selected();return false})}function xVerificarCheckItem(){$(".xmenu_item_2 .xcheck_item").each(function(a,b){if($(b).is(":checked")){$(this).parent().addClass("xitem_seleccionado")}else{$(this).parent().removeClass("xitem_seleccionado")}})}function xLoadItems(){$(".xMenu_body").html('<div class="xAlinearCentro spinner"><paper-spinner active></paper-spinner></div>').trigger("create");xTituloDet=window.localStorage.getItem("::app3_sys_dt_c");$("#xtitulo_bar").text(xTituloDet);$.ajax({type:"POST",url:"../../bdphp/log.php?op=2042",data:{i:xidCategoria,s:xidCategoriaSeccion,p:xidCatProcedencia}}).done(function(m){var j=$.parseJSON(m);var k="";var h="";var l="";var b="";var d="";var a="";var f;var e="";j=j.datos;var c="";for(var g=0;g<j.length;g++){e="";f=j[g].cantidad;c=xClassEstadoItem(f);xClassEstado=c.split("|")[0];c=c.split("|")[1];if(f<=0){e="disabled"}h='<input class="xcheck_item" type="radio" name="option" value="other" '+e+'><p class="xprecio_item xEnLinea">'+j[g].precio+'</p><div id class="xstock_item '+c+'"><span>stock</span><p class="num_stock">'+xCeroIzq(f,2)+'</p></div><p class="xtitulo_item xEnLinea">'+j[g].des_item+"</p>";l="";if(j[g].img!=""){b='<img src="../img/'+j[g].img+'">';l="1"}if(j[g].detalle!=""){d='<div class="xsub_titulo_item">'+xMayusculaPrimera(j[g].detalle)+"</div>";l="1"}if(l=="1"){l='<div class="xdescripcion_foto">'+d+b+"</div>"}else{l=""}a='<div class="xdetalle_item">'+l+'<div class="xreferencia_item"><input type="text" autocomplete="on" placeholder="Escribe aqui las especificaciones..." class="xMiTextReferencia" id="txt_referencia"></div>'+xCadenaTC+"</div></div>";k=String(k+'<div onclick="xxaa();" class="xmenu_item_2 xPading10 '+xClassEstado+'" data-id="'+j[g].idcarta_lista+'" data-item="'+j[g].iditem+'" data-idseccion="'+j[g].idseccion+'" data-idseccionindex="'+j[g].idseccion_index+'" data-desseccion="'+j[g].des_seccion+'" data-cantidad="'+j[g].cantidad+'"  data-idimpresora="'+j[g].idimpresora+'" data-idprocede="'+j[g].idprocede+'" data-procede="'+j[g].procede+'" data-procedeindex="'+j[g].procede_index+'" data-imprimircomanda="'+j[g].imprimir_comanda+'" data-iddescontar="'+j[g].idprocede+'" data-cant_descontar="'+j[g].cant_descontar+'" data-idalmacen_items="'+j[g].idalmacen_items+'">'+h+a)}$(".xMenu_body div").remove();$(".xMenu_body .spinner").remove();$(".xMenu_body").append(k).trigger("create");$(window).scrollTop(window.localStorage.getItem("::app3_sys_scroll_pos")||0)})}function xUpdateStockSubItem_selected(){if(xidCatProcedencia=="almacen_items"){xidItem_selected=$(xobj_row_selected).attr("data-idalmacen_items")}$.ajax({type:"POST",url:"../../bdphp/log.php?op=2043",data:{i:xidItem_selected,p:xidCatProcedencia}}).done(function(a){xClassEstadoStock=xClassEstadoItem(a);xClassEstado=xClassEstadoStock.split("|")[0];xClassEstadoStock=xClassEstadoStock.split("|")[1];$(xobj_row_selected).addClass(xClassEstado);$(xobj_row_selected).find(".xstock_item").addClass(xClassEstadoStock);$(xobj_row_selected).find(".num_stock").text(xCeroIzq(a,2))})}Polymer({is:"x-submenu",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number},attached:function(){xThis=this;xIniSubMenu()},detached:function(){}});/*]]>*/</script>