<dom-module id="x-menu"><template><div class="xMenu_content"id="CartaDetalle"><div class="xMenu_Encabezado"id="Encabezado_menu_m"><span class="xtitulo"id="r_titulo">{{xt_nombre_sede}}</span><div class="xsub_titulo"id="r_subtitulo">[[xt_eslogan]]</div></div><div class="xLineaSombra xInvisible"id="line_sombra"></div><div class="xMenu_body noselect"id="_xMenu_body"><div class="xAlinearCentro spinner"><paper-spinner active></paper-spinner></div></div></div></template></dom-module><script>var xThisMenu,isSocket=!1;function xIniMenu(){xm_log_get("ini_us"),$("#xtitulo_bar").text("");var e=xm_log_get("sede_generales");0<(xCount_cant_ico=null==(xCount_cant_ico=window.localStorage.getItem("::app3_sys_dta_count_ico"))?0:xCount_cant_ico)?($(".xIco_MiPedido .xCantPedio_ico").text(xCeroIzq(xCount_cant_ico,2)),$(".xIco_MiPedido .xCantPedio_ico").removeClass("xInvisible")):$(".xIco_MiPedido .xCantPedio_ico").addClass("xInvisible"),xThisMenu.xt_nombre_sede=e[0].des_sede,xThisMenu.xt_eslogan=e[0].eslogan,xLoadCarta(),xArmarMenuLateral(1),setTimeout(()=>{$("body").addClass("loaded")},700)}function xPasarDetalle(e){var a=e.childNodes[0].textContent,e=(xidCategoriaSeccion=e.getAttribute("data-id"),xidCatProcedencia=e.getAttribute("data-procede"),window.localStorage.setItem("::app3_sys_dt_c",a),{i:xidCategoria,s:xidCategoriaSeccion,p:xidCatProcedencia});window.localStorage.setItem("::app3_sys_dt_back",JSON.stringify(e)),xOpenPageCarta(2)}async function xLoadCarta(){xidCategoria=localStorage.getItem("::app3_sys_descat");let c=[];window.localStorage.getItem("::app3_sys_dt_mlm")?xArmarCarta(c=JSON.parse(window.localStorage.getItem("::app3_sys_dt_mlm"))):await xGeneralSeccionMiPedido(xidCategoria,function(e){for(var a="",t="",i=0,o=0;o<xGeneralDataSeccion.length;o++)if(a!=xGeneralDataSeccion[o].idseccion){for(var a=xGeneralDataSeccion[o].idseccion,t="",n=0;n<xGeneralDataSeccion.length;n++)a==xGeneralDataSeccion[n].idseccion&&(0<parseInt(xGeneralDataSeccion[o].cantidad)||"ND"==xGeneralDataSeccion[o].cantidad)&&(t=t+xGeneralDataSeccion[n].des_item+", ");t=t.slice(0,-2),t=xMayusculaPrimera(xSoloMinuscula(t)),c[i]={des:xGeneralDataSeccion[o].des_seccion,id:xGeneralDataSeccion[o].idseccion,detalle:xGeneralDataSeccion[o].all_items,procede:xGeneralDataSeccion[o].procede},i++}window.localStorage.setItem("::app3_sys_dt_mlm",JSON.stringify(c)),xArmarCarta(c)})}function xArmarCarta(e){for(var a="",t=e.length,i=0;i<t;i++)a=String(a+'<div class="xmenu_item xPading15" data-id="'+e[i].id+'" data-procede="'+e[i].procede+'" onclick="xPasarDetalle(this);"><p class="xtitulo_item">'+e[i].des+'</p><span class="xsub_titulo_item">'+e[i].detalle+"</span></div>");$("#_xMenu_body div").remove(),$("#_xMenu_body .spinner").remove(),$("#_xMenu_body").append(a).trigger("create"),$(window).scrollTop(window.localStorage.getItem("::app3_sys_scroll_pos")||0)}Polymer({is:"x-menu",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number,xt_nombre_sede:String,xt_eslogan:String,smallPage:{type:Boolean,notify:!0,value:!1}},_changeClassTitulo(){},attached:function(){var e,a;xThisMenu=this,xIniMenu(),this.smallPage&&(e=document.getElementById("Encabezado_menu_m"),a=document.getElementById("line_sombra"),e.classList.remove("xMenu_Encabezado"),e.classList.add("xMenu_Encabezado_small"),a.classList.remove("xInvisible"))}})</script>