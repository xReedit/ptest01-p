<link rel="import"href="../../web_components/paper-progress/paper-progress.html"><link rel="import"href="../../x-componentes/x-comp-datos-delivery/x-comp-datos-delivery.html"><dom-module id="x-mipedido"><template><x-comp-datos-delivery id="component_datos_delivery"></x-comp-datos-delivery><paper-dialog id="dialog_nuevo_pedido"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><h2>Nuevo Pedido</h2><p>Tiene un pededido pendiente de confirmacion. Si continua se borrara el pedido actual.</p><br><div class="buttons"><button class="xBoton2 xPlomo"dialog-dismiss>Cancelar</button> <button class="xBoton2 xRojo"onclick="xNuevoPedidoMP()">Nuevo pedido.</button></div></paper-dialog><paper-dialog id="dialog_erro_print"modal style="min-width:330px"modal entry-animation="scale-up-animation"exit-animation="fade-out-animation"><h4>Error en impresora</h4><p id="print_error"></p><br><div class="xBoton2 xVerde divLeft23"onclick="xReImprimirMP()">Intentar Nuevamente</div><div class="xBoton2 xPlomo divLeft23"onclick="xNuevoPedidoMP()">No imprimir</div><br><br><br></paper-dialog><paper-dialog id="dialog_item"class="xDlgItem_mipedido"modal entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xdlgBody"id="_xdlgBody"><div class="spinner"><paper-spinner active></paper-spinner></div></div><br><div class="xBoton2 xPlomo xInvisible divLeft23"id="dlgBtn"onclick="xListoDlg()">Cerrar</div><br><br></paper-dialog><paper-dialog id="dialog_msj_confirma_pedido"style="min-width:300px"entry-animation="scale-up-animation"exit-animation="fade-out-animation"><div class="xContent"><h4 id="titulo_msj">Al confirmar el pedido, no podra modificar. Esta seguro de confirmar?</h4><br><div class="xLinea2"></div><br><div class="xBoton2 xVerde"dialog-confirm onclick="xGuardarPedido()"id="btn_dlg_confirm">Confirmar</div><div class="xBoton2 xPlomo"dialog-dismiss>Cancelar</div></div></paper-dialog><paper-dialog id="dialog_item_sin_stock"class="dialog_redondo"modal entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xCentrado xColorRow_Rojo"><h3>CAMBIAR PEDIDO</h3><h4>Solo queda:</h4></div><hr><div><table width="100%"><tbody id="body_item_sin_stock"></table></div><br><hr><button class="xBoton2 xPlomo"dialog-dismiss>Listo</button><br></paper-dialog><div class="xEncabezadoMesa"><table width="100%"><thead class="xtable3 xFondoRowIndigo"><th align="center"width="20%">MESA<th align="left">REFERENCIA / CLIENTE</thead><tr class="xSinBorde"><td><input type="number"class="xMiInput xfont18 xBold xAlinearCentro"id="nummesa"min="0"><td><input class="xMiInput xfont16"maxlength="50"onchange="conMayusculas(this)"id="referencia_pedido"></table></div><div id="xBody"></div><br><div class="xLinea7"></div><div class="xLineaSombra"></div><div class="xdiv_Totales"><br><table width="100%"data-tablaname="pedido_subtotales"id="xtb_pedido_subtotales"></table><paper-checkbox style="padding:10px;display:block"class="noselect"id="check_reserva">Reservar</paper-checkbox><br></div><br><br><br><br><br><br><footer class="footer_fixed zindex-0"><div class="xBoton2 xVerde xDerecha"onclick="xAbrirPopupConfirmar()"id="btn_confirmar">Listo, confirmar</div><div class="xBoton2 xRojo xIzquierda"onclick="checkNuevoPedido()">Nuevo pedido</div></footer></template><style is="custom-style">paper-checkbox.check_red{background:#bdbdbd}.content_collapse{padding:0;transition:none!important}table tr td.xtb_pedido_importe{width:10px;text-align:right}.btn_apunte_deliver{margin-top:-10px}.subtotalRow{padding-top:1px;padding-bottom:1px}</style></dom-module><style type="text/css">paper-checkbox.check_red{background:#bdbdbd}.content_collapse{padding:0;transition:none!important}table tr td.xtb_pedido_importe{width:10px;text-align:right}.btn_apunte_deliver{margin-top:-10px}</style><script src="../../view/item_pedido_estructura.js"></script><script src="../../view/item_pedido_print_comprobante.js"></script><script src="../../view/item_pedido_subtotales.js"></script><script src="../../view/cliente.service.js"></script><script>var xThis,xCadenaTC,xNumMesaPedido,xReferenciaPedido,xidCategoriaSeccion,xPopupLoad,xNumMesaLoadCuenta,xNumMesasBd,xRowColapseOpen=null,xHayPedido=0,xArrayRegla=[],xDtPrint=[],xDtSubTotales=[],xArrayEnca=[],xsolo_llevar=0,xdelivery=0,xReservar=0,xnum_mesa_valido=!1,arrDatosAdjuntoDelivery=[],guardandoPedido=!1,xIdCliente_pedido="",xClientePedidoFnac="",isRunNuevoPedido=!1,isSocket=!1;async function xAbrirPopupConfirmar(){var e=$("#nummesa").val();if(xVerificarSiSoloLLevar(),1!==xsolo_llevar&&1!==xdelivery){if(""==e)return alert("Indique numero de mesa. Coloque cero(0) si no corresponde"),void xPopupLoad.xclose();if(0==xnum_mesa_valido)return alert("Numero de mesa no es valido."),void xPopupLoad.xclose()}btn_dlg_confirm.hidden=!1,dialog_msj_confirma_pedido.open()}function xIniMiPedido(){xPopupLoad=document.getElementById("xLoad"),xHayPedido=0,$("#xtitulo_bar").text("MI PEDIDO"),xArmarMenuLateral(2),$("body").addClass("loaded"),$(window).trigger("resize"),xm_log_get("ini_us");var e=xm_log_get("sede_generales");xNumMesasBd=parseInt(e[0].mesas),xArrayPedidoObj=$.parseJSON(window.localStorage.getItem("::app3_sys_dta_pe")),xNumMesaPedido=window.localStorage.getItem("::app3_sys_dta_nmp"),xReferenciaPedido=window.localStorage.getItem("::app3_sys_dta_rp"),xArrayRegla=xm_log_get("reglas_de_carta"),xDtPrint=xm_log_get("sede_generales"),setTimeout(()=>{$("body").addClass("loaded")},200),xLoadMipedido(),null==xReferenciaPedido&&(xReferenciaPedido=""),null==xNumMesaPedido&&(xNumMesaPedido=""),$("#nummesa").val(xNumMesaPedido),$("#referencia_pedido").val(xReferenciaPedido),xCadenaTC=xArmarTipoConsumo(),$(document).on("click",".xEncabezadoTpCon",function(){$(this).find("input:radio")[0].checked=!0,xVerificarCheckEnca()}),$("#nummesa").on("change",function(){var e=$(this).val(),a=(window.localStorage.setItem("::app3_sys_dta_nmp",e),this.value);xnum_mesa_valido=a<=0||xNumMesasBd<a?!1:!0,1!=xHayPedido&&(xNumMesaLoadCuenta=e,1==xnum_mesa_valido)&&setTimeout(function(){xBuscarPedidoEnBD(xNumMesaLoadCuenta)},2e3)}),$("#referencia_pedido").on("change",function(){window.localStorage.setItem("::app3_sys_dta_rp",xval)}),$(".xPasarEnter2").on("keyup",function(e){e=e.which;if(13==e||186==e){var e=$("input"),a=e.index(document.activeElement);if(null!==e[a+1]){var d=e[a+1];if(void 0===d)return;if(null==(d=d.disabled?e[a+2]:d))return;d.focus(),d.select()}return!1}}),(xCompDatosDelivery=document.getElementById("component_datos_delivery")).addEventListener("xGetDatosDelivery",function(e){arrDatosAdjuntoDelivery=e.detail.datos}),xPopupLoad=document.getElementById("xLoad")}function checkNuevoPedido(){0===parseInt(xLocal_xDtSubTotales[0].importe)?xNuevoPedidoMP():dialog_nuevo_pedido.open()}function xLLamarPrintMP(){xArrayEnca.solo_llevar=xsolo_llevar,xArrayEnca.delivery=xdelivery,xArrayEnca.reservar=xReservar,xCocinarImprimirComanda(xArrayEnca,xArrayPedidoObj,xLocal_xDtSubTotales,function(e){e?(xPopupLoad.xclose(),dialog_erro_print.open()):(xPopupLoad.xclose(),xNuevoPedidoMP())})}function xReImprimirMP(){dialog_erro_print.close(),xPopupLoad.titulo="Enviando...",xPopupLoad.xopen(),xLLamarPrintMP()}function xBuscarPedidoEnBD(e){$.ajax({type:"POST",url:"../../bdphp/log.php?op=3051",data:{m:e,p:""}}).done(function(e){xLoadMipedidoBD($.parseJSON(e).datos)})}function xNuevoPedidoMP(){isRunNuevoPedido||(isRunNuevoPedido=!0,arrDatosAdjuntoDelivery=[],window.localStorage.setItem("::app3_sys_dta_nmp",""),window.localStorage.setItem("::app3_sys_dta_rp",""),window.localStorage.removeItem("::app3_sys_dta_pe"),window.localStorage.removeItem("::app3_sys_dta_pe"),xLoadArrayPedido(),window.localStorage.removeItem("::app3_sys_dta_tct"),window.localStorage.removeItem("::app3_sys_dta_count_ico"),xCount_cant_ico=0,xRowColapseOpen=null,nummesa.value="",referencia_pedido.value="",frm_cliente.reset(),check_reserva.checked=!1,xdelivery=xsolo_llevar=xReservar=0,$("#_xIco_MiPedido .xCantPedio_ico").text(""),$("#_xIco_MiPedido .xCantPedio_ico").addClass("xInvisible"),dialog_nuevo_pedido.close(),dialog_erro_print.close(),xGeneralActualizarLoadItemCambioBd(),xLoadArrayPedidoAquiMenuJS(),tt_pedido=0,guardandoPedido=!1,setTimeout(()=>{isRunNuevoPedido=!1},2e3))}function xVerificarSiSoloLLevar(){var d,i=xdelivery=xsolo_llevar=0;$("#xBody .xEncabezadoTpCon").each(function(e,a){i++,d=a.textContent.toUpperCase(),0==e&&(xIdTpc_pe=$(a).attr("data-idtpc")),-1<d.indexOf("PARA LLEVAR")&&(xsolo_llevar=1),-1<d.indexOf("DELIVERY")&&(xdelivery=1),-1<$(a).attr("data-colDes").toLowerCase().indexOf("delivery")&&(xdelivery=1)}),1<i&&(xsolo_llevar=0)}async function xGuardarPedido(){var a,d,i,e;!0!==guardandoPedido&&(guardandoPedido=!0,xPopupLoad.titulo="Enviando...",xPopupLoad.xopen(),btn_dlg_confirm.hidden=!0,a=$("#nummesa").val(),d=$("#referencia_pedido").val(),$(".xPedidoTotal").text(),i="",xReservar=0,1==check_reserva.checked&&(a="0",$("#nummesa").val(0),xReservar=1),xVerificarSiSoloLLevar(),0!=tt_pedido)&&(xGeneralValidarRegalasCarta(xArrayPedidoObj,!0),0!=xArmarSubtotalesArray())&&(xVerificarSiSeImprimeComanda(xArrayPedidoObj),xPopupLoad.titulo="Enviando...",xPopupLoad.xopen(),e=0!=arrDatosAdjuntoDelivery.length?arrDatosAdjuntoDelivery:[],e=0!=arrDatosAdjuntoDelivery.length?await ClienteService_Guardar(e):xIdCliente_pedido,""===arrDatosAdjuntoDelivery.idcliente&&xCompDatosDelivery.reloadInputDatalientes(),arrDatosAdjuntoDelivery.idcliente=e,xarr_header={idclie:e,referencia:d,idcategoria:xidCategoriaSeccion,mesa:a,reservar:xReservar,tipo_consumo:"",arrDatosDelivery:arrDatosAdjuntoDelivery},xarr_body=xArrayPedidoObj,xarr_subtotales=xLocal_xDtSubTotales,$.ajax({type:"POST",url:"../../bdphp/log_001.php",data:{p_from:"a",p_header:xarr_header,p_body:xarr_body,p_subtotales:xarr_subtotales}}).done(function(e){e=xm_all_SetResponseLog_001(e),e.idpedido,i=xCeroIzq(e.numpedido,5),e=xCeroIzq(e.correlativo_dia,5);xArrayEnca={m:xCeroIzq(a,2),r:xMayusculaPrimera(xSoloMinuscula(d)),num_pedido:i,reservar:0,solo_llevar:0,correlativo_dia:e,arrDatosDelivery:arrDatosAdjuntoDelivery},(1==xVerificarImprimirComanda?xLLamarPrintMP:(xPopupLoad.xclose(),xNuevoPedidoMP))()}).fail(guardandoPedido=!1))}function xVerificarCheckEnca(){$(".xEncabezadoTpCon .xcheck_item").each(function(e,a){$(a).is(":checked")?$(this).parent().addClass("xEnca_seleccionado"):$(this).parent().removeClass("xEnca_seleccionado")})}function xValidarReglaCarta(){xSumarTotal()}function xSumarTotal(){xGeneralValidarRegalasCarta(xArrayPedidoObj,!0),tt_pedido=xArmarSubtotalesArray();var n="";xLocal_xDtSubTotales.forEach(e=>{var a,d,i,o="",t="",r="";"TOTAL"===e.descripcion.toUpperCase()?(t="tt_importe_pagar_t",d="",a="xfont24 xBold",i="IMPORTE A PAGAR",xtt_pedidos_det=parseFloat(e.importe)):(r="xColorRow_Plomo",a="xfont15",i=e.descripcion.toUpperCase(),o="subtotalRow"),n=n+'<tr class="total"><td colspan="3"><p class="'+d+" xColorRow_Plomo "+o+'">'+i+'</p></td><td align="right"><p class="'+a+" "+r+" "+o+'" id="'+t+'">'+e.importe+"</p></td></tr>"}),$("#xtb_pedido_subtotales").html(n).trigger("create"),xregistrar_pago=0==tt_pedido?($("#btn_registrar_pago").addClass("xInvisible"),!1):($("#btn_registrar_pago").removeClass("xInvisible"),!0)}function xLoadMipedido(){var d,i,o,e="",t=[],r="",n="";xThis.$.btn_confirmar.hidden=!0,$("#xBody div").remove(),xArrayPedidoObj=$.parseJSON(window.localStorage.getItem("::app3_sys_dta_pe")),xValidarReglaCarta();for(var s=0;s<xArrayPedidoObj.length;s++)if(n=e=d="",t=[],i=0,null!=xArrayPedidoObj[s]&&(xArrayPedidoObj[s].des,$.map(xArrayPedidoObj[s],function(e,a){"object"==typeof e&&null!=e&&(n="","00"!=e.cantidad)&&(null!=e.indicaciones&&""!=e.indicaciones&&(n='<span class="xPedidoItem_indicaciones">('+e.indicaciones+")</span>"),o=e.idseccion_index,null==t[o]&&(t[o]='<tr><td colspan="3" class="xPedidoTitulo xSinBorde xBold">'+e.des_seccion+"</td></tr>"),xidCategoriaSeccion=e.idcategoria,e.idcarta_lista=e.iditem,e.des_item=e.des,d=String('<tr class="xPedidoItem row" onclick="xOpenDlgItem('+s+","+e.iditem+');" data-id="'+e.iditem+'" data-idseccion="'+e.idseccion+'" data-seccion="'+e.des_seccion+'" data-idbus="'+e.idseccion+'" data-idtipocobus="'+e.idtipo_consumo+'" data-idprocede="'+e.idprocede+'" data-procede="'+e.procede+'" data-procedeindex="'+e.procede_index+'" data-ventarapida=0 data-imprimircomanda="'+e.imprimir_comanda+'" data-iddescontar="'+e.idprocede+'" data-cant_descontar="'+e.cant_descontar+'" data-idalmacen_items="'+e.idalmacen_items+'"><td width="10px" data-ColumName="cantidad" id="cant_descontar">'+xCeroIzq(e.cantidad,2)+"</td><td>"+e.des+" "+n+'</td><td width="10px" align="right" class="xtb_pedido_importe" data-ColumName="ptotal" id="ptotal">'+e.precio_total_calc+'</td><td class="xInvisible" data-ColumName="punitario" id="punitario">'+e.precio+'</td><td class="xInvisible" id="ptotal_calc">'+e.precio_total_calc+'</td><td class="xInvisible" id="td_cant">'+e.cantidad+'</td><td class="xInvisible" data-ColumName="iditem">'+e.iditem2+'</td><td class="xInvisible" data-ColumName="idcarta_lista" id="id_descontar">'+e.iditem+'</td><td class="xInvisible" data-ColumName="idseccion">'+e.idseccion+'</td><td class="xInvisible" id="row_idprocede">'+e.idprocede+'</td><td class="xInvisible" data-ColumName="idcategoria">'+e.idcategoria+'</td><td class="xInvisible" data-ColumName="idtipo_consumo">'+xArrayPedidoObj[s].id+'</td><td class="xInvisible" data-ColumName="descripcion">'+e.des+" "+e.indicaciones+'</td><td class="xInvisible" data-ColumName="procede">'+e.procede_index+'</td><td class="xInvisible" id="row_tb_procede">'+e.procede+'</td><td class="xInvisible" data-ColumName="idpedido">?p</td></tr>'),t[o]=t[o]+d,xHayPedido=1,i=parseInt(i)+parseInt(e.cantidad))}),""!=d)){var c="delivery"===xArrayPedidoObj[s].des.toLowerCase(),l="colapse"+xArrayPedidoObj[s].id,c='<div><div class="xEncabezadoTpCon noselect" data-idtpc="'+xArrayPedidoObj[s].id+'" data-col="'+l+'" data-colDes="'+xArrayPedidoObj[s].des+'" onclick="toggle(this);">'+xArrayPedidoObj[s].des+'<div class="xEncabezadoTpCon_Cant">'+i+"</div>"+(c?'<paper-icon-button title="Datos Adicionales" class="xDerecha btn_apunte_deliver" icon="icons:attach-file" onclick="dialog_datos_delivery.open()"></paper-icon-button>':"")+'<input id="optionOther"  class="xcheck_item" type="radio" name="option" value="other"></div>';for(a in t)e=String(e+t[a]);e=String('<iron-collapse noAnimation="true" id="'+l+'" tabindex="0" class="xcolapse"><div class="content_collapse  collapsing noselect"><table width="100%" class="xtb_pedido" data-TablaName="pedido_detalle" id="tb_pedido_detalle">'+e+"</table></div></iron-collapse></div>"),r=String(r+c+e),btn_confirmar.hidden=!1}if($("#xBody").html(r).trigger("create"),null!=xRowColapseOpen)try{var x=document.querySelector(xRowColapseOpen);x.toggle(),x.enableTransition(!1),$(x).parent().find(".xEncabezadoTpCon .xcheck_item").checked=!0,$(x).parent().find(".xEncabezadoTpCon").addClass("xEnca_seleccionado")}catch(e){return!1}}function xLoadMipedidoBD(e){var a,d="",i=new Array,o=new Array,t="",r=e;xHayPedido=0,$("#xBody div").remove(),$("#btn_confirmar").removeClass("xInvisible"),0<r.length&&$("#btn_confirmar").addClass("xInvisible");for(var n=0;n<r.length;n++)null==i[r[n].idtipo_consumo]&&(i[r[n].idtipo_consumo]={id:r[n].idtipo_consumo,des:r[n].des_tp});for(b in i){for(var s,c,d="",o=new Array,l=0,x=0;x<r.length;x++)i[b].id==r[x].idtipo_consumo&&(s=r[x].des_seccion,null==o[r[x].idseccion_index]&&(o[r[x].idseccion_index]='<tr><td colspan="3" class="xPedidoTitulo xSinBorde xBold">'+s+"</td></tr>"),s=String('<tr class="xPedidoItem"><td width="10px" data-ColumName="cantidad" id="cant_descontar">'+xCeroIzq(r[x].cantidad,2)+'</td><td data-ColumName="descripcion">'+r[x].descripcion+'</td><td width="10px" align="right" class="xtb_pedido_importe" data-ColumName="ptotal">'+r[x].ptotal+"</td></tr>"),l=parseInt(l)+parseInt(r[x].cantidad),o[r[x].idseccion_index]=o[r[x].idseccion_index]+s);for(n in a="colapse"+i[b].id,c='<div><div class="xEncabezadoTpCon noselect" data-idtpc="'+i[b].id+'" data-col="'+a+'" onclick="toggle(this);">'+i[b].des+'<div class="xEncabezadoTpCon_Cant">'+l+'</div><input id="optionOther"  class="xcheck_item" type="radio" name="option" value="other"></div>',o)d=String(d+o[n]);d=String('<iron-collapse noAnimation="true" id="'+a+'" tabindex="0" class="xcolapse"><div class="content_collapse collapsing noselect"><table width="100%" class="xtb_pedido">'+d+"</table></div></iron-collapse></div>"),t=String(t+c+d)}xGeneralArmarSubTotalesBD($("#nummesa").val(),function(e){$("#xtb_pedido_subtotales").html(e).trigger("create")}),$("#xBody").html(t).trigger("create"),xSumarTotal()}function toggle(e){var e="#"+$(e).attr("data-col"),d=document.querySelector(e);xRowColapseOpen=e,$(".xcolapse").each(function(e,a){-1!=a.className.indexOf("opened")&&d!=a&&a.toggle()}),-1==d.className.indexOf("opened")&&d.toggle()}function xOpenDlgItem(e,a){itemPedidos_objItemSelected=xArrayPedidoObj[e][a],xidItem=a,xTituloDet=itemPedidos_objItemSelected.des_seccion;e=itemPedidos_objItemSelected.idseccion,a=itemPedidos_objItemSelected.procede;$("#_xdlgBody").html('<div class="xCentradoVerticalHorizontal spinner"><paper-spinner active></paper-spinner></div>').trigger("create"),$("#dlgBtn").addClass("xInvisible"),xLoadItemMiPedido(xidItem,e,a),dialog_item.open(),objOptionItemSelect.checked=!1}function xLoadItemMiPedido(e,a,d){var i=itemPedidos_objItemSelected,o="",t="",r="",n="",s=i.stock_actual?xCeroIzq(i.stock_actual,2):"ND";o=(o=xClassEstadoItem(s)).split("|")[1],o='<input class="xcheck_item" type="radio" name="option" value="other"><p class="xprecio_item xEnLinea">'+i.precio+'</p><div class="xstock_item '+o+'"><span>stock</span><p>'+s+'</p></div><p class="xtitulo_item xEnLinea">'+i.des_item+"</p>",n="",i.img&&(t='<img src="../img/'+i.img+'">',n="1"),i.detalle&&(r='<div class="xsub_titulo_item">'+xMayusculaPrimera(i.detalle||"")+"</div>",n="1");s='<div class="xdetalle_item">'+(n="1"==n?'<div class="xdescripcion_foto">'+r+t+"</div>":"")+'<div class="xreferencia_item"><input type="text" autocomplete="on" placeholder="Escribe aqui las especificaciones..." class="xMiTextReferencia" id="txt_referencia"></div>'+xCadenaTC+"</div></div>",r=i.idseccion_index.split(".")[0],t=String('<div class="xmenu_item_2 xitem_seleccionado_pedido" data-id="'+i.idcarta_lista+'" data-item="'+i.iditem+'" data-idseccion="'+i.idseccion+'" data-desseccion="'+i.des_seccion+'" data-idseccionindex="'+r+'" data-idbus="'+i.idseccion+'" data-idimpresora="'+i.idimpresora+'" data-idprocede="'+i.idprocede+'" data-procede="'+i.procede+'" data-procedeindex="'+i.procede_index+'" data-imprimircomanda="'+i.imprimir_comanda+'" data-iddescontar="'+i.idprocede+'" data-cant_descontar="'+i.cant_descontar+'" data-idalmacen_items="'+i.idalmacen_items+'">'+o+s);$("#_xdlgBody .spinner").remove(),$("#_xdlgBody").html(t).trigger("create"),$("#dlgBtn").removeClass("xInvisible"),dialog_item.center(),$("#_xdlgBody").find("div.xmenu_item_2 .xpedir_row").each(function(e,a){xidTipoConsumoItem=$(a).attr("data-id"),null!=xArrayPedidoObj[xidTipoConsumoItem][xidItem]&&(xidTipoConsumo=xidTipoConsumoItem,xCantArray=xArrayPedidoObj[xidTipoConsumo][xidItem].cantidad,xindicaciones=xArrayPedidoObj[xidTipoConsumo][xidItem].indicaciones,$(a).find(".xCant_item").text(xCeroIzq(xCantArray,2)))}),dialog_item.center(),$(".xmenu_item_2").find("#txt_referencia").val(xindicaciones)}function xListoDlg(){$("#dlgBtn").addClass("xInvisible"),1==xCambioCantidad&&(xRecargarPedidoArray(),xCambioCantidad=!1),dialog_item.close()}function xRecargarPedidoArray(){xLoadMipedido()}Polymer({is:"x-mipedido",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number},_outLoadPedido(){xLoadMipedido()},attached:function(){xThis=this,xIniMiPedido()},detached:function(){$("#btn_add_adicional").addClass("xInvisible")}})</script>