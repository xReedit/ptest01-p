<dom-module id="x-mensajeria"><script src="../../view/socket.service.p.js"></script><template><br><div class="xMiCard xradius"style="width:85%;max-width:1100px"><div class="xEncanezadoCard"style="background:#fff0f5;color:#424242"><h3>Conectarse a WhastApp</h3><span>Para enviar comprobantes y mensajes a sus clientes desde su propio numero es necesario conectarse al servicio de mensajeria WhastApp.<br>Siga los siguientes pasos:</span></div><div class="xContentCard"style="height:100%"><h4>Sigue estos simples pasos para conectarse al servicio de mensajeria WhastApp:</h4><ol><li><div class="d-flexx justify-content-between"style="max-width:300px"><div><p>Descargue la aplicacion de mensajeria.<div class="xMiBoton_icon"style="border:1px solid #c5c5c5"><div on-click="descargarApp"class="xCursor"><img src="../../../images/download_app.png"alt="mensajeria"><p>Descargar Aplicacion Mensajeria</div></div></div><div><p>Coloque el codigo de comercio en la aplicacion de mensajeria.<p class="fw-600">Clic en el codigo de comercio para copiarlo:</p><br><div class="xMiBoton_icon fs-20 fw-600 xCursor"style="border:1px solid #c5c5c5"title="Click para copiar"on-click="_copyToClipboard"><div class="d-flexx align-items-center"><span class="mr-1"id="myInput">[[codigoComercio]]</span> <i class="fa fa-copy"></i></div></div><p class="xInvisible text-primary fw-600"id="imputMensaje">Copiado</div></div></li><br><li><p>Instale la aplicacion de mensajeria. Mire el video de como instalarla.<div><video style="max-width:680px"src="https://papaya-comercio-files.s3.us-east-2.amazonaws.com/files/instalar_mensajeria.mp4"controls></video></div></li><br></ol></div></div></template><script>Polymer({is:"x-mensajeria",properties:{codigoComercio:{type:String,value:""}},attached:function(){xm_log_get("ini_us"),this.codigoComercio=xIdOrg+xIdSede,setTimeout(()=>{this.pingMensajeria()},1e3)},_copyToClipboard:async function(){var o=document.getElementById("myInput").textContent;try{if(navigator.clipboard?.writeText)await navigator.clipboard.writeText(o),this._msjConfirmacionCopiado();else{var e=document.createElement("textarea");if(e.value=o,Object.assign(e.style,{position:"fixed",left:"-9999px",top:"-9999px"}),document.body.appendChild(e),e.select(),!document.execCommand("copy"))throw new Error("execCommand falló");this._msjConfirmacionCopiado(),document.body.removeChild(e)}}catch(e){this._msjConfirmacionCopiado("Error al copiar. Código: "+o,4e3)}},_msjConfirmacionCopiado:function(){showToastSwal("success","Copiado"),document.getElementById("imputMensaje").classList.remove("xInvisible"),setTimeout(()=>{document.getElementById("imputMensaje").classList.add("xInvisible")},2e3)},pingMensajeria:async function(){_cpSocketOpen(),await _cpSocketPingMensajeria(this.codigoComercio)?window.location.href="http://localhost:7543/":showToastSwal("warning","Servicio de mensajería no disponible"),$("body").addClass("loaded")},descargarApp:function(){var e=document.createElement("a");e.href="https://papaya-comercio-files.s3.us-east-2.amazonaws.com/files/MensajeriaWhatsApp-v1.0.0.exe",e.download="MensajeriaWhatsApp-v1.0.0.exe",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}})</script></dom-module>