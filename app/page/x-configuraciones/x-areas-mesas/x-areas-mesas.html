<dom-module id="x-areas-mesas"><template is="dom"><h3>Areas y Mesas</h3><p>Configura las áreas y mesas de tu local.<div class="xLinea2"></div><br><table><thead><th class="text-left">Area<th class="text-center">Desde la mesa<th class="text-center">Hasta la mesa<th class="text-center"><tbody><tr><td><input class="selected-template-1"placeholder="Titulo del Area"id="tituloarea"onchange="conMayusculas(this)"><td class="text-center"><input class="selected-template-1 text-center"type="number"placeholder="# Mesa"id="desde"><td class="text-center"><input class="selected-template-1 text-center"type="number"placeholder="# Mesa"id="hasta"><td class="text-center"><button class="btn btn-sm btn-primary"on-click="agregarArea">+ Agregar</button><tr><td colspan="4"class="text-right text-danger fw-600 animated"id="alertMessage"style="display:none"></tr><template is="dom-repeat"items="{{listAreas}}"as="item"><tr><td>{{item.titulo}}<td class="text-center">{{item.desde}}<td class="text-center">{{item.hasta}}<td class="text-center"><span class="xDeleteRow"on-click="eliminarArea"></span></template></table><br><button class="btn btn-success"disabled$="{{!isShowBtnGuardar}}"on-click="guardarCambios"><i class="fa fa-save"></i> Guardar Cambios</button></template><script>var xThisAreasMesas;Polymer({is:"x-areas-mesas",properties:{listAreas:{type:Array,value:[]},isShowBtnGuardar:{type:Boolean,value:!1}},attached:function(){(xThisAreasMesas=this).loadAreas()},agregarArea:function(){var e=this.$.tituloarea.value,a=parseInt(this.$.desde.value),s=parseInt(this.$.hasta.value);if(a<0||s<0)this.showAlert("Los números de mesa no pueden ser negativos.");else if(s<a)this.showAlert('El número de mesa "hasta" no puede ser menor que el número de mesa "desde".');else{for(var t=0;t<this.listAreas.length;t++){var r=this.listAreas[t];if(a>=r.desde&&a<=r.hasta||s>=r.desde&&s<=r.hasta)return void this.showAlert("El rango de mesas se superpone con un área existente.")}this.push("listAreas",{titulo:e,descripcion:"",desde:a,hasta:s}),this.isShowBtnGuardar=!0,this.$.tituloarea.value="",this.$.desde.value="",this.$.hasta.value="",this.$.tituloarea.focus()}},eliminarArea:async function(e){var a=paramsSwalAlert,a=(a.html=`<div class="p-1" style="overflow: hidden;"><i class="fa fa-trash-o fa-2x text-danger" aria-hidden="true"></i>
                                <p class="mt-1 fs-18">Esta seguro de borrar este registro?</p>
                                </div>`,a.confirmButtonText="Si, borrar",a.cancelButtonText="Cancelar",a.showCancelButton=!0,await showAlertSwalHtmlDecision(a));a.isConfirmed&&(a=e.model.index,this.splice("listAreas",a,1),this.isShowBtnGuardar=!0)},guardarCambios:async function(){xPopupLoad.xopen();var e={listAreas:this.listAreas,op:50};(await(new httpFecht).axiosExecute({type:"POST",url:"../../bdphp/log_009.php",data:e},!0,!1)).success?xPopupLoad.xclose():(xPopupLoad.xclose(),this.showAlert("Ocurrió un error al guardar los cambios."))},showAlert:function(e){let a=this.$.alertMessage;a.textContent=e,a.classList.add("animate__flash"),$(a).fadeIn().delay(3e3).fadeOut(function(){a.classList.remove("animate__flash")})},loadAreas:async function(){var e=await(new httpFecht).axiosExecute({type:"POST",url:"../../bdphp/log_009.php",data:{op:5001}},!0,!1);e.success?this.listAreas=e.datos:this.showAlert("Ocurrió un error al cargar las áreas.")}})</script></dom-module>