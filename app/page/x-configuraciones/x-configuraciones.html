<link rel="import"href="../../x-componentes/x-comp-find-sede/x-comp-find-sede.html"><link rel="import"href="../../x-componentes/x-comp-find-comprobante/x-comp-find-comprobante.html"><link rel="import"href="../../x-componentes/x-comp-find-categoria/x-comp-find-categoria.html"><link rel="import"href="./x-carta-virtual-config/x-carta-virtual-config.html"><link rel="import"href="./x-carta-virtual-config/x-carta-virtual-mesas.html"><link rel="import"href="../../page/x-configuraciones/x-config-sede-opciones/x-config-sede-opciones.html"><link rel="import"href="./x-areas-mesas/x-areas-mesas.html"><link rel="import"href="../../x-componentes/x-edit-tipo-precio/x-edit-tipo-precio.html"><dom-module id="x-configuraciones"><template><paper-dialog id="dialog_borrar"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xtxtCentro"><img src="../../../images/_dlg_remove.gif"alt=""width="150px"></div><p>Esta seguro de querer borrar este registro?</p><br><div class="buttons"><button class="xBoton2 xPlomo"dialog-dismiss>Cancelar</button> <button class="xBoton2 xRojo"onclick="xDlgBorrar()">Si, borrar</button></div></paper-dialog><paper-dialog id="dialog_subir_file_alamcen"class="dialog_redondo"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><h4>Selecciona el almacen donde ingresan los productos:</h4><select class="xTextRow2"id="sel_almacen_file"></select><br><br><br><div class="xBoton2 xVerde"onclick="xSubirFileAlmacen()">Listo, subir archivo e ingresar</div></div></paper-dialog><paper-dialog id="dialog_add_sede"class="dialog_redondo"style="max-width:550px;overflow:auto"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><paper-tabs id="tab_sede"selected="{{selectedTabSede}}"><paper-tab>DATOS DE SEDE</paper-tab><paper-tab>VARIABLES</paper-tab></paper-tabs><div class="xLinea2"></div><br><iron-pages selected="{{selectedTabSede}}"><div><form id="frm_sede"><input class="xMiInput xPasarEnter2"placeholder="DESCRIPCION"onchange="conMayusculas(this)"id="nombre"name="nombre"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="DIRECCION"onchange="conMayusculas(this)"id="direccion"name="direccion"espaciar required><div class="d-flexx"><div><label for="ciudad"class="label-input">Ciudad</label> <input class="xMiInput xPasarEnter2"placeholder="CIUDAD"onchange="conMayusculas(this)"id="ciudad"name="ciudad"required> <label for="eslogan"class="label-input">Eslogan</label> <input class="xMiInput xPasarEnter2"placeholder="ESLOGAN"id="eslogan"name="eslogan"maxlength="100"></div><div><label for="mesas"class="label-input">Número de Mesas</label> <input type="number"class="xMiInput xPasarEnter2"placeholder="NUMERO DE MESAS"id="mesas"min="1"name="mesas"> <label for="telefono"class="label-input">Telefono</label> <input class="xMiInput xPasarEnter2"placeholder="TELEFONO"id="telefono"name="telefono"></div></div><br><div><p class="fw-600">Razón Social para comprobantes electronicos.<div><label for="ruc_cpe"class="label-input">Ruc</label> <input class="xMiInput xPasarEnter2"placeholder="RUC"onchange="conMayusculas(this)"id="ruc_cpe"name="ruc_cpe"espaciar required> <label for="razonsocial_cpe"class="label-input">Razón Social</label> <input class="xMiInput xPasarEnter2"placeholder="RAZON SOCIAL"onchange="conMayusculas(this)"id="razonsocial_cpe"name="razonsocial_cpe"espaciar required></div></div><div class="xInvisible"><input id="idsede"name="idsede"> <input id="idorg"name="idorg"value$="[[xt_org]]"></div><br><br><p class="fw-600">Email donde se enviaran los cierres de caja.<p class="text-secondary fs-12">Puede separar por comas ej. gerente@gmail.com, admin_local@hotmail.com</p><input class="xMiInput xPasarEnter2"placeholder="EMAIL"id="email_cierre"name="email_cierre"espaciar></form><br><button class="btn btn-primary"onclick="xGuardarSede()">Guardar</button> <button class="btn btn-secondary"onclick="dialog_add_sede.close()">Cancelar</button></div><div><x-config-sede-opciones id="compOpcionesSede"></x-config-sede-opciones></div></iron-pages></div></paper-dialog><paper-dialog id="dialog_add_cat"class="dialog_redondo"style="max-width:450px"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><h4>CARTA</h4><form id="frm_cat"><input class="xMiInput xPasarEnter2"placeholder="DESCRIPCION"onchange="conMayusculas(this)"id="descripcion"name="descripcion"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="DETALLE"onchange="conMayusculas(this)"id="detalle"name="detalle"espaciar><br><br><p class="fw-600">Horario Atención:<p class="text-secondary fs-12">Hora en formato 24hrs ejemplo: 18:00<div class="d-flexx align-content-between"><input class="xMiInput xPasarEnter2"placeholder="HORA INICIO"onchange="conMayusculas(this)"id="hora_ini"name="hora_ini"espaciar> <input class="xMiInput xPasarEnter2"placeholder="HORA FINAL"onchange="conMayusculas(this)"id="hora_fin"name="hora_fin"espaciar></div><br><p class="fw-600">Dias Disponbles:<hr><label><input type="checkbox"name=""class="dia_disponible"value="2"checked="checked">Lunes</label> <label><input type="checkbox"name=""class="dia_disponible"value="3"checked="checked">Martes</label> <label><input type="checkbox"name=""class="dia_disponible"value="4"checked="checked">Miercoles</label> <label><input type="checkbox"name=""class="dia_disponible"value="5"checked="checked">Jueves</label> <label><input type="checkbox"name=""class="dia_disponible"value="6"checked="checked">Viernes</label> <label><input type="checkbox"name=""class="dia_disponible"value="7"checked="checked">Sabado</label> <label><input type="checkbox"name=""class="dia_disponible"value="1"checked="checked">Domingo</label><br><br><p class="fw-600">Permisos:<hr><label><input type="checkbox"name=""id="check_visible_cliente"checked="checked">Visible para el cliente (Delivery, Mozo Virtual)</label><br><label><input type="checkbox"name=""id="check_accesible_mozo">Accesible desde el app de pedidos (mozos) <strong>solo cuando este disponible.</strong></label><div class="xInvisible"><input id="idsede"name="idsede"value$="[[xt_idsede]]"> <input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="dia_disponible"name="dia_disponible"> <input id="visible_cliente"name="visible_cliente"> <input id="accesible_mozo"name="accesible_mozo"> <input id="idcategoria"name="idcategoria"></div></form><br><br><div class="xLinea2"></div><br><br><div class="xBoton2 xAzul"onclick="xGuardarCategoria()">Guardar</div><div class="xBoton2 xPlomo"onclick="dialog_add_cat.close()">Cancelar</div></div></paper-dialog><paper-dialog id="dialog_add_tpc"style="width:300px"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><h4>TIPO DE CONSUMO</h4><form id="frm_tpc"><input class="xMiInput xPasarEnter2"placeholder="DESCRIPCION"onchange="conMayusculas(this)"id="descripcion"name="descripcion"espaciar required><div class="xInvisible"><input id="idsede"name="idsede"value$="[[xt_idsede]]"> <input id="idorg"name="idorg"value$="[[xt_org]]"></div></form><br><br><div class="xLinea2"></div><br><br><div class="xBoton2 xAzul"onclick="xGuardarTPC()">Guardar</div><div class="xBoton2 xPlomo"onclick="dialog_add_tpc.close()">Cancelar</div></div></paper-dialog><paper-dialog id="dialog_img_ico_carta"class="dialog_redondo overflow-auto"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><div class="xContent"><span class="xColorRow_Plomo">Este icono se mostrara en la aplicacion de pedidos</span><div class="content-icon-seccion"><template is="dom-repeat"items="{{listIconSeccion}}"as="item"><img data-index="[[index]]"onclick="updateIconSeccion(this)"class="img-ico-seccion-size-2"src="{{item.img}}"alt="a2"></template></div></div></paper-dialog><br><h3>CONFIGURACIONES</h3><div class="xLinea2"></div><br><div><paper-tabs selected="{{selected_conf}}"id="tab_cnf"scrollable><paper-tab>DATOS DEL ESTABLECIMINETO</paper-tab><paper-tab>CATEGORIAS (CARTA)</paper-tab><paper-tab>TIPOS DE CONSUMO</paper-tab><paper-tab>REGLAS DE LA CARTA</paper-tab><paper-tab>DATOS DE IMPRESION</paper-tab><paper-tab>DESPACHO E IMPRESORAS</paper-tab><paper-tab>ALMACENES</paper-tab><paper-tab>EMISION DE COMPROBANTES</paper-tab><paper-tab>CARTA APP</paper-tab><paper-tab>AREAS Y MESAS</paper-tab></paper-tabs><div class="xLinea2"></div><br><iron-pages selected="{{selected_conf}}"><div id="div_datos_establecimiento"class="xAlinearce"style="width:100%"><div class="xm_at_cont xAlinearce xBordeDe"><form id="frm_org"><input class="xMiInput xPasarEnter2"placeholder="ESTABLECIMIENTO / ORGANIZACION"onchange="conMayusculas(this)"id="nombre"name="nombre"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="DIRECCION"onchange="conMayusculas(this)"id="direccion"name="direccion"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="RUC"onchange="conMayusculas(this)"id="ruc"name="ruc"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="TELEFONO"onchange="conMayusculas(this)"id="telefono"name="telefono"espaciar required> <input type="email"class="xMiInput xPasarEnter2"placeholder="EMAIL CONTACTO"id="email"name="email"espaciar required><br><br><br><div class="xInvisible"><input id="idorg"name="idorg"value$="[[xt_org]]"></div><div class="xBoton2 xAzul"onclick="xGuardarOrg()">Guardar Cambios</div></form></div><div class="xm_at_cont xAlinearce"><table width="100%"class="xtable2"id="tb_org"><thead><th>SEDE<th>CIUDAD<th width="5px"></thead></table></div><br><br></div><div id="div_categoria"><p class="xBold">Agregue las cartas que el establecimiento ofrece. Por ejemplo: Desayunos, Almuerzos, Cenas, etc. O si es una categoria General.<br>Establesca la hora de inicio y final el sistema lo mostrara u ocultara automaticamente segun la hora.</p><br><paper-fab icon="add"onclick="dialog_add_cat.open()"title=""tabindex="0"class="verde btnAdd"></paper-fab><table width="100%"class="xtable2"id="tb_cat"><thead><th align="left">DESCRIPCION<th align="left">H. INICIO<th align="left">H. FINAL<th width="5px"><th width="5px"></thead></table></div><div id="div_tpc"><p class="xBold">Establecer los tipo de consumo que seran visibles en la carta, por ejemplo: Consumir en el Local, Para LLevar.</p><br><paper-fab icon="add"onclick="dialog_add_tpc.open()"title=""tabindex="0"class="verde btnAdd"></paper-fab><table width="100%"class="xtable2"id="tb_tpc"><thead><th align="left">DESCRIPCION<th width="5px"></thead></table><br><br><hr><br><br><div class="d-flexx"><div class="mr-5"><h3>Metodos de Pago Aceptatos.</h3><table><thead><th align="left">Metodo<th><tbody><template is="dom-repeat"items="{{listMetodoPagos}}"as="itemT"><tr><td>{{itemT.descripcion}}<td><paper-checkbox class="checkTP"checked$="{{itemT.aceptado}}"data-idt="{{itemT.idtipo_pago}}"onchange="updateMetodoPagoAceptado()"></paper-checkbox></template></table></div><div><x-edit-tipo-precio></x-edit-tipo-precio></div></div></div><div id="div_regla"><p class="xBold">Especifique las reglas que obedece la carta, como por ejemplo: Cada plato de fondo sale con una entrada.</p><br><label for="selCategoria">Categoria:</label> <select class="xTextRow2"id="selCategoria"inline></select><br><br><label for="selSeccion">Seccion :</label> <select class="xTextRow2"id="selSeccion"inline></select> <label for="selCon">Sale con:</label> <select class="xTextRow2"id="selCon"inline></select><div class="xBoton2 xAzul"onclick="xAddRegla()">Agregar Regla</div><div class="xInvisible"><form id="frm_regla"><input name="idorg"id="idorg"value$="[[xt_org]]"> <input name="idsede"id="idsede"value$="[[xt_idsede]]"> <input name="idcategoria"id="idcategoria"> <input name="idseccion"id="idseccion"> <input name="idseccion_detalle"id="idseccion_detalle"></form></div><br><br><br><table class="xtable2"style="max-width:600px;width:600px"id="tb_regla"><thead><th align="left">Categoria:<th align="left">Seccion:<th align="left">Sale con:<th></thead></table></div><div id="div_datos_print"><div><table id="tb_print"><tr><td><h3>IP Impresora</h3><span>Impresora ticketera donde se imprimiran los pedidos</span><td><input class="xMiInput"placeholder="IP xx.xx.xx.x"id="td_ip"><tr><td><h3>Numero de Copias</h3><span>Numero de Copias a imprimir por pedido</span><td><input class="xMiInput"placeholder="00"type="number"min="0"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="td_copia"><tr><td><h3>Pie de pagina</h3><span>Mensaje en el pie de pagina para el pedido o comanda</span><td><textarea class="xMiInput"class="xMiInput"placeholder="Pie de pagina"maxlength="200"id="td_pie"cols="30"rows="6"></textarea><tr><td><h3>Pie de pagina para el comprobante</h3><span>Pie de pagina que se mostrara en el <strong>comprobante</strong></span><td><textarea class="xMiInput"placeholder="Pie de pagina comprobante"maxlength="255"id="td_pie_comprobante"cols="30"rows="8"></textarea><tr><td><h3>Pie de pagina para el Pre-cuenta</h3><span>Pie de pagina que se mostrara en la <strong>pre cuenta</strong> que se entrega al cliente.</span><td><textarea class="xMiInput"placeholder="Pie de pagina precuenta"maxlength="255"id="td_pie_precuenta"cols="30"rows="8"></textarea><tr><td><h3>Logo</h3><span>Logo a imprimir en el ticket, ancho remcomendado 450px</span><td><input class="xMiInput"placeholder="Logo"maxlength="200"onclick="xSeleccionarFoto()"id="td_logo"readonly="readonly"> <input type="file"class="xInvisible xobj_subir_foto"id="ctrl_open_file"accept="image/*"> <img id="imgLogo"src=""alt=""width="450"><tr><td><h3>Tamaño de letra</h3><span>Las impresoras ticketeras pueden tener hasta 3 tipos de fuente (0,1,2)</span><td><input class="xMiInput"placeholder="0"type="number"min="0"max="3"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="td_size_font"><tr><td><h3>Margen Izquierda</h3><span>Por defecto es 0, aumentar cantidad para centrar</span><td><input class="xMiInput"placeholder="0"type="number"min="0"max="80"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="td_margen_iz"><tr><td><h3>Tamaño de fuente en la comanda</h3><span>Por defecto es de tamaño default.</span><td><select class="xTextRow2 xCursor"name="sel_size_font_comanda"id="sel_size_font_comanda"><option value="0">Default<option value="1">Grande<option value="2">Extra</select><tr><td><h3>Comanda muestra subtotales?</h3><span>Si en la comanda muestra subtotales del pedido, es recomendable<br>que muestre si es una sola impresora</span><td><paper-checkbox id="check_isprint_subtotales_comanda"></paper-checkbox>Si<br><tr><td><h3>La copia en formato corto (Ahorro de papel)?</h3><span>Si se imprime una copia de la comanda que este muestro en formato corto, es decir<br>solo datos necesarios - ayuda a ahorrar papel</span><td><paper-checkbox id="check_isprint_copy_short"></paper-checkbox>Si<br><tr><td><h3>Imprimir todo en formato corto (Ahorro de papel)?</h3><span>Se imprime todas las comanda en formato corto, es decir solo<br>datos necesarios - ayuda a ahorrar papel</span><td><paper-checkbox id="check_isprint_all_short"></paper-checkbox>Si<br><tr><td><h3>Imprimir Precuentas y comprobantes en formato corto?</h3><span>Se imprime comprobantes y pre-cuentas agrupados por producto - ayuda a ahorrar papel</span><td><paper-checkbox id="check_isprint_cpe_short"></paper-checkbox>Si<br><tr><td><h3>Imprimir los pedidos delivery completo?</h3><span>Si tienes varias areas de producción los pedidos delivery<br>se imprimira completo en todas las areas.</span><td><paper-checkbox id="check_isprint_all_delivery"></paper-checkbox>Si<br></table><br><br><div class="xBoton2 xAzul"onclick="xGuardarCambioPrint()">Guardar Cambios</div><div class="xBoton2 xVerde"onclick="xPruebaTestPrint()">Test Impresion</div><div class="xInvisible"><form id="frm_conf_print"><input id="idconf_print"name="idconf_print"> <input id="ip_print"name="ip_print"> <input id="num_copias"name="num_copias"> <input id="pie_pagina"name="pie_pagina"> <input id="pie_pagina_comprobante"name="pie_pagina_comprobante"> <input id="pie_pagina_precuenta"name="pie_pagina_precuenta"> <input id="var_size_font"name="var_size_font"> <input id="var_margen_iz"name="var_margen_iz"> <input id="var_size_font_tall_comanda"name="var_size_font_tall_comanda"> <input id="isprint_subtotales_comanda"name="isprint_subtotales_comanda"> <input id="isprint_copy_short"name="isprint_copy_short"> <input id="isprint_all_short"name="isprint_all_short"> <input id="isprint_cpe_short"name="isprint_cpe_short"> <input id="isprint_all_delivery"name="isprint_all_delivery"> <input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idsede"name="idsede"value$="[[xt_idsede]]"></form></div><br><br><br><div class="xLinea2"></div><br><h3 class="xBold">SUB TOTALES</h3><br><h4>IMPUESTOS</h4><p>Ingrese el porcentaje del I.G.V. en numeros, si esta exonerado solo quite el check de activo; dejando especificado el porcentaje del impuesto (se utilizara para calcular otras operaciones).<div class="xLinea2"></div><br><br><form method="post"id="formProcentaje"><table id="tb_porcentaje"class="xtable1"width="38%"><thead><th>Activo<th>Impuesto<th align="center">Porcentaje<tbody></table><div class="xInvisible"><input id="idconf_print"name="idconf_print"></div></form><br><br><h3 class="xBold">SERVICIOS NO FACTURABLES</h3><p>Servicios no facturables como: propinas o donativos, importes que no son percibido por el restaurante.<br>Por ejemplo para cargar el servicio de atencion (propinas) podria configurar: Descripcion: Servicio , Porcentaje: 10.<br>Esto sumaria 10% del total de la cuenta. Que seria percibido por el mozo que atendio el pedido o mesa.<div class="xLinea2"></div><br><br><form method="post"id="formProcentajeNoFacturable"><table id="tb_porcentaje_no_facturable"class="xtable1"width="50%"><tr data-id=""class="xSinBorde"><td><input class="xMiInput"placeholder="Descripcion"onchange="conMayusculas(this)"name="descripcion"id="descripcion"required><td><input type="number"min="0"class="xMiInput"placeholder="porcentaje"pattern="0|[1-9][0-9]*"name="porcentaje"id="porcentaje"required><td><paper-fab icon="add"onclick="xAddPorcentaje()"title="Guardar"tabindex="0"></paper-fab></table><div class="xInvisible"><input id="idconf_print"name="idconf_print"></div></form><br><br><h3 class="xBold">COSTOS ADICIONALES</h3><p>Ingrese los costos adicionales según tipo de consumo.<br>Ejemplo: Para llevar ó Delivery, Descripcion: Taper, Tipo de consumo: Para llevar, Seccion:Platos de fondo, Importe:1.00 <strong>(por cada item)</strong> es decir por cada taper.<br>Tambien puede ingresar servicios fijos que se cobran <strong>por pedido.</strong> Ejemplo: En el servicio de Delivery se suele cobrar un monto fijo por el transporte. Quedando de esta manera: Descripcion: Servicio delivery, Tipo consumo: Delivery, Por: Pedido, Impore: 3.00.<div class="xLinea2"></div><br><br><form method="post"id="formAdicionales"><table id="tb_Adicionales"class="xtable1"><tr data-id=""class="xSinBorde"><td>Activo<td><input class="xMiInput"placeholder="Descripcion"onchange="conMayusculas(this)"name="descripcion"id="descripcion"required><td><select class="xTextRow2"id="selTPC_adicional"inline></select><td><select class="xTextRow2"id="selNivel_adicional"inline></select><td><select class="xTextRow2"id="selSeccion_adicional"inline></select><td><input type="number"min="0"class="xMiInput"placeholder="Importe"pattern="0|[1-9][0-9]*"name="importe"id="importe"onblur="xRetornaMoneda(this)"required><td><paper-fab icon="add"onclick="xAddAdicional()"title="Guardar"tabindex="0"></paper-fab></table><div class="xInvisible"><input id="idconf_print"name="idconf_print"> <input id="idtipo_consumo"name="idtipo_consumo"> <input id="nivel"name="nivel"> <input id="idseccion"name="idseccion"></div></form><br><br></div></div><div id="div_impresoras"class="xContent"><h3 class="xBold">Zona de despacho e Impresoras</h3><p>Listado de zonas de despacho e impresoras. Si no utilizara impresoras, especifique solo la zona de despacho. Ej: Cocina, Bar, etc...<div class="xLinea2"></div><br><p>Antes de agregar impresora se recomienda hacer un test de impresion.<p><strong>Recurso compartido:</strong> la impresora esta conectada a una computadora por usb, compartala y escriba la direccion ejemplo: //usuario:clave@ippc/nomimpresora<p><strong>Minutos ':</strong> Tiempo promedio en minutos que toma en despachar un pedido. Ej: En Cocina el tiempo promedio para despachar un pedido es de 15minutos; en Bar es de 3minutos. <strong>(Solo si trabaja con tablets en las zonas de despacho)</strong><p><strong>img64 ':</strong> Indica si la impresora recibira las imagenes en 64bits</p><br><form method="post"id="form_impresoras"><table id="tb_impresoras"class="xtable1"><thead><th><p>Zona de despacho<p><p class="xfont10">Donde se imprime o muestra<p><th><p>Minutos '<p><p class="xfont10">tiempo promedio para depachar<p><th><p>Impresora<p>IP / recurso compartido<th>Copias<th><p>.<p>Tamaño de letra<th><p>.<p>Margen Izquierda<th><p>.<p>img64<th><p>.<p>Papel<th><paper-fab icon="add"onclick="xAddImpresora()"title="Agregar"tabindex="0"></paper-fab></thead><tr data-id=""class="xSinBorde tr_addPrint"><td><input class="xMiInput xPasarEnter2"placeholder="Zona de despacho"name="descripcion"id="descripcion"onchange="conMayusculas(this)"required><td><input class="xMiInput xPasarEnter2"placeholder=""type="number"min="0"max="60"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="minutos_pedido"name="minutos_pedido"><td><input class="xMiInput xPasarEnter2"placeholder="Impresora"name="ip"id="ip"required><td><input class="xMiInput xPasarEnter2"placeholder="0"type="number"min="0"max="5"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="num_copias"name="num_copias"><td><input class="xMiInput xPasarEnter2"placeholder="0"type="number"min="0"max="3"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="var_size_font"name="var_size_font"><td><input class="xMiInput"placeholder="0"type="number"min="0"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="var_margen_iz"name="var_margen_iz"><td><input class="xMiInput"placeholder="0"type="number"min="0"max="1"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="img64"name="img64"><td><select id="select_papel_zona"><option value="0">80 mm<option value="1">58 mm</select><td><a href="#"onclick="xTestPrint(0)">Test Impresion</a></table><div class="xInvisible"><input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idsede"name="idsede"value$="[[xt_idsede]]"></div></form><br><br><div class="xLinea2"></div><br><h3 class="xBold">Secciones e impresoras</h3><p>Cada seccion puede imprimirse o mostrarse en las pantallas de diferentes zonas de despacho, por ejemplo: La seccion "platos a la carta" se imprimira o mostrara en la cocina; la seccion "tragos" se imprimira o mostrara en el bar.</p><br><table id="tb_sec_impr"class="xtable1"><thead><th>Seccion<th>Imprime o muestra en:<th></thead></table><div class="xInvisible"><select id="sel_impr_Sec"></select> <select id="sel_impr_Sec_otro"></select></div><br><br><div class="xLinea2"></div><br><div id="div_impresora_tpc"><h3 class="xBold">Impresora por canal de consumo</h3><p>Seleccione la impresora donde se imprimiran los pedidos según el canal de consumo. Al realizar esta asignacion se omitira la configuración de las secciones.</p><br><table id="tb_sec_impr_tpc"class="xtable1"><thead><th>Canal<th>Imprime o muestra en:</thead></table><div class="xInvisible"><select id="sel_impr_tpc"></select></div><br><br><div class="xLinea2"></div><br></div><div id="div_impresora_precuenta"><h3 class="xBold">Impresora para pre-cuentas - Mozos -</h3><p>Configura la(s) impresora(s) donde se imprimiran las pre-cuentas enviadas por los mozos. Ej. para: "Piso 1" que abarca las mesas "1" al "20" la impresora "Piso 1 - Precuenta", para "Piso 2" ...</p><br><table id="tb_sec_impr_precuenta"class="xtable1"><thead><th>Area<th>Mesas<th>Impresora</thead></table><div class="xInvisible"><select id="sel_impr_precuenta"></select></div><br><br><div class="xLinea2"></div><br></div><div class="xInvisible"id="div_secciones_bodega"><h3 class="xBold">Secciones de Bodega</h3><p>Tiene un almacen que hace de bodega, Cada seccion puede imprimirse o mostrarse en las pantallas de diferentes zonas de despacho, por ejemplo: La seccion "Cervezas" se imprimira o mostrara en el bar.</p><br><table id="tb_sec_impr_bodega"class="xtable1"><thead><th>Seccion<th>Imprime o muestra en:</thead></table><div class="xInvisible"><select id="sel_impr_Sec_bodega"></select></div><br><br><div class="xLinea2"></div><br></div><h3 class="xBold">Otros comprobantes</h3><p>Seleccione en que impresora se imprimiran los siguientes comprobantes</p><br><table id="tb_otros_dic"class="xtable1"><thead><th>Descripcion<th>Imprime en:</thead><tr class="row"data-id="-1"><td>Pre-cuenta<td class="td_sel_ot_print"id="row-1"><tr class="row"data-id="-2"><td>Comprobantes (facturas,boletas,tickes)<td class="td_sel_ot_print"id="row-2"><tr class="row"data-id="-3"><td>Cierre de caja<td class="td_sel_ot_print"id="row-3"><tr class="row"data-id="-4"><td>Listado de compras (modulo compras)<td class="td_sel_ot_print"id="row-4"><tr class="row"data-id="-5"><td>Produccion<td class="td_sel_ot_print"id="row-5"><tr class="row"data-id="-6"><td>Distribuicion<td class="td_sel_ot_print"id="row-6"><tr class="row"data-id="-7"><td>Orden de Pedido<td class="td_sel_ot_print"id="row-7"></table><br><br><div class="xLinea2"></div><br><h3 class="xBold">Impresora Local</h3><p>Agrega una impresora local que se usara solo con este terminal o con esta computadora.<br>Esto se utiliza en el escenario de que cada caja tenga su impresora, por ejemplo puede tener 2 cajas o mas cada una con su respectiva impresora.<br>Esto tambien implica que los <strong>"Otros comprobantes"</strong> se enviaran a imprimir a esta impresora.<br><strong>Img64:</strong> 1 Indica que las imagenes se imprimiran desde un mapa de bits.</p><br><form method="post"id="form_impresora_local"><paper-checkbox id="check_print_copia_local"onclick="printCopialocalAll()"></paper-checkbox>Imprimir una copia del pedido en la impresora local, para control interno o para el cliente.<br><br><table id="tb_impresora_local"class="xtable1"><thead><th>Descripcion<th>IP / recurso compartido<th>Copias<th>Tamaño de letra<th>Margen Izquierda<th>Img64<th>Papel<th></thead><tr data-id=""class="xSinBorde tr_addPrint_local"data-t="impresora"><td><input class="xMiInput xPasarEnter2"placeholder="Descripcion"name="descripcion"id="descripcion"required><td><input class="xMiInput xPasarEnter2"placeholder="Descripcion"name="ip"id="ip"required><td><input class="xMiInput xPasarEnter2"placeholder="0"type="number"min="0"max="3"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="num_copias"name="num_copias"><td><input class="xMiInput xPasarEnter2"placeholder="0"type="number"min="0"max="3"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="var_size_font"name="var_size_font"><td><input class="xMiInput"placeholder="0"type="number"min="0"max="3"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="var_margen_iz"name="var_margen_iz"><td><input class="xMiInput"placeholder="0"type="number"min="0"max="2"pattern="[0-9]+([\.,][0-9]+)?"step="any"id="img64"name="img64"><td><select id="select_papel_caja"><option value="0">80 mm<option value="1">58 mm</select><td><a href="#"onclick="xAddImpresora_local()">Guardar</a><td><a href="#"onclick="xTestPrint(1)">Test Impresion</a><td><a href="#"onclick="xBorrarItemPrintLocal(this)"id="btn_borrar_print_local"class="xInvisible">Anular</a></table><div class="xInvisible"><input id="idimpresora"name="idimpresora"> <input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idsede"name="idsede"value$="[[xt_idsede]]"> <input id="local"name="local"value="1"></div></form><br><br><br></div><div id="div_almacenes"class="xContent"><h3>Listado de almacenes</h3><p><strong>Es bodega?:</strong> Identifica el almacen donde estan los productos para la venta al publico, esto tambien figuran en la carta<p><strong>Imprime en pedido?:</strong> Si en el pedido hay solo productos de este almacen imprime comanda o no?<p><strong>Venta Interna:</strong> Los productos del almacen estan disponibles en venta rapida solo para personal autorizado, clientes no tienen acceso<div class="xLinea2"></div><br><br><form method="post"id="form_almacen"><table id="tb_almacenes"class="xtable1"><thead><th>Descripcion<th>Es bodega?<th>Imprime en pedido?<th>Venta interna</thead><tr data-id=""class="xSinBorde"><td><input class="xMiInput"placeholder="Descripcion"onchange="conMayusculas(this)"name="descripcion"id="descripcion"required><td><select id="sel_bodega"><option value="0">NO<option value="1">SI</select><td><select id="sel_imprime_comanda"><option value="0">NO<option value="1">SI</select><td><select id="sel_solo_venta_interna"><option value="0">NO<option value="1">SI</select><td><paper-fab icon="add"onclick="xAddAlmacen()"title="Guardar"tabindex="0"></paper-fab></table><div class="xInvisible"><input id="idalmacen"name="idalmacen"> <input id="bodega"name="bodega"> <input id="imprimir_comanda"name="imprimir_comanda"> <input id="solo_venta_interna"name="solo_venta_interna"> <input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idsede"name="idsede"value$="[[xt_idsede]]"></div><br><br><div class="xLinea2"></div><br><h3>Stock Inicial</h3><p>Descarga el archivo excel para realizar el inventario inicial, luego selecciona el almacen donde ingresaran los productos y sube el archivo. Es importante que respete el formato del archivo.</p><br><div class="xBoton2 xAzul"onclick="xDescargarXls()"><img src="../../../images/x_down.png">Descargar Archivo</div><div class="xBoton2 xVerde"onclick="dialog_subir_file_alamcen.open()"><img src="../../../images/x_up.png">Subir Archivo</div><input class="xInvisible"type="file"id="fileAlamcen"><br></form><br><br></div><div id="div_emision_comprobantes"class="xContent"><h3>Configuracion para emitir comprobantes.</h3><p>Indique comprobantes de pago que emite, asi como las serie y el ultimo numero correlativo emitido.<p>Es apartir del ultimo correlativo emitido que el sistema empezara a emnumerar los comprobantes. Ej; ultimo correlativo emitido 100, entonces el sistema emitira 101.<div class="xLinea2"></div><br><br><form method="post"id="form_emision_comprobante"><table id="tb_emision_comprobantes"class="xtable1"><thead><th>Sede<th>Comprobante<th>Serie<th>Correlativo</thead><tr data-id=""class="xSinBorde"><td><x-comp-find-sede id="compFindSede"onchange="_getSede(sedes)"></x-comp-find-sede><td><x-comp-find-comprobante id="compFindComprobante"showicons="[[showIconsListCPE]]"op="2"onchange="_getComprobante(comprobantes)"></x-comp-find-comprobante><td><input autocomplete="off"class="xMiInput"placeholder="Serie"onchange="conMayusculas(this)"name="serie"id="serie"required><td><input class="xMiInput"placeholder="Correlativo"type="number"min="0"pattern="[0-9]+([\.,][0-9]+)?"step="any"name="correlativo"id="correlativo"required><td><paper-fab icon="add"onclick="config_comprobante_add()"title="Guardar"tabindex="0"></paper-fab></table><div class="xInvisible"><input id="idsede"name="idsede"> <input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idtipo_comprobante"name="idtipo_comprobante"></div></form><br><br><h3>Comprobante Electronico.</h3><p>Para activar la emisión de comprobantes electrónicos necesita un token único y una llave digital que son proporcionados por el equipo de soporte tecnico.<p><strong>Importante: </strong>Para la facturacion electronica, es requerido indicar en la informacion de la sede: El ubigeo y el codigo de domicio fiscal.<div class="xLinea2"></div><br><br><br><br><br></div><div id="div_carta_app"class="xContent"><x-carta-virtual-config></x-carta-virtual-config><br><br><x-carta-virtual-mesas></x-carta-virtual-mesas></div><div id="div_areas_mesas"class="xContent"><x-areas-mesas></x-areas-mesas></div></iron-pages></div></template><style>.label-input{margin-left:5px;font-size:10px;color:grey}</style></dom-module><script src="config_comporbantes.js"></script><script src="../../shared/config.const.js"></script><script src="../../view/item_pedido_print_comprobante.js"></script><script>var xThisConfig,isSocket,xidSeccionIcon,opIcon,_arrPrintLocal=[],numIconSeccion=244,xRutaIconSeccion="../../images/img-icon-carta/",xObjBorrar=0;function _getCategoria(e){}function xIniConf(){xPopupLoad=document.getElementById("xLoad"),xm_LogChequea(function(){var e;xm_log_get("ini_us"),$("body").addClass("loaded"),xThisConfig.xt_org=xIdOrg,xThisConfig.xt_idsede=xIdSede,xThisConfig.xt_idus=xIdUsuario,""!==xIdOrg&&null!=xIdOrg||(e=xm_log_get("app3_us"),xThisConfig.xt_org=e.ido,xThisConfig.xt_idsede=e.idsede,xThisConfig.xt_idus=e.idus),_arrPrintLocal=[],xLoadOrg(),xLoadCategoria(),isSocket=0!==parseInt(xm_log_get("datos_org_sede")[0].pwa),loadIconSeccion(),xloadMetodosPagos()}),$("#Titulo_page").text("Configuraciones"),xThisConfig.selected_conf=0,$(".xPasarEnter2").on("keyup",function(e){e=e.which;if(13==e||186==e){var e=$("input"),a=e.index(document.activeElement);if(null!==e[a+1]){var t=e[a+1];if(void 0===t)return;if(null==(t=t.disabled?e[a+2]:t))return;t.focus(),t.select()}return!1}}),$(document).on("click",".check_adicional",function(e){var a=$(this).parents("tr").attr("data-id"),t=0;return 0==this.checked&&(t=1),$.ajax({type:"POST",url:"../../bdphp/log.php?op=105",data:{id:a,t:"conf_print_adicionales",c:t}}),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("click",".check_porcentaje_impuesto",function(e){var a=$(this).parents("tr").attr("data-id"),t=0;return 0==this.checked&&(t=1),$.ajax({type:"POST",url:"../../bdphp/log.php?op=106",data:{id:a,t:"conf_print_detalle",c:t,campo:"activo"}}),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("click",".check_cpe",function(e){var a=$(this).parents("tr").attr("data-id"),t=this.checked?1:0;return $.ajax({type:"POST",url:"../../bdphp/log.php?op=106",data:{id:a,t:"sede",c:t,campo:"facturacion_e_activo"}}),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$("#tab_cnf").on("iron-select",function(){switch(xThisConfig.selected_conf){case 1:xLoadCategoriaCarta();break;case 2:xloadTPC();break;case 3:xIniRegla();break;case 4:xIniDatoPrint();break;case 5:xLoadImpresorasConf();break;case 6:xLoadAlmacenes();break;case 7:config_comprobante_getall()}}),$("#tab_sede").on("iron-select",function(){1===xThisConfig.selectedTabSede&&document.getElementById("compOpcionesSede").loadData(xThisConfig.idsede_selected)}),$("#fileAlamcen").change(function(){xPopupLoad.xopen(),""!=$(this).val()&&(file=this.files[0],name=file.name,size=file.size,type=file.type,xNomFileXls=name,(xhr=new XMLHttpRequest).upload.addEventListener("load",transferenciaCompletaAlmacen,!1),xhr.open("POST","../../bdphp/upload.php",!0),xhr.setRequestHeader("Cache-Control","no-cache"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("X-File-Name",file.name),xhr.send(file))}),$(document).on("change",".xsel_sec_print",function(e){return xGuardarCambiosSeccionPrint($(this).attr("data-id"),this.value,0),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("change",".xsel_sec_print_otro",function(e){return xGuardarCambiosSeccionPrint($(this).attr("data-id"),this.value,0,!0),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("change",".xsel_sec_print_papel",function(e){return xGuardarCambiosSeccionPrintPapel($(this).attr("data-id"),this.value,0),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("change",".xsel_sec_print_bodega",function(e){return xGuardarCambiosSeccionPrint($(this).attr("data-id"),this.value,1),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("change",".xsel_tpc_print",function(e){return xGuardarCambiosTPCPrint($(this).attr("data-id"),this.value),e.stopPropagation(),e.stopImmediatePropagation(),!1}),$(document).on("change",".xsel_otros_print",function(e){var a=$(this).attr("data-id"),t=this.value;return xGuardarCambiosConfOtrosDoc($(this).parents("tr").attr("data-id"),a,t),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),document.getElementById("compOpcionesSede").addEventListener("close",function(e){dialog_add_sede.close()})}function loadIconSeccion(){var e=0,a=[];for(xThisConfig.listIconSeccion=[];e<=numIconSeccion;)a.push({img:xRutaIconSeccion+e+".png"}),e++;xThisConfig.listIconSeccion=a}function xDialogBorrarObj(e){xThisConfig.xObjBorrar=e,dialog_borrar.open()}function xDlgBorrar(){xBorrarItem(xThisConfig.xObjBorrar),dialog_borrar.close()}function xSubirFileAlmacen(){$("#fileAlamcen").click()}function transferenciaCompletaAlmacen(e){xleerXls(xNomFileXls=xIdOrg+xIdSede+xNomFileXls)}function xleerXls(e){xIdA=sel_almacen_file.value,""!=$("#fileAlamcen").val&&$.ajax({type:"POST",url:"../../bdphp/leer_excel.php?op=2",data:{f:xNomFileXls,fecha:xDevolverFecha(),a:xIdA}}).done(function(e){$("#fileAlamcen").val(""),xPopupLoad.xclose(),dialog_subir_file_alamcen.close(),alert("Se subio la informacion correctamente.")})}function xAddAlmacen(){$("#form_almacen #bodega").val(sel_bodega.value),$("#form_almacen #imprimir_comanda").val(sel_imprime_comanda.value),$("#form_almacen #solo_venta_interna").val(sel_solo_venta_interna.value),xPopupLoad.xopen(),$.post("../../bdphp/ManejoBD_IUD.php?tb=almacen",$("#form_almacen").serialize(),function(e){xPopupLoad.xclose(),$("#form_almacen").reset(),xPopupLoad.xclose(),xLoadAlmacenes()})}function xLoadAlmacenes(){$("#tb_almacenes .row").remove(),$("#tb_almacenes").append('<tr class="row"><td colspan="3"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=1604"}).done(function(e){for(var a="",t="",o=$.parseJSON(e).datos,i=0;i<o.length;i++)t=String(t+"<option value="+o[i].idalmacen+">"+o[i].descripcion+"</option>"),xsi_bodega=1==o[i].bodega?"checked":"",xsi_imprmime_p=1==o[i].imprimir_comanda?"checked":"",xsi_solo_venta_interna=1==o[i].solo_venta_interna?"checked":"",a=String(a+'<tr class="row" data-id="'+o[i].idalmacen+'"><td>'+o[i].descripcion+'</td><td><paper-checkbox class="check_almacen" data-campo="bodega" id="ch_bodega" '+xsi_bodega+'></paper-checkbox></td><td><paper-checkbox class="check_almacen" data-campo="imprimir_comanda" id="ch_print_comanda" '+xsi_imprmime_p+'></paper-checkbox></td><td><paper-checkbox class="check_almacen" data-campo="solo_venta_interna" id="ch_solo_venta_interna" '+xsi_solo_venta_interna+"></paper-checkbox></td></tr>");$("#tb_almacenes .row").remove(),$("#tb_almacenes").append(a).trigger("create"),$("#sel_almacen_file").html(t).trigger("create")})}function xDescargarXls(){var e=document.getElementById("download-container");null===e&&((e=document.createElement("iframe")).id="download-container",e.style.visibility="hidden",e.style.display="none",document.body.appendChild(e)),e.src="../../file/ingresar_productos.xls"}function xAddImpresora(){xPopupLoad.xopen(),$.post("../../bdphp/ManejoBD_IUD.php?tb=impresora",$("#form_impresoras").serialize(),function(e){xPopupLoad.xclose(),$("#form_impresoras #descripcion").val(""),$("#form_impresoras #ip").val(""),$("#form_impresoras #num_copias").val(""),$("#form_impresoras #var_margen_iz").val(""),$("#form_impresoras #var_size_font").val(""),$("#form_impresoras #img64").val(""),$("#form_impresoras #descripcion").focus(),xPopupLoad.xclose(),xLoadImpresorasConf()})}function xAddImpresora_local(){xPopupLoad.xopen();var e=$(".tr_addPrint_local #ip").val(),a=$(".tr_addPrint_local #descripcion").val(),t=$(".tr_addPrint_local #var_margen_iz").val(),o=$(".tr_addPrint_local #var_size_font").val(),i=$(".tr_addPrint_local #img64").val(),r=check_print_copia_local.checked?1:0,n=$(".tr_addPrint_local #num_copias").val(),c=$(".tr_addPrint_local #select_papel_caja").val(),t=""===t?0:t,o=""===o?0:o;$.ajax({type:"POST",url:"../../bdphp/log.php?op=-1061",data:{ip:e,des:a,margen:t,font:o,img64:i,copia_local:r,num_copias:n,papel_size:c}}).done(function(e){xPopupLoad.xclose(),window.localStorage.setItem("::app3_woIpPrintLoC",a),xLoadImpresorasConf()})}function xLoadImpresorasConf(){$("#tb_impresoras .row").remove(),$("#tb_impresoras").append('<tr class="row"><td colspan="3"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=-105"}).done(function(e){var a=$.parseJSON(e),t="",o="",i=(window.localStorage.getItem("::app3_woIpPrintLoC"),"");_arrPrintLocal=[],a=a.datos,$("#btn_borrar_print_local").addClass("xInvisible");for(var r=0;r<a.length;r++)1==a[r].local?_arrPrintLocal.push(a[r]):(""===(i=a[r].minutos_pedido)&&(i="0"),$("#select_papel_zona  option[value="+a[r].papel_size+"]").attr("selected","selected"),t=String(t+'<tr class="row" data-t="impresora" data-id="'+a[r].idimpresora+'"><td data-campo="descripcion"><span onclick="xModRow(this,0);">'+a[r].descripcion+'</span></td><td data-campo="minutos_pedido"><span onclick="xModRow(this,1);">'+i+'</span></td><td data-campo="ip"><span onclick="xModRow(this,2);">'+a[r].ip+'</span></td><td data-campo="num_copias"><span onclick="xModRow(this,5);">'+a[r].num_copias+'</span></td><td data-campo="var_size_font"><span onclick="xModRow(this,0);">'+a[r].var_size_font+'</span></td><td  data-campo="var_margen_iz"><span onclick="xModRow(this,4);">'+a[r].var_margen_iz+'</span></td><td  data-campo="img64"><span onclick="xModRow(this,4);">'+a[r].img64+'</span></td><td  data-papel="papel" data-id="'+a[r].idimpresora+'"><select class="xsel_sec_print_papel" data-id="'+a[r].idimpresora+'">'+$("#select_papel_zona")[0].innerHTML+'</select></td><td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td></tr>'),o=o+'<option value="'+a[r].idimpresora+'">'+a[r].descripcion+"</option>",$("#select_papel_zona  option[value="+a[r].papel_size+"]").attr("selected",!1));xLoadImpresoraLocal(),$("#tb_impresoras .row").remove(),$("#tb_impresoras").append(t).trigger("create"),o+='<option value="0">Ninguno</option>',$("#sel_impr_Sec").html(o).trigger("create"),$("#sel_impr_Sec_otro").html(o).trigger("create"),$("#sel_impr_Sec_bodega").html(o).trigger("create"),$("#sel_impr_tpc").html(o).trigger("create"),$.ajax({type:"POST",url:"../../bdphp/log.php?op=307"}).done(function(e){xThisConfig.dt_impr=$.parseJSON(e),xThisConfig.dt_impr=xThisConfig.dt_impr.datos,xLoadSecciones()})})}function xLoadImpresoraLocal(){var t="",e=_arrPrintLocal.length;const o=window.localStorage.getItem("::app3_woIpPrintLoC"),i=1===e?'<p class="xFondoRowverde"><strong>Asignado</strong></p>':'<a href="#" class="cursor" onclick="xAsignarPrintLocal(this)" title="Asignar impresora a ESTE equipo">Asingar</a>';_arrPrintLocal.map(e=>{$("#select_papel_caja  option[value="+e.papel_size+"]").attr("selected","selected");var a=e.descripcion===o?'<p class="xFondoRowverde"><strong>Asignado</strong></p>':i;t+=`<tr class="row" data-des="${e.descripcion}" data-id="${e.idimpresora}" data-t="impresora">
				<td>${e.descripcion}</td>
				<td>${e.ip}</td>
				<td>${e.num_copias}</td>
				<td>${e.var_size_font}</td>
				<td>${e.var_margen_iz}</td>
				<td>${e.img64}</td>
				<td  data-papel="papel" data-id="${e.idimpresora}">
					<select class="xsel_sec_print_papel" data-id="${e.idimpresora}">'${$("#select_papel_caja")[0].innerHTML}'</select>
				</td>
				<td>${a}</td>
				<td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td>
			</tr>`,$("#select_papel_caja  option[value="+e.papel_size+"]").attr("selected",!1)}),$("#tb_impresora_local .row").remove(),$("#tb_impresora_local").append(t).trigger("create")}function xAsignarPrintLocal(e){e=$(e).parent().parent().attr("data-des");window.localStorage.setItem("::app3_woIpPrintLoC",e),xLoadImpresoraLocal()}function printCopialocalAll(){var e=check_print_copia_local.checked?0:1;$.ajax({type:"POST",url:"../../bdphp/log.php?op=-1051",data:{copia_local:e}})}function xModRow(e,a){var t=$(e).text();0<$(e).find("input").length||$(e).html('<input type="text" class="xMiInput xPasarEnter2 xAlinearIzquierda" onblur="xModBlur(this,'+a+')" value="'+t+'" select>').trigger("create"),$(e).find("input").select()}function xModBlur(e,a){var t=$(e).val(),e=($(e).parents("table"),$(e).parent()),o=$(e).parents(".row").attr("data-id"),e=$(e).parent().attr("data-campo");$.ajax({type:"POST",url:"../../bdphp/log.php?op=2106",data:{campo:e,valor:t,id:o}}).done(function(e){-1!=e.indexOf("Error")&&alert(e)})}function xModRowImpuesto(e){var a=$(e).text();0<$(e).find("input").length||$(e).html('<input type="number" min="0" class="xMiInput" placeholder="porcentaje" pattern="0|[1-9][0-9]*" onblur="xModBlurImpuesto(this)" value="'+a+'" select>').trigger("create"),$(e).find("input").select()}function xModBlurImpuesto(e){var a=$(e).val(),e=($(e).parents("table"),$(e).parent()),e=$(e).parents(".row").attr("data-id");$.ajax({type:"POST",url:"../../bdphp/log.php?op=2107",data:{campo:"porcentaje",valor:a,id:e}}).done(function(e){-1!=e.indexOf("Error")&&alert(e)})}function xModRowCostoAdicional(e,a){var t=$(e).text();0<$(e).find("input").length||$(e).html('<input type="text" class="xMiInput xPasarEnter2 xAlinearIzquierda" onblur="xModBlurCostoAdicional(this)" value="'+t+'" select>').trigger("create"),$(e).find("input").select()}function xModBlurCostoAdicional(e,a){var t=$(e).val(),e=($(e).parents("table"),$(e).parent()),o=$(e).parents(".row").attr("data-id");$(e).parent().attr("data-campo");$.ajax({type:"POST",url:"../../bdphp/log.php?op=2110",data:{importe:t,id:o}}).done(function(e){})}function xBorrarItemPrintLocal(e){xRowObj=e.parentNode.parentNode,xTableRow=$(xRowObj).attr("data-t"),xIdROw=$(xRowObj).attr("data-id"),xBorrarRegistro(xTableRow,xIdROw),$("#form_impresora_local").reset(),xLoadImpresorasConf()}function xTestPrint(e){new Array;var a="",t="",t=0==e?(a=".tr_addPrint"," #select_papel_zona"):(a=".tr_addPrint_local"," #select_papel_caja"),a={Array_enca:e={ip_print:$(a+" #ip").val(),mum_copias:0,pie_pagina:xThisConfig.dt_impr[0].pie_pagina,logo:xThisConfig.dt_impr[0].logo,size_font:$(a+" #var_size_font").val(),margen_iz:$(a+" #var_margen_iz").val(),papel_size:$(a+t).val()}};1===parseInt(xm_log_get("datos_org_sede")[0].sys_local)?(xPopupLoad.xopen(),xSendDataPrintServer(a,3,"prueba"),setTimeout(()=>{xPopupLoad.xclose()},1e3)):$.ajax({type:"POST",url:"../../print/x-test_print.php",data:{Array_enca:e}}).done(function(e){-1!=e.indexOf("Error")&&alert(e)})}function xLoadSecciones(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=409"}).done(function(e){for(var a="",t=$.parseJSON(e).datos,o=0;o<t.length;o++){t[o].idimpresora_otro;imgIcono=""!=t[o].img?t[o].img:o+".png",$("#sel_impr_Sec  option[value="+t[o].idimpresora+"]").attr("selected","selected"),$("#sel_impr_Sec_otro  option[value="+t[o].idimpresora_otro+"]").attr("selected","selected"),a=String(a+'<tr class="row" data-t="seccion" data-id="'+t[o].idseccion+'"><td onclick="openImgIconDialog(this, 0)"> <img class="img-ico-seccion xCursor" src="'+xRutaIconSeccion+imgIcono+'" alt="img-ico">'+t[o].plato+'</td><td><select class="xsel_sec_print" data-id="'+t[o].idseccion+'">'+$("#sel_impr_Sec")[0].innerHTML+'</select></td><td><select class="xsel_sec_print_otro" data-id="'+t[o].idseccion+'">'+$("#sel_impr_Sec_otro")[0].innerHTML+'</select></td><td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td></tr>'),$("#sel_impr_Sec  option[value="+t[o].idimpresora+"]").attr("selected",!1),$("#sel_impr_Sec_otro  option[value="+t[o].idimpresora_otro+"]").attr("selected",!1)}$("#tb_sec_impr .row").remove(),$("#tb_sec_impr").append(a).trigger("create"),xLoadCanalConsumo_impresora(),xLoadSecciones_bodega()})}function xLoadCanalConsumo_impresora(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=40902"}).done(function(e){for(var a=JSON.parse(e).datos,t=(xThisConfig.listCanalConsumo=a,""),o=0;o<a.length;o++)$("#sel_impr_tpc  option[value="+a[o].idimpresora+"]").attr("selected","selected"),t=String(t+'<tr class="row" data-t="seccion" data-id="'+a[o].idseccion+'"><td>'+a[o].descripcion+'</td><td><select class="xsel_tpc_print" data-id="'+a[o].idtipo_consumo+'" option="'+a[o].idimpresora+'">'+sel_impr_tpc.innerHTML+"</select></td></tr>"),$("#sel_impr_tpc  option[value="+a[o].idimpresora+"]").attr("selected",!1);0<a.length&&($("#tb_sec_impr_tpc .row").remove(),$("#tb_sec_impr_tpc").append(t).trigger("create"))})}function xLoadSecciones_bodega(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=40901"}).done(function(e){for(var a,t="",o=$.parseJSON(e).datos,i=0;i<o.length;i++)a=""!=o[i].img?o[i].img:i+".png",$("#sel_impr_Sec_bodega option[selected='selected']").removeAttr("selected"),$("#sel_impr_Sec_bodega  option[value="+o[i].idimpresora+"]").attr("selected","selected"),t=String(t+'<tr class="row" data-t="seccion" data-id="'+o[i].idseccion+'"><td onclick="openImgIconDialog(this, 1)"><img class="img-ico-seccion xCursor" src="'+xRutaIconSeccion+a+'" alt="img-ico">'+o[i].plato+'</td><td><select class="xsel_sec_print_bodega" data-id="'+o[i].idseccion+'" option="'+o[i].idimpresora+'">'+$("#sel_impr_Sec_bodega")[0].innerHTML+"</select></td></tr>");0<o.length&&($("#tb_sec_impr_bodega .row").remove(),$("#tb_sec_impr_bodega").append(t).trigger("create"),$("#div_secciones_bodega").removeClass("xInvisible")),xLoadConfOtrosDoc()})}function xGuardarCambiosSeccionPrint(e,a,t,o=!1){o=o?"40100":1===t?"40101":"4010";$.ajax({type:"POST",url:"../../bdphp/log.php?op="+o,data:{ids:e,idp:a}})}function xGuardarCambiosSeccionPrintPapel(e,a){$.ajax({type:"POST",url:"../../bdphp/log.php?op=40102",data:{id:e,papel:a}})}function xGuardarCambiosTPCPrint(e,a){$.ajax({type:"POST",url:"../../bdphp/log.php?op=40103",data:{id:e,idprint:a}})}function xLoadConfOtrosDoc(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=4011"}).done(function(e){for(var a=$.parseJSON(e).datos,t=0;t<a.length;t++)$("#sel_impr_Sec  option[value="+a[t].idimpresora+"]").attr("selected","selected"),$("#tb_otros_dic .row #row"+a[t].idtipo_otro).html("<select data-id="+a[t].conf_print_otros+' class="xsel_otros_print">'+$("#sel_impr_Sec")[0].innerHTML+"</select>").trigger("create"),$("#sel_impr_Sec  option[value="+a[t].idimpresora+"]").attr("selected",!1);0==a.length&&$("#tb_otros_dic .row").each(function(e,a){$(a).find(".td_sel_ot_print").html('<select data-id class="xsel_otros_print">'+$("#sel_impr_Sec")[0].innerHTML+"</select>").trigger("create")})})}function xGuardarCambiosConfOtrosDoc(e,a,t){$.ajax({type:"POST",url:"../../bdphp/log.php?op=4012",data:{iddoc:e,ids:a,idp:t}}).done(e=>{})}function xloadTPC(){$("#tb_tpc").append('<tr class="row"><td colspan="3"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=406"}).done(function(e){for(var a="",t="",o=$.parseJSON(e).datos,i=0;i<o.length;i++)a=String(a+'<tr class="row" data-id="'+o[i].idtipo_consumo+'" data-t="tipo_consumo"><td>'+o[i].descripcion+'</td><td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td></tr>'),t=String(t+'<option value="'+o[i].idtipo_consumo+'">'+o[i].descripcion+"</option>");$("#tb_tpc .row").remove(),$("#tb_tpc").append(a).trigger("create"),$("#selTPC_adicional").html(t).trigger("create")})}function xGuardarTPC(){xPopupLoad.xopen(),$.post("../../bdphp/ManejoBD_IUD.php?tb=tipo_consumo",$("#frm_tpc").serialize(),function(e){xPopupLoad.xclose(),$("#frm_tpc").reset(),dialog_add_tpc.close(),xloadTPC()})}function xIniDatoPrint(){xLoadConf(),xloadTPC(),$("#ctrl_open_file").change(function(e){for(var a=0;a<e.originalEvent.srcElement.files.length;a++){var t,o=e.originalEvent.srcElement.files[a];$("#td_logo").val(o.name),o&&((t=new FileReader).onload=function(e){$("#imgLogo").attr("src",e.target.result)},t.readAsDataURL(o),xConvertBase64Img())}})}function xLoadConf(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=401"}).done(function(e){var e=$.parseJSON(e),a=""===(e=e.datos)[0].pie_pagina_comprobante?const_pie_pagina_comprobante:e[0].pie_pagina_comprobante;pie_pagina_precuenta=e[0].pie_pagina_precuenta,xIdConf="",xIdConf=e[0].idconf_print,$("#td_ip").val(e[0].ip_print),$("#td_copia").val(e[0].num_copias),$("#td_pie").val(e[0].pie_pagina),$("#td_pie_comprobante").val(a),$("#td_pie_precuenta").val(pie_pagina_precuenta),$("#td_logo").val(e[0].logo),$("#td_margen_iz").val(e[0].var_margen_iz),$("#td_size_font").val(e[0].var_size_font),$("#td_img64").val(e[0].var_size_font),$("#sel_size_font_comanda").val(e[0].var_size_font_tall_comanda).change(),check_isprint_subtotales_comanda.checked="0"!==e[0].isprint_subtotales_comanda.toString(),check_isprint_copy_short.checked="0"!==e[0].isprint_copy_short.toString(),check_isprint_all_short.checked="0"!==e[0].isprint_all_short.toString(),check_isprint_cpe_short.checked="0"!==e[0].isprint_cpe_short.toString(),check_isprint_all_delivery.checked="0"!==e[0].isprint_all_delivery.toString(),xLoadPorcentaje(),xLoadAdicionales()})}function xGuardarCambioPrint(){xPopupLoad.xopen();var e=check_isprint_subtotales_comanda.checked?1:0,a=check_isprint_copy_short.checked?1:0,t=check_isprint_all_short.checked?1:0,o=check_isprint_cpe_short.checked?1:0,i=check_isprint_all_delivery.checked?1:0;$("#frm_conf_print #idconf_print").val(xIdConf),$("#frm_conf_print #ip_print").val($("#td_ip").val()),$("#frm_conf_print #num_copias").val($("#td_copia").val()),$("#frm_conf_print #pie_pagina").val($("#td_pie").val()),$("#frm_conf_print #pie_pagina_comprobante").val($("#td_pie_comprobante").val()),$("#frm_conf_print #pie_pagina_precuenta").val($("#td_pie_precuenta").val()),$("#frm_conf_print #var_margen_iz").val($("#td_margen_iz").val()),$("#frm_conf_print #var_size_font").val($("#td_size_font").val()),$("#frm_conf_print #var_size_font_tall_comanda").val($("#sel_size_font_comanda").val()),$("#frm_conf_print #idsede").val(xThisConfig.xt_idsede),$("#frm_conf_print #idorg").val(xThisConfig.xt_org),$("#frm_conf_print #isprint_subtotales_comanda").val(e),$("#frm_conf_print #isprint_copy_short").val(a),$("#frm_conf_print #isprint_all_short").val(t),$("#frm_conf_print #isprint_cpe_short").val(o),$("#frm_conf_print #isprint_all_delivery").val(i),$.post("../../bdphp/ManejoBD_IUD.php?tb=conf_print",$("#frm_conf_print").serialize(),function(e){xPopupLoad.xclose(),xIdConf=e,xItemGuardarFoto()})}function xPruebaTestPrint(){new Array;var e,a={Array_enca:e={ip_print:$("#td_ip").val(),mum_copias:$("#td_copia").val(),pie_pagina:$("#td_pie").val(),logo:$("#td_logo").val(),size_font:$("#td_size_font").val(),margen_iz:$("#td_margen_iz").val(),margen_iz:$("#td_margen_iz").val(),var_size_font_tall_comanda:$("#sel_size_font_comanda").val()}};1===parseInt(xm_log_get("datos_org_sede")[0].sys_local)?(xPopupLoad.xopen(),xSendDataPrintServer(a,3,"prueba"),setTimeout(()=>{xPopupLoad.xclose()},1e3)):$.ajax({type:"POST",url:"../../print/x-test_print.php",data:{Array_enca:e}}).done(function(e){-1!=e.indexOf("Error")&&alert(e)})}function xSeleccionarFoto(){$("#ctrl_open_file").click()}function xConvertBase64Img(){var e=document.createElement("canvas"),a=document.getElementById("imgLogo");return e.height=a.naturalHeight,e.width=a.naturalWidth,e.getContext("2d").drawImage(a,0,0,e.width,e.height,0,0,e.width,e.height),e.toDataURL()}function xItemGuardarFoto(){$(".xobj_subir_foto").each(function(e,a){""!=$(this).val()&&(file=this.files[0],name=file.name,size=file.size,type=file.type,(xhr=new XMLHttpRequest).upload.addEventListener("load",transferenciaCompleta(name),!1),xhr.open("POST","upload.php?op=2",!0),xhr.setRequestHeader("Cache-Control","no-cache"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("X-File-Name",file.name),xhr.send(file))})}function transferenciaCompleta(a){a=xThisConfig.xt_org+xThisConfig.xt_idsede+a;var e=xConvertBase64Img();$.ajax({type:"POST",url:"../../bdphp/log.php?op=208",data:{i:xIdConf,d:a,logo:e}}).done(function(e){$("#td_logo").val(a),xPopupLoad.xclose()})}function xLoadPorcentaje(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=407",data:{i:xIdConf}}).done(function(e){$("#tb_porcentaje .row").remove();for(var a="",t="",o=$.parseJSON(e).datos,i=0;i<o.length;i++){var r=0===parseInt(o[i].activo)?"checked":"";1===parseInt(o[i].es_impuesto)?a=String(a+'<tr class="row" data-t="conf_print_detalle" data-id="'+o[i].idconf_print_detalle+'"><td><paper-checkbox class="check_porcentaje_impuesto" '+r+"></paper-checkbox></td><td>"+o[i].descripcion+'</td><td style="width: 25%;"><span onclick="xModRowImpuesto(this);">'+o[i].porcentaje+"</span></td></tr>"):t=String(t+'<tr class="row" data-t="conf_print_detalle" data-id="'+o[i].idconf_print_detalle+'"><td>'+o[i].descripcion+"</td><td>"+o[i].porcentaje+'</td><td><div class="xDeleteRow" onClick="xDialogBorrarObj(this)" title="Borrar"></div></td></tr>')}$("#tb_porcentaje tbody").append(a).trigger("create"),$("#tb_porcentaje_no_facturable").append(t).trigger("create")})}function xLoadAdicionales(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=408",data:{i:xIdConf}}).done(function(e){$("#tb_Adicionales .row").remove();var a="",t="";e=(e=$.parseJSON(e)).datos;for(var o=0;o<e.length;o++){var t="",i=0===parseInt(e[o].nivel)?"POR ITEM":"POR PEDIDO";0==e[o].estado&&(t="checked"),a=String(a+'<tr class="row" data-t="conf_print_adicionales" data-id="'+e[o].idconf_print_adicionales+'"><td><paper-checkbox class="check_adicional" '+t+"></paper-checkbox></td><td>"+e[o].descripcion+"</td><td>"+e[o].des_tipo_consumo+"</td><td>"+i+"</td><td>"+e[o].des_seccion+'</td><td><span onclick="xModRowCostoAdicional(this,0);">'+e[o].importe+' <i class="fa fa-pencil text-secondary fw-100 pl-1" title="Modificar"></i></span></td><td><div class="xDeleteRow" onClick="xBorrarItem(this)" title="Borrar"></div></td></tr>')}$("#tb_Adicionales").append(a).trigger("create")})}function xAddPorcentaje(){xcadena="",xvalidateForm("formProcentajeNoFacturable",function(e){!1!==e&&($("#formProcentajeNoFacturable #idconf_print").val(xIdConf),$.post("../../bdphp/ManejoBD_IUD.php?tb=conf_print_detalle",$("#formProcentajeNoFacturable").serialize(),function(e){xcadena=String(xcadena+'<tr class="row" data-t="conf_print_detalle" data-id="'+e+'"><td>'+$("#formProcentajeNoFacturable #descripcion").val()+"</td><td>"+$("#formProcentajeNoFacturable #porcentaje").val()+'</td><td><div class="xDeleteRow" onClick="xDialogBorrarObj(this)" title="Borrar"></div></td></tr>'),$("#tb_porcentaje_no_facturable").append(xcadena).trigger("create"),$("#tb_porcentaje_no_facturable").reset(),$("#tb_porcentaje_no_facturable #descripcion").focus()}))})}function xAddAdicional(){xcadena="",xvalidateForm("formAdicionales",function(e){if(!1!==e){$("#formAdicionales #idconf_print").val(xIdConf),$("#formAdicionales #idtipo_consumo").val($("#selTPC_adicional").val()),$("#formAdicionales #idseccion").val($("#selSeccion_adicional").val()),$("#formAdicionales #nivel").val($("#selNivel_adicional").val());const a=selTPC_adicional[selTPC_adicional.selectedIndex].textContent,t=selSeccion_adicional[selSeccion_adicional.selectedIndex].textContent,o=selNivel_adicional[selNivel_adicional.selectedIndex].textContent;$.post("../../bdphp/ManejoBD_IUD.php?tb=conf_print_adicionales",$("#formAdicionales").serialize(),function(e){xcadena=String(xcadena+'<tr class="row" data-t="conf_print_adicionales" data-id="'+e+'"><td><paper-checkbox class="check_adicional" checked></paper-checkbox></td><td>'+$("#formAdicionales #descripcion").val()+"</td><td>"+a+"</td><td>"+o+"</td><td>"+t+"</td><td>"+$("#formAdicionales #importe").val()+'</td><td><div class="xDeleteRow" onClick="xDialogBorrarObj(this)" title="Borrar"></div></td></tr>'),$("#tb_Adicionales").append(xcadena).trigger("create"),$("#formAdicionales").reset(),$("#formAdicionales #descripcion").focus()})}})}function xIniRegla(){xLoadReglasCarta()}function xAddRegla(){var e=$("#selSeccion").val(),a=$("#selCon").val(),t=$("#selCategoria").val();e==a?alert("Seleccione secciones diferentes"):(xPopupLoad.xopen(),$("#frm_regla #idcategoria").val(t),$("#frm_regla #idseccion").val(e),$("#frm_regla #idseccion_detalle").val(a),$.post("../../bdphp/ManejoBD_IUD.php?tb=regla_carta",$("#frm_regla").serialize(),function(e){xPopupLoad.xclose(),xLoadReglasCarta()}))}function xLoadCategoria(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=1"}).done(function(e){for(var a="",t=$.parseJSON(e).datos,o=0;o<t.length;o++)a=String(a+'<option value="'+t[o].idcategoria+'">'+t[o].descripcion+"</option>");$("#selCategoria").html(a).trigger("create")}),$.ajax({type:"POST",url:"../../bdphp/log.php?op=201"}).done(function(e){var a="",t=$.parseJSON(e).datos;xThisConfig.dt_seccion=t;for(var o=0;o<t.length;o++)a=String(a+'<option value="'+t[o].value+'">'+t[o].label+"</option>");$("#selSeccion").html(a).trigger("create"),$("#selSeccion_adicional").html(a).trigger("create"),$("#selCon").html(a).trigger("create")}),cadenaSelNivel='<option value="0">POR ITEM</option><option value="1">POR PEDIDO</option>',$("#selNivel_adicional").html(cadenaSelNivel).trigger("create")}function xLoadReglasCarta(){$("#tb_regla .row").remove(),$("#tb_regla").append('<tr class="row"><td colspan="3"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=4"}).done(function(e){for(var a="",t=$.parseJSON(e).datos,o=0;o<t.length;o++)a=String(a+'<tr class="row" data-t="regla_carta" data-id="'+t[o].idregla_carta+'"><td>'+t[o].des_categoria+"</td><td>"+t[o].des_seccion+"</td><td>"+t[o].des_con+'</td><td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td></tr>');$("#tb_regla .row").remove(),$("#tb_regla").append(a).trigger("create")})}function xLoadCategoriaCarta(){$("#tb_cat").append('<tr class="row"><td colspan="4"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=405"}).done(function(e){var a="",t=$.parseJSON(e).datos;xThisConfig.dt_cat=t;for(var o=0;o<t.length;o++)a=String(a+'<tr class="row" data-index='+o+' data-id="'+t[o].idcategoria+'" data-t="categoria"><td>'+t[o].descripcion+"</td><td>"+t[o].hora_ini+"</td><td>"+t[o].hora_fin+'</td><td title="Modificar" onClick="xModificarCat(this)"><span class="icon xCursor"><img src="../../images/edit.png"></span></td><td><span class="xDeleteRow" title="Borrar" onclick="xDialogBorrarObj(this);"></span></td></tr>');$("#tb_cat .row").remove(),$("#tb_cat").append(a).trigger("create")})}function xModificarSede(e){e=$(e).parents("tr").attr("data-id");xThisConfig.selectedTabSede=0,xThisConfig.idsede_selected=xThisConfig.dt_sede[e].idsede,$("#frm_sede #idsede").val(xThisConfig.dt_sede[e].idsede),$("#frm_sede #nombre").val(xThisConfig.dt_sede[e].nom_sede),$("#frm_sede #ciudad").val(xThisConfig.dt_sede[e].ciudad),$("#frm_sede #direccion").val(xThisConfig.dt_sede[e].dir_sede),$("#frm_sede #eslogan").val(xThisConfig.dt_sede[e].eslogan),$("#frm_sede #mesas").val(xThisConfig.dt_sede[e].mesas),$("#frm_sede #telefono").val(xThisConfig.dt_sede[e].sedetelefono),$("#frm_sede #ruc_cpe").val(xThisConfig.dt_sede[e].ruc_cpe),$("#frm_sede #razonsocial_cpe").val(xThisConfig.dt_sede[e].razonsocial_cpe),$("#frm_sede #email_cierre").val(xThisConfig.dt_sede[e].email_cierre),dialog_add_sede.open()}function xModificarCat(e){e=$(e).parents("tr").attr("data-index");$("#frm_cat #idcategoria").val(xThisConfig.dt_cat[e].idcategoria),$("#frm_cat #descripcion").val(xThisConfig.dt_cat[e].descripcion),$("#frm_cat #hora_ini").val(xThisConfig.dt_cat[e].hora_ini),$("#frm_cat #hora_fin").val(xThisConfig.dt_cat[e].hora_fin),$("#frm_cat #detalle").val(xThisConfig.dt_cat[e].detalle),check_visible_cliente.checked="0"!==xThisConfig.dt_cat[e].visible_cliente,check_accesible_mozo.checked="0"!==xThisConfig.dt_cat[e].accesible_mozo,$(".dia_disponible").each((e,a)=>{a.checked=!1});const t=xThisConfig.dt_cat[e].dia_disponible;t&&$(".dia_disponible").each((e,a)=>{a.checked=-1<t.indexOf(a.value)}),dialog_add_cat.open()}function xGuardarOrg(){xvalidateFormInput("frm_org",function(e){!1!==e&&(xPopupLoad.xopen(),$.post("../../bdphp/ManejoBD_IUD.php?tb=org",$("#frm_org").serialize(),function(e){xPopupLoad.xclose()}))})}function xGenerarTk(){}function xGuardarSede(){xvalidateFormInput("frm_sede",function(e){!1!==e&&(xPopupLoad.xopen(),$.post("../../bdphp/ManejoBD_IUD.php?tb=sede",$("#frm_sede").serialize(),function(e){dialog_add_sede.close(),xPopupLoad.xclose(),$("#frm_sede").reset(),xLoadOrg()}))})}function xGuardarCategoria(){xvalidateFormInput("frm_cat",function(e){var t,a;!1!==e&&(xPopupLoad.xopen(),t="",$(".dia_disponible").each((e,a)=>{a.checked&&(t+=a.value+",")}),e=check_visible_cliente.checked?1:0,a=check_accesible_mozo.checked?1:0,$("#frm_cat #dia_disponible").val(t),$("#frm_cat #visible_cliente").val(e),$("#frm_cat #accesible_mozo").val(a),$.post("../../bdphp/ManejoBD_IUD.php?tb=categoria",$("#frm_cat").serialize(),function(e){dialog_add_cat.close(),$("#frm_cat").reset(),xPopupLoad.xclose(),xLoadCategoriaCarta()}))})}function xLoadOrg(){$("#tb_org").append('<tr class="row"><td colspan="2"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=404"}).done(function(e){var a="",t=$.parseJSON(e).datos;xThisConfig.dt_sede=t,$("#frm_org #idorg").val(t[0].idorg),$("#frm_org #nombre").val(t[0].nombre),$("#frm_org #direccion").val(t[0].direccion),$("#frm_org #ruc").val(t[0].ruc),$("#frm_org #telefono").val(t[0].telefono),$("#frm_org #email").val(t[0].email);for(var o=0;o<t.length;o++)a=String(a+'<tr class="row xCursor" data-id='+o+'><td onClick="xModificarSede(this)">'+t[o].nom_sede+'</td><td onClick="xModificarSede(this)">'+t[o].ciudad+'</td><td title="Modificar" onClick="xModificarSede(this)"><span class="icon xCursor"><img src="../../images/edit.png"></span></td></tr>');$("#tb_org .row").remove(),$("#tb_org").append(a).trigger("create")})}function openImgIconDialog(e,a){opIcon=a,xidSeccionIcon=e.parentElement.dataset.id,dialog_img_ico_carta.open()}function updateIconSeccion(e){e=e.dataIndex+".png";xPopupLoad.xopen(),$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=8",data:{i:xidSeccionIcon,img:e,opIcon:opIcon}}).done(function(e){(0===opIcon?xLoadSecciones:xLoadSecciones_bodega)(),dialog_img_ico_carta.close(),xPopupLoad.xclose()})}function xloadMetodosPagos(){$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=11"}).done(function(a){a=JSON.parse(a),$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=1102"}).done(function(e){const t=(e=JSON.parse(e)).datos[0].metodo_pago_aceptados.split(",");let o=[];xThisConfig.listMetodoPagos=[],a.datos.map(a=>{a.aceptado=!!t.filter(e=>parseInt(e)===parseInt(a.idtipo_pago))[0],a.aceptado_a=a.aceptado?1:0,o.push(a)}),xThisConfig.listMetodoPagos=o})})}function updateMetodoPagoAceptado(){let t="";$(".checkTP").each((e,a)=>{t+=a.checked?a.dataIdt+",":""}),$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=1101",data:{ids:t}}).done(function(e){})}function checkboxChanged(e){e.target.checked}$(document).on("change",".check_almacen",function(e){var a=$(this).parents("tr").attr("data-id"),t=$(this).attr("data-campo"),o=this.checked?1:0;return $.ajax({type:"POST",url:"../../bdphp/log.php?op=1605",data:{id:a,t:"conf_print_adicionales",campo:t,valor:o}}),event.stopPropagation(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),Polymer({is:"x-configuraciones",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number,dt_sede:Object,dt_cat:Object,dt_impr:Object,listIconSeccion:[],listMetodoPagos:{type:Object,notify:!0},listCanalConsumo:[],showIconsListCPE:Boolean,selectedTabSede:{type:Number,value:0},idsede_selected:{type:Number,value:0}},attached:function(){this.selected_conf=0,this.showIconsListCPE=!1,xThisConfig=this,xIniConf()},detached:function(){}})</script>