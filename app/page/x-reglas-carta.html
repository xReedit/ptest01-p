<dom-module id="x-reglas-carta"><template><br><h3>REGLAS DE LA CARTA</h3><div class="xLinea2"></div><p class="xBold">Especifique las reglas que obedece la carta, como por ejemplo: Cada plato de fondo sale con una entrada.</p><br><label for="selCategoria">Categoria:</label> <select class="xTextRow2"id="selCategoria"inline></select><br><br><label for="selSeccion">Seccion :</label> <select class="xTextRow2"id="selSeccion"inline></select> <label for="selCon">Sale con:</label> <select class="xTextRow2"id="selCon"inline></select><div class="xBoton2 xAzul"onclick="xAddRegla()">Agregar Regla</div><div class="xInvisible"><form id="frm_regla"><input name="idorg"id="idorg"value$="[[xt_org]]"> <input name="idsede"id="idsede"value$="[[xt_idsede]]"> <input name="idcategoria"id="idcategoria"> <input name="idseccion"id="idseccion"> <input name="idseccion_detalle"id="idseccion_detalle"></form></div><br><br><br><table class="xtable2"style="max-width:600px;width:600px"id="tb_regla"><thead><th align="left">Categoria:<th align="left">Seccion:<th align="left">Sale con:<th></thead></table></template></dom-module><script>var xThis;function xIniRegla(){$("#Titulo_page").text("Reglas de la Carta"),$("#Titulo_page").text("Elaborar Carta"),xm_log_get("ini_us"),xThis.xt_org=xIdOrg,xThis.xt_idsede=xIdSede,xThis.xt_idus=xIdUsuario,xLoadCategoria(),xLoadReglasCarta()}function xAddRegla(){var e=$("#selSeccion").val(),a=$("#selCon").val(),t=$("#selCategoria").val();e==a?alert("Seleccione secciones diferentes"):(xPopupLoad.xopen(),$("#frm_regla #idcategoria").val(t),$("#frm_regla #idseccion").val(e),$("#frm_regla #idseccion_detalle").val(a),$.post("../../bdphp/ManejoBD_IUD.php?tb=regla_carta",$("#frm_regla").serialize(),function(e){xPopupLoad.xclose(),xLoadReglasCarta()}))}function xLoadCategoria(){$.ajax({type:"POST",url:"../../bdphp/log.php?op=1"}).done(function(e){for(var a="",t=$.parseJSON(e).datos,r=0;r<t.length;r++)a=String(a+'<option value="'+t[r].idcategoria+'">'+t[r].descripcion+"</option>");$("#selCategoria").html(a).trigger("create")}),$.ajax({type:"POST",url:"../../bdphp/log.php?op=201"}).done(function(e){var a="",t=$.parseJSON(e).datos;xThis.dt_seccion=t;for(var r=0;r<t.length;r++)a=String(a+'<option value="'+t[r].value+'">'+t[r].label+"</option>");$("#selSeccion").html(a).trigger("create"),$("#selCon").html(a).trigger("create")})}function xLoadReglasCarta(){$("#tb_regla .row").remove(),$("#tb_regla").append('<tr class="row"><td colspan="3"><paper-spinner active></paper-spinner></td></tr>'),$.ajax({type:"POST",url:"../../bdphp/log.php?op=4"}).done(function(e){for(var a="",t=$.parseJSON(e).datos,r=0;r<t.length;r++)a=String(a+'<tr class="row" data-t="regla_carta" data-id="'+t[r].idregla_carta+'"><td>'+t[r].des_categoria+"</td><td>"+t[r].des_seccion+"</td><td>"+t[r].des_con+'</td><td><span class="xDeleteRow" title="Borrar" onclick="xBorrarItem(this);"></span></td></tr>');$("#tb_regla .row").remove(),$("#tb_regla").append(a).trigger("create")})}Polymer({is:"x-reglas-carta",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number,dt_seccion:Object},attached:function(){xThis=this,xIniRegla()}})</script>