<dom-module id="x-us-contador"><template><paper-dialog id="dialog_us_conta_asingar"entry-animation="scale-up-animation"exit-animation="fade-out-animation"class="dialog_redondo"style="width:500px"with-backdrop><div class="xContent"><p><strong>Seleccione un contador</strong></p><input class="xMiInput"placeholder="BUSCAR"onkeyup="xbuscarListIUsContadores(this)"><br><table width="100%"id="tb_us_contador"><thead><th align="left"><th align="left"><tbody><template is="dom-repeat"items="{{ListUsContadores}}"as="item"><tr data-id="{{index}}"class="xCursor"onclick="xSelectUsContador(this)"><td class="xfont11">{{item.nombre_cpc}}<td class="xfont11">{{item.ciudad}}</template></table></div></paper-dialog><br><div class="xMiCard xradius"style="width:calc(100% - 10%)"><div class="xEncanezadoCard xFondoRowAmarillo4"><strong>Asingar contadores.</strong> Seleccione un contador con el que trabajara. El Contador podra acceder, descargar y trabajar su informacion contable desde la plataforma web.<br>Si el contador de su preferencia no esta registrado. Contactece con nosotros al correo papaya.restobar@gmail.com, en facebook o instagran.</div><div class="xContent"><br><br><h3>Listado de sedes</h3><br><table width="100%"id="tb_sedes"><thead><th>#<th>Sede<th>Contador Asignado<th><tbody><template is="dom-repeat"items="{{ListSedeUsCpc}}"as="item"><tr data-id="{{index}}"><td>{{displayIndex(index)}}<td><div><p class="xfont13 xBold">{{item.nombre}}<p class="xfont11">{{item.ciudad}} - {{item.direccion}}<p class="xfont11">{{item.telefono}}</div><td><div><p class="xfont13 xBold">{{item.nombre_cpc}}<p class="xfont11">{{item.u_ciudad}} - {{item.u_direccion}}</div><td data-id="{{index}}"><button class="xBoton2 xVerde"hidden$="[[!item.asignado]]"onclick="xUsOpenDialogContadores(this)">Asignar</button> <button class="xBoton2 xAzul"hidden$="[[item.asignado]]"onclick="xUsOpenDialogContadores(this)">Cambiar</button></template></table></div><br><br><br></div></template></dom-module><script>var xThisUsConta,xPopupLoad,dataBusUsContador,idSedeSelect=0;function xIniUsConta(){xLoadListSedeUsCpc(),xLoadLIstUsContadores(),$("body").addClass("loaded")}function xLoadListSedeUsCpc(){$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=404"}).done(function(s){s=$.parseJSON(s);xThisUsConta.ListSedeUsCpc=s.datos.map(s=>(s.asignado=0==parseInt(s.asignado),s))})}function xLoadLIstUsContadores(){$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=405"}).done(function(s){s=$.parseJSON(s);xThisUsConta.ListUsContadores=s.datos,dataBusUsContador=s.datos})}function xbuscarListIUsContadores(s){const o=s.value.toUpperCase();xThisUsConta.ListUsContadores=dataBusUsContador.filter(s=>-1<(s.nombre_cpc+s.ciudad).indexOf(o)).map(s=>s)}function xSelectUsContador(s){s=s.dataId,s=xThisUsConta.ListUsContadores[s].idus_cpc;$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=406",data:{id:s,idsede:idSedeSelect}}).done(function(s){xLoadListSedeUsCpc(),dialog_us_conta_asingar.close()})}function xUsOpenDialogContadores(s){s=s.parentElement.dataId;idSedeSelect=xThisUsConta.ListSedeUsCpc[s].idsede,dialog_us_conta_asingar.open()}Polymer({is:"x-us-contador",properties:{ListSedeUsCpc:[],ListUsContadores:[]},attached:function(){xThisUsConta=this,xIniUsConta()},displayIndex:function(s){return xCeroIzq(s+1,1)}})</script>