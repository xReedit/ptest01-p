<dom-module id="x-colaboradores"><template is="dom"><paper-dialog class="dialog_redondo"id="dialog_new_colaborador"style="width:345px"modal entry-animation="scale-up-animation"exit-animation="fade-out-animation"><div><h4>Colaborador.</h4><br><form id="form_new_colaborador"method="POST"><label for="date_fecha_ingreso"class="xColorRow_Plomo">Fecha de Ingreso:</label> <input type="date"class="xMiInput xPasarEnter2"id="date_fecha_ingreso"espaciar><br><input class="xMiInput xPasarEnter2"placeholder="NOMBRES Y APELLIDOS"onchange="conMayusculas(this)"id="nombres"name="nombres"value$="[[selColaborador.nombres]]"espaciar required> <input type="number"class="xMiInput xPasarEnter2"placeholder="DNI"onchange="conMayusculas(this)"id="dni"name="dni"value$="[[selColaborador.dni]]"espaciar required> <select id="sel_sex"class="xTextRow2 xCursor"espaciar required><option value="M">MASCULINO<option value="F">FEMENINO</select> <input class="xMiInput xPasarEnter2"placeholder="PROFESION"onchange="conMayusculas(this)"id="profesion"name="profesion"value$="[[selColaborador.profesion]]"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="DIRECCION"onchange="conMayusculas(this)"id="direccion"name="direccion"value$="[[selColaborador.direccion]]"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="TELEFONO"onchange="conMayusculas(this)"id="telefono"name="telefono"value$="[[selColaborador.telefono]]"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="CORREO"onchange="conMayusculas(this)"id="correo"name="correo"value$="[[selColaborador.correo]]"espaciar required> <input class="xMiInput xPasarEnter2"placeholder="CUENTA DE ABONO"onchange="conMayusculas(this)"id="cuenta"name="cuenta"value$="[[selColaborador.cuenta]]"espaciar required><br><br><label for="date_fecha_nacimiento"class="xColorRow_Plomo">Fecha de nacimiento:</label> <input type="date"class="xMiInput xPasarEnter2"id="date_fecha_nacimiento"espaciar><div class="xInvisible"><input id="idorg"name="idorg"value$="[[xt_org]]"> <input id="idsede"name="idsede"value$="[[xt_idsede]]"> <input id="idcargo"name="idcolaborador"value$="[[selColaborador.idcolaborador]]"> <input id="f_nac"name="f_nac"> <input id="f_ingreso"name="f_ingreso"></div></form><br><br><button dialog-dismiss onclick="newColaborador()"class="xBoton2 xVerde">Listo Guardar</button> <button dialog-dismiss class="xBoton2 xRojo">Cerrar</button></div></paper-dialog><div><table width="100%"><thead><th align="left">#<th align="left">Nombres<th align="left">DNI<th align="left">Profesion<th align="left">Telefono<th align="left">Laborando<th align="left">Edad<th align="left">Cumplea√±os<th><tbody><template is="dom-repeat"items="{{ListColaboradores}}"as="item"><tr data-t="colaborador"data-id="{{item.idcolaborador}}"class="animated fadeIn fast xCursor"id="{{index}}"onclick="_selRowColaborador(this)"><td data-id="{{index}}"><span>{{displayIndex(index)}}</span><td>{{item.nombres}}<td>{{item.dni}}<td>{{item.profesion}}<td>{{item.telefono}}<td>{{item.tiempo_laborando}}<td>{{item.edad}}<td>{{item.cumple}}<td><span class="xDeleteRow2"title="Anular"onclick="xDialogBorrarObj(this)"></span></template></table><br><button class="xBoton2 xAzul"onclick="addColaborador()">Agregar</button></div></template></dom-module><script>var xThisPColaborador,dateNow;function xIniPColaborador(){var o=xm_log_get("app3_us");xThisPColaborador.xt_org=o.ido,xThisPColaborador.xt_idsede=o.idsede,xThisPColaborador.xt_idus=o.idus,getLoadColaborador(),$(".xPasarEnter2").on("keyup",function(o){o=o.which;if(13==o||186==o){var o=$("input"),a=o.index(document.activeElement);if(null!==o[a+1]){var r=o[a+1];if(void 0===r)return;if(null==(r=r.disabled?o[a+2]:r))return;r.focus(),r.select()}return!1}})}function addColaborador(){xThisPColaborador.selColaborador=[],dialog_new_colaborador.open()}function getLoadColaborador(){$.ajax({type:"GET",url:"../../bdphp/log_005.php?op=501"}).done(o=>{o=JSON.parse(o);xThisPColaborador.ListColaboradores=o.datos.map(o=>(o.tiempo_laborando=xTiempoTrascurridoYYMMDD(o.laborando),o))})}function newColaborador(){$("#form_new_colaborador #idorg").val(xThisPColaborador.xt_org),$("#form_new_colaborador #idsede").val(xThisPColaborador.xt_idsede),$("#form_new_colaborador #f_nac").val(xDevolverFechaFormatInputDate(date_fecha_nacimiento.value)),$("#form_new_colaborador #f_ingreso").val(xDevolverFechaFormatInputDate(date_fecha_ingreso.value)),$.post("../../bdphp/ManejoBD_IUD.php?tb=colaborador",$("#form_new_colaborador").serialize(),function(o){xPopupLoad.xclose(),$("#form_new_colaborador").reset(),xPopupLoad.xclose(),getLoadColaborador(),dialog_new_colaborador.close()})}function _selRowColaborador(o){var a;dialog_borrar.opened||(a=o.id,o.dataId,xThisPColaborador.selColaborador=xThisPColaborador.ListColaboradores[a],date_fecha_ingreso.valueAsNumber=new Date(xSetInputDate(xThisPColaborador.selColaborador.f_ingreso)),date_fecha_nacimiento.valueAsNumber=new Date(xSetInputDate(xThisPColaborador.selColaborador.f_nac)),dialog_new_colaborador.open())}Polymer({is:"x-colaboradores",properties:{xt_org:Number,xt_idsede:Number,ListColaboradores:[],selColaborador:[]},attached:function(){xThisPColaborador=this,xIniPColaborador()},displayIndex:function(o){return xCeroIzq(o+1,1)}})</script>