<dom-module id="x-detalle-pedido"><template><div class="xMenuPopup"id="miPopupMenu"><ul><li>Cobrar<li>Agregar sin imprimir<li onclick="xUniPedido()">Unir pedido<li>Ir Marcando<li>Cambiar de mesa<li>Anular pedido</ul></div><div id="control"><button>AAA</button></div><div class="xLinea2"></div><br><br><div id="xBodyPC"><div class="xPedidoEnCaja"><input class="xcheck_item_pc"type="radio"name="option"value="other"><div class="xencabezado_pc"><paper-icon-button icon="icons:more-vert"class="xDerecha xCursor btn_op_p"></paper-icon-button><p>Referencia: Sra de aaaaaaa eeeeee<p>Fecha: 02/05/16 12:45:10<p>Atendido por: Orlando<p>Tiempo de atencion:</div><div class="xtpc_div"id="tpc_1"><div class="xEncabezadoTpCon noselect"data-col="colapse1"onclick="toggle(this)">CONSUMIR EN EL LOCAL<div class="xEncabezadoTpCon_Cant">6</div><input id="optionOther"class="xcheck_item"type="radio"name="option"value="other"></div><iron-collapse id="colapse1"tabindex="0"class="xcolapse"><div class="content_collapse noselect"><table width="100%"class="xtb_pedido"><tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s11">ENTRADA<tr class="xPedidoItem"id="i112"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">MASAMORRA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr class="xPedidoItem"id="i113"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">ENSALADA RUSA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr class="xPedidoItem"id="i114"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">CAUSA RELLENA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s12">PLATOS DE FONDO<tr class="xPedidoItem"id="i122"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">CARAPULCRA DE CHANCHO Y POLLO Y MOLLEJAS<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">7.00<tr class="xPedidoItem"id="i123"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">GALLINA GUISADA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">10.00<tr class="xPedidoItem"id="i124"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">LOMITO SALTADO<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">7.00</table></div></iron-collapse></div></div><div class="xPedidoEnCaja"><input class="xcheck_item_pc"type="radio"name="option"value="other"><div class="xencabezado_pc"><paper-icon-button icon="icons:more-vert"class="xDerecha xCursor btn_op_p"></paper-icon-button><p>Referencia: Sra de aaaaaaa eeeeee<p>Fecha: 02/05/16 12:45:10<p>Atendido por: Orlando<p>Tiempo de atencion:</div><div class="xtpc_div"id="tpc_1"><div class="xEncabezadoTpCon noselect"data-col="colapse1"onclick="toggle(this)">CONSUMIR EN EL LOCAL<div class="xEncabezadoTpCon_Cant">6</div><input id="optionOther"class="xcheck_item"type="radio"name="option"value="other"></div><iron-collapse id="colapse1"tabindex="0"class="xcolapse"><div class="content_collapse noselect"><table width="100%"class="xtb_pedido"><tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s11">ENTRADA<tr class="xPedidoItem"id="i112"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">MASAMORRA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr class="xPedidoItem"id="i113"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">ENSALADA RUSA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr class="xPedidoItem"id="i114"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">CAUSA RELLENA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s12">PLATOS DE FONDO<tr class="xPedidoItem"id="i122"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">CARAPULCRA DE CHANCHO Y POLLO Y MOLLEJAS<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">7.00<tr class="xPedidoItem"id="i123"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">GALLINA GUISADA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">10.00<tr class="xPedidoItem"id="i124"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">LOMITO SALTADO<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">7.00</table></div></iron-collapse></div></div><div class="xPedidoEnCaja"><input class="xcheck_item_pc"type="radio"name="option"value="other"><div class="xencabezado_pc"><paper-icon-button icon="icons:more-vert"class="xDerecha xCursor btn_op_p"></paper-icon-button><p>Referencia: Sra de aaaaaaa eeeeee<p>Fecha: 02/05/16 12:45:10<p>Atendido por: Orlando<p>Tiempo de atencion:</div><div class="xtpc_div"id="tpc_1"><div class="xEncabezadoTpCon noselect"data-col="colapse1"onclick="toggle(this)">CONSUMIR EN EL LOCAL<div class="xEncabezadoTpCon_Cant">6</div><input id="optionOther"class="xcheck_item"type="radio"name="option"value="other"></div><iron-collapse id="colapse1"tabindex="0"class="xcolapse"><div class="content_collapse noselect"><table width="100%"class="xtb_pedido"><tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s11">ENTRADA<tr class="xPedidoItem"id="i114"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">CAUSA RELLENA<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">0.00<tr><td colspan="3"class="xPedidoTitulo xSinBorde xBold"id="s13">PLATOS A LA CARTA<tr class="xPedidoItem"id="i239"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">BISTEC APANADO<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">15.00<tr class="xPedidoItem"id="i238"><td width="10px"data-columname="cantidad"id="cant_descontar">01<td data-columname="descripcion">LOMITO MONTAO<td width="10px"align="right"class="xtb_pedido_importe"data-columname="ptotal">20.00</table></div></iron-collapse></div></div></div></template></dom-module><script>var xThis,xidm,xidp,xnump,xPedidoSelect,xPedidoUnir1=null,xPedidoUnir2=null;function xIniDetallePedido(){xPopupLoad=document.getElementById("xLoad"),""!=xIdOrg&&null!=xIdOrg||(xIdOrg=window.localStorage.getItem("::app3_wo")),""!=xIdUsuario&&null!=xIdUsuario||(xIdUsuario=window.localStorage.getItem("::app3_woU")),$("#Titulo_page").text("Detalle de Pedido"),xThis.xt_org=xIdOrg,xThis.xt_idsede=xIdSede,xThis.xt_idus=xIdUsuario,xidm=getUrlParameter("m","?"),xidp=getUrlParameter("p","?"),xnump=getUrlParameter("np","?"),$(".btn_op_p").on("click",function(i){$("#miPopupMenu").css({display:"block"}),$("#miPopupMenu").offset({left:i.pageX,top:i.pageY}),$(this).parents(".xPedidoEnCaja").addClass("activo_pc"),i.preventDefault()}),$(document).on("click","body",function(){$("#miPopupMenu").css({display:"none"})}),$(document).on("click",".xPedidoEnCaja",function(i){return xPedidoSelect=$(this),1==$(this).find("input:radio")[0].checked?(event.stopPropagation(),i.stopPropagation(),i.stopImmediatePropagation()):($("#miPopupMenu").css({display:"none"}),$(this).find("input:radio")[0].checked=!0,xVerificarCheckItem(),event.stopPropagation(),i.stopPropagation(),i.stopImmediatePropagation()),!1})}function xVerificarCheckItem(){$(".xPedidoEnCaja .xcheck_item_pc").each(function(i,e){$(e).is(":checked")?$(this).parent().addClass("xPSeleccionado"):$(this).parent().removeClass("xPSeleccionado")})}function xUniPedido(){null==xPedidoUnir1?xPedidoUnir1=$(xPedidoSelect):null==xPedidoUnir2&&(xPedidoUnir2=$(xPedidoSelect))}function xLoadDetallePedido(){xPopupLoad.xopen(),$.ajax({type:"POST",url:"../../bdphp/log.php?op=502",data:{i:xidm}}).done(function(i){i=$.parseJSON(i).datos;xThis.dt_pedido=i,1<xnump||xArmarPedido(i)})}function xArmarPedido(i){var e,d="",o=new Array,t=new Array,a="",n=i;$("#xBodyPC div").remove();for(var c=0;c<n.length;c++)null==o[n[c].idtipo_consumo]&&(o[n[c].idtipo_consumo]={id:n[c].idtipo_consumo,des:n[c].des_tp});var s;for(b in o){for(var p,r,d="",t=new Array,l=0,x=0;x<n.length;x++)s="s"+n[x].idtipo_consumo+n[x].idseccion,o[b].id==n[x].idtipo_consumo&&(p=n[x].des_seccion,null==t[n[x].idseccion]&&(t[n[x].idseccion]='<tr><td colspan="3" class="xPedidoTitulo xSinBorde xBold" id="'+s+'">'+p+"</td></tr>"),s="i"+n[x].idtipo_consumo+n[x].idseccion+n[x].iditem,p=String('<tr class="xPedidoItem" id="'+s+'"><td width="10px" data-ColumName="cantidad" id="cant_descontar">'+xCeroIzq(n[x].cantidad,2)+'</td><td data-ColumName="descripcion">'+n[x].descripcion+'</td><td width="10px" align="right" class="xtb_pedido_importe" data-ColumName="ptotal">'+n[x].ptotal+"</td></tr>"),l++,t[n[x].idseccion]=t[n[x].idseccion]+p);for(c in e="colapse"+o[b].id,r='<div class="xtpc_div" id="tpc_'+o[b].id+'"><div class="xEncabezadoTpCon noselect" data-col="'+e+'" onclick="toggle(this);">'+o[b].des+'<div class="xEncabezadoTpCon_Cant">'+l+'</div><input id="optionOther"  class="xcheck_item" type="radio" name="option" value="other"></div>',t)d=String(d+t[c]);d=String('<iron-collapse id="'+e+'" tabindex="0" class="xcolapse"><div class="content_collapse noselect"><table width="100%" class="xtb_pedido">'+d+"</table></div></iron-collapse></div>"),a='<div class="xPedidoEnCaja activo">'+(a=String(a+r+d))+"</div>"}$("#xBodyPC").html(a).trigger("create"),xPopupLoad.xclose()}Polymer({is:"x-detalle-pedido",properties:{xt_org:Number,xt_idsede:Number,xt_idus:Number,dt_pedido:Object},attached:function(){xThis=this,xIniDetallePedido()}})</script>