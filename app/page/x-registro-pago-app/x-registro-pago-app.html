<dom-module id="x-registro-pago-app"><template is="dom"><br><div class="xMiCard xradius"style="width:85%"><div class="xEncanezadoCard xFondoRowAmarillo2"><div class="d-flexx justify-content-between align-items-center"><h3>Registro de pagos desde la aplicaci√≥n</h3><p class="xfont18"><strong>Total:</strong> S/. {{sumList}}</div><div class="xLinea2"></div><br><div><div class="d-flexx"><div><p>Desde</p><input type="date"placeholder="Desde"onchange="showData()"class="xMiInput"style="width:200px"id="txt_fecha_de"></div><div><p>Hasta</p><input type="date"placeholder="Hasta"onchange="showData()"class="xMiInput"style="width:200px"id="txt_fecha_a"></div></div></div></div><div class="xContentCard"style="padding:20px"><div class="w-100"><div style="width:100%;margin:0 auto"><table width="100%"class="xtable2"><thead><th align="left"width="10px">#<th align="left">Pedido<th align="left">Hora<th align="left">Canal<th align="left"width="50%">Detalle<th align="right">Estado<th align="right">Importe<th align="right">Abonado<tbody><template is="dom-repeat"items="{{listPagosApp}}"as="item"><tr class$="{{item.classTr}}"><td data-id="{{index}}"><span>{{displayIndex(index)}}</span><td>{{item.idpedido}}<td>{{item.fecha}}<td><div><p>{{item.canal}} {{ item.des_mesa }}</div><td><div><p>{{item.nomcliente}}<p>Tarjeta: {{item.data_transaction.brand}}</div><td><div>{{item.data_transaction.descripcion}}</div><td align="right">{{item.importe}}<td><div hidden$="[[!item.ispagado]]"><i class="text-success fa fa-circle"></i> <span>{{ item.check_pago_fecha }}</span></div><div hidden$="[[item.ispagado]]"><i class="fa fa-circle text-secondary"></i></div></template></table></div></div></div></div><br><br></template></dom-module><script>var xThisPagosApp;function xIniPagosApp(){xLoadRegistroPagoApp()}function xLoadRegistroPagoApp(){var a=(new Date).toISOString().slice(0,10);txt_fecha_de.value=a,txt_fecha_a.value=a,showData()}function showData(){var a=xDevolverFechaFormatInputDate(txt_fecha_de.value),o=xDevolverFechaFormatInputDate(txt_fecha_a.value);$.ajax({type:"POST",url:"../../bdphp/log_005.php?op=110",data:{f_de:a,f_a:o}}).done(a=>{var a=JSON.parse(a),o=(console.log(a.datos),0);xThisPagosApp.listPagosApp=a.datos.map(a=>(a.data_transaction=JSON.parse(a.data_transaction),a.des_mesa="0"===a.nummesa.toString()?"":" Mesa "+a.nummesa,a.data_transaction.error||(o+=parseFloat(a.importe)),a.importe=parseFloat(a.importe).toFixed(2),a.nomcliente=a.cliente,a.ispagado="0"!==a.check_pagado.toString(),a.classTr=a.data_transaction.error?"xColorRow_Rojo":"",a)),console.log("xThisPagosApp.listPagosApp",xThisPagosApp.listPagosApp),xThisPagosApp.sumList=numeroConComas(o.toFixed(2))})}Polymer({is:"x-registro-pago-app",properties:{xt_org:Number,xt_idsede:Number,sumList:String,listPagosApp:Object},attached:function(){xThisPagosApp=this,xIniPagosApp()},displayIndex:function(a){return xCeroIzq(a+1,1)}})</script>