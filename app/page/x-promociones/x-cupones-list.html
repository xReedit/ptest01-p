<dom-module id="x-cupones-list"><link rel="import"href="./x-cupones-detalle.html"><script src="../../view/httpFech.js"></script><template><style></style><div hidden$="[[!showCuponDetalle]]"class="animate__animated animate__fadeIn"><x-cupones-detalle on-close="showDetalle"id="compCuponDetalle"></x-cupones-detalle></div><div hidden$="[[showCuponDetalle]]"class="animate__animated animate__fadeIn"><br><div class="xMiCard xradius"style="width:94%;max-width:1300px"><div class="xEncanezadoCard"style="background:#fff0f5;color:#424242"><div class="d-flexx justify-content-between align-items-center"><p class="fs-18">Cupones de descuento</div></div><div class="xContentCard"style="padding:20px"><div class="d-flexx justify-content-between align-items-center"><p class="fw-600 fs-18">Lista</p><button class="btn btn-sm btn-success"on-click="newCupon">+ Crear Cupon</button></div><br><table class="w-100"><thead><th>Activo<th width="25%">Titulo<th>Creacion<th>Vigencia<th>Lanzamiento<th align="center">Emitidos<th align="center">Canjeados<th aling="right"><tbody><template is="dom-repeat"items="{{listCupones}}"><tr><td><paper-toggle-button checked$="[[item.check_activo]]"on-change="activarCupon"></paper-toggle-button><td><p>{{item.titulo}}<p class="text-secondary fs-10">{{item.descripcion}}<td><p>{{item.usuario}}<p class="text-secondary fs-10">{{item.fecha_creacion}}<td><p><span class="fw-600">Desde:</span> {{item.fecha_inicio}}<p><span class="fw-600">Hasta :</span> {{item.fecha_termina}}<td><p class="fw-600">{{item.fecha_inicio_emitir}}<td align="center">{{item.cantidad_emitido}}<td align="center">{{item.cantidad_activado}}<td aling="right"><div><button class="btn btn-sm btn-info"data-id="{{item.idcupon}}"on-click="modificarCupon">Modificar</button></div></template></table></div></div></div></template><script>Polymer({is:"x-cupones-list",properties:{listCupones:{type:Object,value:function(){return{}}},showCuponDetalle:{type:Boolean,value:!1}},ready:function(){this.showCuponDetalle=!1,this.loadDataCupones()},loadDataCupones:async function(){var t=await(new httpFecht).axiosExecuteJSON({url:"../../bdphp/log_009.php?op=6001",method:"GET"});this.listCupones=t.datos.map(t=>(t.check_activo="0"==t.activo,t))},showDetalle:function(){this.showCuponDetalle=!this.showCuponDetalle,this.showCuponDetalle||this.loadDataCupones()},newCupon:function(){this.$.compCuponDetalle.nuevoCupon(),this.showCuponDetalle=!this.showCuponDetalle},modificarCupon:function(t){t=t.target.dataId;this.$.compCuponDetalle.cuponModificar(t),this.showCuponDetalle=!this.showCuponDetalle},activarCupon:async function(t){var o=t.model.item.idcupon,t=t.target.checked?0:1;await(new httpFecht).axiosExecuteJSON({url:"../../bdphp/log_009.php?op=6003",method:"POST",data:{idcupon:o,activo:t}})}})</script></dom-module>