<dom-module id="x-admin-change-sys"><template><paper-dialog id="dialog_img_change_sys"entry-animation="scale-up-animation"exit-animation="fade-out-animation"class="dialog_redondo"with-backdrop><div class="p-3"><img id="img_gif_sys"style="width:100%"src=""alt=""><br><hr><button class="xBoton2 xPlomo"dialog-dismiss>Cerrar</button></div></paper-dialog><paper-dialog id="dialog_add_change_sys"style="max-width:420px"entry-animation="scale-up-animation"exit-animation="fade-out-animation"class="dialog_redondo"with-backdrop><div class="xContent"><h3>Actualizacion</h3><hr><br><div><input class="xMiInput xPasarEnter2"value$="{{usuarioReparidor.nombre}}"placeholder="TITULO"id="titulo_gif"name="titulo"espaciar required> <input class="xMiInput xPasarEnter2"value$="{{usuarioReparidor.nombre}}"placeholder="DESCRIPCION"id="descripcion_gif"name="descripcion"espaciar required><br><label for="txt_logo">Imagen Gif</label> <input type="file"name=""id="txt_img_gif"class="selected-template-1 w-100 inputImg"placeholder="Img Gif"><br><hr><button class="xBoton2 xVerde"onclick="addActualizacionSys()">Si, enviar</button> <button class="xBoton2 xPlomo"dialog-dismiss>Cancelar</button></div></div></paper-dialog><div class="x_div_linea"><h3>Registro de cambios, actualizacion del sistema</h3><button class="xBoton2 xAzul xDerecha"onclick="dialog_add_change_sys.open()">+ Nuevo</button></div><hr><div><table width="100%"><thead><th>#<th>Fecha<th>Descripcion<th>Gif<tbody><template is="dom-repeat"items="{{listChangesSys}}"as="item"><tr data-id="{{index}}"><td>{{displayIndex(index)}}<td>{{ item.fecha }}<td><p class="fw-600">{{ item.titulo }}<p class="text-secondary">{{ item.descripcion }}<td><span class="xCursor text-info fw-600"data-id="{{index}}"onclick="verImgGifSys(this)">{{ item.imagen }}</span></template></table></div></template><script>var xThisChangeSys;function xLoadInitChgangeSys(){$.ajax({url:"../../bdphp/log_004.php?op=10"}).done(e=>{e=JSON.parse(e);xThisChangeSys.listChangesSys=e.datos.map(e=>({...e}))})}function addActualizacionSys(){xItemGuardarFotoGifUpdate()}function xItemGuardarFotoGifUpdate(){$(".inputImg").each(function(e,a){""!=$(this).val()&&(file=this.files[0],name=file.name,size=file.size,type=file.type,(xhr=new XMLHttpRequest).upload.addEventListener("load",transferenciaCompleta(name),!1),xhr.open("POST","upload.php?op=5",!0),xhr.setRequestHeader("Cache-Control","no-cache"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("X-File-Name",file.name),xhr.send(file))})}function transferenciaCompleta(e){e="11"+e;e={titulo:titulo_gif.value,descripcion:descripcion_gif.value,imagen:e};$.ajax({type:"POST",url:"../../bdphp/log_004.php?op=1001",data:{item:e}}).done(function(e){console.log(e),dialog_add_change_sys.close(),xLoadInitChgangeSys()})}function verImgGifSys(e){xPopupLoad.xopen();e=e.dataId;img_gif_sys.src=URL_IMG_GIF_UPDATE+xThisChangeSys.listChangesSys[e].imagen,setTimeout(()=>{xPopupLoad.xclose(),dialog_img_change_sys.open()},1e3)}Polymer({is:"x-admin-change-sys",properties:{listChangesSys:[]},attached:function(){(xThisChangeSys=this).listChangesSys=[],xLoadInitChgangeSys()},displayIndex:function(e){return xCeroIzq(e+1,1)}})</script></dom-module>