function CpeInterno_RegistrarNC(e){var a={};a.json_xml=e.jsonxml,a.pdf=""!=e.links.pdf?1:0,a.cdr=""!=e.links.cdr?1:0,a.xml=""!=e.links.xml?1:0,a.motivo=e.jsonxml.motivo_o_sustento_de_nota,a.msj=e.response.description,a.numero=e.data.number,a.external_id=e.data.external_id,a.idce=e.idce,CpeInterno_SaveBD_NC(a)}function CpeInterno_Registrar(e){var a,n;e.success&&((a={}).jsonxml=e.data.jsonxml,a.pdf=""!=e.links.pdf?1:0,a.cdr=""!=e.links.cdr?1:0,a.xml=""!=e.links.xml?1:0,a.nomcliente=e.data.nomcliente,a.idcliente=""===e.data.idcliente?0:e.data.idcliente,a.total=e.data.total,a.totales_json=e.data.totales_json,a.numero=xCeroIzqNumberComprobante(e.data.number),a.external_id=e.data.external_id,a.hash=e.data.hash,a.idregistro_pago=e.data.idregistro_pago,a.viene_facturador=e.data.viene_facturador,a.idtipo_comprobante_serie=e.data.idtipo_comprobante_serie,a.estado_api=0,a.estado_sunat=1,a.msj="Registrado",a.msj_error="",0!=e.response.length&&(n=e.response.error_soap&&-1<a.numero.indexOf("F")?1:e.response.code||0,a.estado_sunat=n,a.msj=e.response.description),CpeInterno_SaveBD(a))}function xCeroIzqNumberComprobante(e){var e=e.split("-"),a=xCeroIzq(e[1],7);return e[0]+"-"+a}async function CpeInterno_Error(e,a,n,t){var o={};return(o=e).estado_api=1,o.estado_sunat=1,o.msj="Sin registrar",o.error_api=1,0!=a&&(o.idregistro_pago=a),CpeInterno_SaveBD(o)}function CpeInterno_ErrorValidacionSunat(e,a){0!=e&&(a.idregistro_pago=e),CpeInterno_SaveBD(a)}async function CpeInterno_SaveBD(e){let a="";return await $.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"1",data:e}}).done(function(e){a=JSON.parse(e).datos[0]}),a}async function CpeInterno_SaveBD_NC(e){let a="";return await $.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"10",data:e}}).done(function(e){a=JSON.parse(e).datos[0]}),a}function CpeInterno_UpdateRegistro(e){$.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"2",data:e}}).done(function(e){})}function CpeInterno_SaveResumenDiario(e){$.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"202",data:e}}).done(function(e){})}async function CpeInterno_UpdateAnulacion(e){let a=!1;return await $.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"8",data:e}}).done(function(e){a=!0}),a}function CpeInterno_UpdateAnulacionFactura(e){$.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"8",data:e}}).done(function(e){})}function CpeInterno_UpdateResumenDiario(e){$.ajax({type:"POST",url:"../../bdphp/log_002.php",data:{op:"203",data:e}}).done(function(e){console.log(e)})}