var xIdOrg,xIdSede,xNomU,xPopupLoad,myWindowAppCarta,xRouterTime_cp=!1,componentsLoad=!1,isOnlineDeliveryApp=!1;function xIniControlPedido(){xVerificarSession(),xPopupLoad=document.getElementById("xLoad"),xm_log_get("ini_us");var e=xm_log_get("sede_generales");$("#en_nom_sede").text(e[0].des_sede),$("#en_nom_ciudad").text(e[0].ciudad),$("#en_nom_us").text(xNomUsario),xm_LogChequea(function(){xLoadTipoConsumoX(),setValueStorageOnlineDelivery(),loadCuponesActivos()})}function xOpenPage(e,a){if(!xRouterTime_cp){xRouterTime_cp=!0,setTimeout(()=>{xRouterTime_cp=!1},1e3),null==a&&(a="");var i="";switch($("#div_filtro_header").addClass("xInvisible"),e){case-1:i="/prueba";break;case 0:i="/categoria";break;case 1:i="/menu";break;case 2:i="/c_pedido",$("#div_filtro_header").removeClass("xInvisible");break;case 3:i="/caja";break;case 4:return void(document.location.href="m_panel.html#/home");case 5:if(h=window.screen.availHeight-100,1===parseInt(xm_log_get("datos_org_sede")[0].pwa))return void(myWindowAppCarta=myWindowAppCarta||window.open("https://express.papaya.com.pe","carta","width=400,height="+h)).focus();window.localStorage.removeItem("::app3_sys_first_load");window.open("m_menu.html","Carta","width=400,height="+h);return;case 6:i="/pedido_detalle";break;case 7:i="/monitor_pedidos";break;case 8:i="/historial_ventas";break;case 9:i="/historial_registro_pago_app";break;case 22:i="/resumen_caja";break;case 10:i="/indicadores";break;case 11:i="/control-delivery";break;case 12:i="/pedidos-anulados";break;case 60:i="/mensajeria"}i+=a,router.go(i)}}function xLoadTipoConsumoX(){$("#div_filtro_header").removeClass("xInvisible");for(var e,a=xm_log_get("estructura_pedido"),i="",t="",o=0;o<a.length;o++)null!=a[o]&&(t=a[o].titulo,e=a[o].idtipo_consumo,""==t&&(t=a[o].descripcion),0==o&&xOpenPage(2,"?f1="+e+"?df1="+t),i+=String('<li onclick="xFiltroPedidos(this);" class="li_row m_pedidos" data-id="'+e+'" id="DesTPC'+e+'"><div><span class="titulo">'+t+"</span></div></li>"));$("#list_menu_lateral .li_row").remove(),$("#list_menu_lateral li:first-child").after(i).trigger("create")}function setValueStorageOnlineDelivery(){var e=window.localStorage.getItem("::app3_sys_vr_online_delivery")?window.localStorage.getItem("::app3_sys_vr_online_delivery"):0;isOnlineDeliveryApp=0!==parseInt(e),toogleOnline.checked=isOnlineDeliveryApp}function xActivarDeliveryApp(e){xSetActivarDeliveryOnline(isOnlineDeliveryApp=!isOnlineDeliveryApp)}function xSetActivarDeliveryOnline(e){e=e?1:0;window.localStorage.setItem("::app3_sys_vr_online_delivery",e),$.ajax({type:"POST",url:"../../bdphp/log_005.php?op=12",data:{val:e}}).done(function(e){})}async function xCambiarMetaDiariaCP(){var e;"1"===xm_log_get("app3_us").rol.toString()&&((e=paramsSwalAlert).title='<p class="fw-600 fs-20">Meta de Venta Diara</p><p class="fw-600 fs-13 text-warning">Especifique el importe de venta, que ser√° la meta diaria.</p>',e.html='<div class="p-3" style="display: inline-flex; border-radius:5px"><input type="number" placeholder="Meta Diaria" class="xMiInput text-center text-white fs-20 w-100" id="txt_meta_diaria_ventas_cm"></div>',e.confirmButtonText="Listo, guardar",e.showCancelButton=!0,await showAlertSwalHtmlDecision(e,1).then(async e=>{e.isConfirmed&&(e={idsede:0,meta:txt_meta_diaria_ventas_cm.value,new:0},$.ajax({type:"POST",url:"../../bdphp/log_005.php?op=1605",data:e}))}))}showBusqyedaMesaOder=!1,"registerElement"in document&&0 in document.createElement("link"),window.addEventListener("WebComponentsReady",function(e){this.componentsLoad=!0,xIniControlPedido()}),window.onload=()=>{setTimeout(()=>{this.componentsLoad||xIniControlPedido()},4e3)};