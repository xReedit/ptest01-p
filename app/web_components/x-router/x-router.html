<script src="../webcomponentsjs/webcomponents-lite.js"></script>
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../app-router/app-router.html">

<dom-module is='x-router'>
	<!--mode="auto|pushstate|hash"-->
	
	<template>
		<app-router mode="auto|hash" trailingSlash="ignore">
			<app-route path="/home" import="x-home.html"></app-route>
			<app-route path="/elaborar_carta" import="x-carta.html"></app-route>
			<app-route path="/menu" import="x-app-menu/x-menu.html"></app-route>
			<app-route path="/sub_menu" import="x-app-menu/x-submenu.html"></app-route>
			<app-route path="/categoria" import="x-app-menu/x-categoria.html"></app-route>
			<app-route path="/mipedido" import="x-app-menu/x-mipedido.html"></app-route>
			<app-route path="/buscar_item_menu" import="x-app-menu/x-buscar.submenu.html"></app-route>
			<!--app-route path="/reglas" import="x-reglas-carta.html"></app-route-->
			<!--app-route path="/datos_print" import="x-datos-print.html"></app-route-->
			<app-route path="/usuarios" import="x-usuarios.html"></app-route>
			<app-route path="/configuraciones" import="x-configuraciones/x-configuraciones.html"></app-route>
			<app-route path="/caja" import="x-caja/x-caja.html"></app-route>
			<app-route path="/c_pedido" import="x-control-mesas.html"></app-route>
			<app-route path="/detalle_pedido" import="x-detalle-pedido.html"></app-route>
			<app-route path="/pedido_detalle" import="x-pedido-detalle.html"></app-route>
			<app-route path="/compras" import="x-compras.html"></app-route>
			<app-route path="/distribuicion" import="x-distribuicion.html"></app-route>
			<app-route path="/porcionar" import="x-porcionar.html"></app-route>
			<app-route path="/recetas" import="x-recetas.html"></app-route>
			<app-route path="/venta_rapida" import="x-venta-rapida.html" onUrlChange="updateModel"></app-route>
			<app-route path="/producto_porcion" import="x-producto-porcion.html"></app-route>
			<app-route path="/ie_almacen" import="x-ie-almacen.html"></app-route>
			<app-route path="/monitor_pedidos" import="x-monitor-pedidos.html"></app-route>
			<app-route path="/inventario" import="x-inventario.html"></app-route>
			<app-route path="/historial_ventas" import="x-historial_venta.html"></app-route>
			<app-route path="/resumen_caja" import="x-resumen-cierre-caja.html"></app-route>
			<app-route path="/zona_despacho" import="x-zona_despacho.html"></app-route>
			<app-route path="/items_borrados" import="x-recuperar-stock.html"></app-route>
			<app-route path="/facturador" import="x-facturador/x-facturador.html"></app-route>
			<app-route path="/c_electronico" import="x-facturador/x-cpe-emitidos.html"></app-route>
			<app-route path="/adm_dashboard" import="x-admin/x-admin.html"></app-route>
			<app-route path="/adm_dashboard-new" import="x-admin/x-admin-new-org.html"></app-route>
			<app-route path="/us_contador" import="x-us-contador/x-us-contador.html"></app-route>
			<app-route path="/gastos_fijos" import="x-gastos-fijos/x-gastos-fijos.html"></app-route>
			<app-route path="/gastos_variables" import="x-gastos-variables/x-gastos-variables.html"></app-route>
			<app-route path="/otros_ingresos" import="x-ingresos-otros/x-ingresos-otros.html"></app-route>
			<app-route path="/cuentas_p_c" import="x-cuentas-por-cobrar-pagar/x-cuentas-por-cobrar-pagar.html"></app-route>
			<app-route path="/clientes" import="x-clientes/x-clientes.html"></app-route>
			<app-route path="/recursos_humanos" import="x-rrhh/x-rrhh.html"></app-route>
			<app-route path="/recursos_humanos_file" import="x-rrhh/x-planilla-colaborador-file.html"></app-route>
			<app-route path="/prueba" import="x-pruebas.html"></app-route>
		</app-router>
	</template>
</dom-module>
<script>
var router;
function xIniRouter(){
	if(router==undefined){router = document.querySelector('app-router');}
	router.addEventListener('state-change', function(xevent) {
	$.ajax({ type: 'POST', url: '../../bdphp/log.php?op=-108',data:{p:window.location.hash},async: false})
	.done( function (a) {
		if(a==1){
			xevent.preventDefault()
		}
	});

	xevent.stopImmediatePropagation();
	})
}

Polymer({
	is:'x-router',
	_go: function(a) {
		console.log(a);
		router.go(a);
	},
	attached:function(){
    	xIniRouter();
	},
	ready: () => {
		xIniRouter();
	}
})
</script>
