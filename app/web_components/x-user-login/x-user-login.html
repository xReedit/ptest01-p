<link rel="import"href="../x-dialog/x-dialog.html"><link rel="import"href="../paper-input/paper-input.html"><link rel="import"href="../paper-button/paper-button.html"><link rel="import"href="../paper-dialog/paper-dialog.html"><link rel="import"href="../iron-icons/iron-icons.html"><link rel="import"href="../paper-spinner/paper-spinner.html"><dom-module id="x-user-login"><link rel="import"href="../paper-progress/paper-progress.html"><template><paper-dialog id="dialogMSj"entry-animation="scale-up-animation"exit-animation="fade-out-animation"with-backdrop><h2>{{xDialogTitulo}}</h2><p>{{xDialogDetalle}}</p></paper-dialog><div class="xContentLogin xSombraDiv xCentradoVerticalHorizontal xTransicion3s"><div class="xrunalogo size1 xCentradoVertical"><span class="xIndicadorVr xDerecha"style="margin-right:-25px">2o</span></div><div class="xOlvideClaveUser xTransicion3s xInvisible"id="div1"><div class="xCentrado"><h2 class="xTituloUser">Se te olvido tu clave</h2><p>Puedes restablecerla</div><br><paper-input label="Correo de registro"type="email"required auto-validate id="correo"></paper-input><br><paper-button tabindex="0"raised class="colorful"onclick='xEnviar("div1")';>Enviar</paper-button><br><br><div><a href="#"onclick="xPasarA(2,this)"class="Btn_div2">Logguearse</a></div><br><br><br></div><div class="xLoginUser xTransicion3s"id="div2"><div class="xCentrado"><h2 class="xTituloUser">{{xtitulo}}</h2><p>Logueese<div hidden$="[[!xisNotificaPagar]]"class="animate__animated animate__shakeX"><hr><h3 style="color:#cc3737;font-weight:600">Recuerde pagar el servivcio.</h3><p style="color:#cc3737">{{xMsjNotifica}}</div></div><br><paper-input label="Usuario"auto-validate id="usuarioIngresar"error-message="Ingrese su usuario"></paper-input><paper-input label="Clave"type="password"required auto-validate id="passIngresar"error-message="Ingrese su clave"></paper-input><br><br><div style="display:flex;align-items:center;justify-content:center"><paper-button hidden$="[[xIsLoading]]"disabled$="[[xIsLoading]]"tabindex="0"raised class="colorful"onclick='xEnviar("div2")'disabled="[[xIsLoading]]";>Ingresar</paper-button></div><br><div style="text-align:left;width:100%"><p hidden$="[[!xErrorCredenciales]]"class="animate__animated animate__shakeX"style="color:#d32f2f;margin:0;padding:0">Credenciales incorrectas, usuario o clave incorrecto<div hidden$="[[!xIsLoading]]"class="text-center animate__animated animate__fadeIn"><p>Conectando...</p><paper-progress indeterminate class="w-100"></paper-progress></div></div><br></div><div class="xRegistrarUser xInvisible xTransicion3s"id="div3"><div class="xCentrado"><h2 class="xTituloUser">Registro</h2><p>Comienza a utilizar nuestros servicios ahora!.</div><br><paper-input label="Usuario  Ej: jperez"required auto-validate id="usuario"></paper-input><paper-input label="Correo"type="email"required auto-validate id="correo"></paper-input><paper-input label="Clave"type="password"required auto-validate id="pass"></paper-input><paper-input label="Repita su clave"type="password"required auto-validate id="pass2"></paper-input><br><br><paper-button tabindex="0"raised class="colorful"onclick='xEnviar("div3")';>Listo</paper-button><br><br><div><a href="#"onclick="xPasarA(2,this)"class="Btn_div2">Ya soy usuario</a></div></div></div><style type="text/css">paper-button[raised].colorful{background:#ff4081;color:#fff}paper-button.colorful{color:#ff4081;width:100%;margin:0;font-size:18px}.xContentLogin{width:260px;background:#fafafa;padding:25px;padding-top:90px;border-radius:4px;overflow:hidden;height:auto}.xBorderContentLogin{border:1px solid #bdbdbd}.aIzq{float:right}.xInvisible{visibility:hidden}.xVisible{opacity:1}.xTransicion3s{-webkit-transition:all .3s ease;-o-transition:all .3s ease;-ms-transition:all .3s ease;-moz-transition:all .3s ease;transition:all .3s ease}.xTituloUser{font-weight:500}a{color:#2979ff;font-weight:600;text-decoration:none}a:hover{color:#f0c}</style></template></dom-module><script>var xThis,xRpts;function xPasarA(i,a){var e;switch(xThis.xop=i){case 1:e="#div1",xAlto="290px";break;case 2:e="#div2",xAlto="auto";break;case 3:e="#div3",xAlto="472px"}$(a).parent().parent().fadeOut(900,function(){$(e).removeClass("xInvisible"),$(".xContentLogin").css("height",xAlto),$(e).fadeIn(500)})}function xvalidateFormLogin(i,a){var i=$("#"+i),e=!0;i.find("paper-input").each(function(i,a){a.validate()||(e=!1)}),a(e)}function xEnviar(i){xRpts=new Array;var e,s="",o="",r="";xThis.xErrorCredenciales=!1,xvalidateFormLogin(i,function(i){var a;if(!1===i)2===xThis.xop&&(i=$("#div2 #usuarioIngresar").val(),a=$("#div2 #passIngresar").val(),i||($("#div2 #usuarioIngresar")[0].invalid=!0),a||($("#div2 #passIngresar")[0].invalid=!0));else{switch(xThis.xIsLoading=!0,xThis.xop){case 1:r=$("#div1 #correo").val();break;case 2:s=$("#div2 #usuarioIngresar").val(),o=$("#div2 #passIngresar").val();break;case 3:if(r=$("#div3 #correo").val(),s=$("#div3 #usuario").val(),o=$("#div3 #pass").val(),e=$("#div3 #pass2").val(),o!=e)return $("#div3 #pass2").val(""),void(xThis.xIsLoading=!1)}xRpts.push({us:s,p:o,co:r}),setTimeout(()=>{xThis.fire("xSend",{xRpts:xRpts})},1e3)}})}Polymer({is:"x-user-login",properties:{xdiv_visibles:{type:Array,value:[1,1,1]},xDialogTitulo:{type:String,value:"Incorrecto"},xDialogDetalle:{type:String,value:"Usuario o clave incorrecto"},xop:2,xisNotificaPagar:{type:Boolean,notify:!0},xMsjNotifica:{type:String,value:"",notify:!0},xtitulo:{type:String,value:"..."},xIsLoading:{type:Boolean,value:!1,notify:!0},xErrorCredenciales:{type:Boolean,value:!1,notify:!0}},ready:function(){var i;this.xop=2,this.xisNotificaPagar=!1,$("#dialogMSj"),$("#dialogMSj").on("iron-overlay-closed",function(){passIngresar.$.input.focus()}),$("#div2 #UsuarioIngresar").focus(),$("#div2 #UsuarioIngresar").on("keyup",function(i){i=i.which;13!=i&&186!=i||passIngresar.$.input.focus()}),$("#div2 #passIngresar").on("keyup",function(i){i.which;13!=(i=i.which)&&186!=i||xEnviar("div2")});for(var a=0;a<this.xdiv_visibles.length;a++)switch(i=this.xdiv_visibles[a],a){case 0:0===i&&($("#div1").remove(),$(".Btn_div1").remove());break;case 1:0===i&&($("#div2").remove(),$(".Btn_div2").remove());break;case 2:0===i&&($("#div3").remove(),$(".Btn_div3").remove())}(xThis=this).viewSedePay()},xocurrencia:function(i){this.xIsLoading=!1;var a=document.getElementById("dialogMSj");switch(i){case 0:$("#div2 #passIngresar").val(""),$("#div2 #passIngresar").focus(),this.xErrorCredenciales=!0,this.xDialogTitulo="Incorrecto",this.xDialogDetalle="Usuario o clave incorrecto";break;case 1:var e=$("#div3 #usuario").val();$("#div3 #usuario").val(""),$("#div3 #usuario").focus(),this.xDialogTitulo="No Disponible",this.xDialogDetalle="El usuario "+e+" no se encuentra disponible.",a.open();break;case 2:this.xErrorCredenciales=!1}},viewSedePay:function(){var i=atob(localStorage.getItem("::app3_sys_last_s"));$.ajax({type:"POST",url:"bdphp/log_005.php?op=5000",data:{i:i}}).done(function(i){const a=JSON.parse(i).datos[0];setTimeout(()=>{xThis.xisNotificaPagar=1===parseInt(a.notifica),xThis.xMsjNotifica=a.msj_adicional},2e3)})}})</script>