function getColor(e,t,i,o,a){var n,l,r,u,m,c,f,g,s,d,p,o=o||0<a.length;if(0<a.length)for(var v=0;v<a.length;v++)if(e>a[v].lo&&e<=a[v].hi)return a[v].color;if(1===(n=i.length))return i[0];for(l=o?1/n:1/(n-1),r=[],v=0;v<i.length;v++)u=o?l*(v+1):l*v,m=parseInt(cutHex(i[v]).substring(0,2),16),c=parseInt(cutHex(i[v]).substring(2,4),16),f=parseInt(cutHex(i[v]).substring(4,6),16),r[v]={pct:u,color:{r:m,g:c,b:f}};if(0===t)return"rgb("+[r[0].color.r,r[0].color.g,r[0].color.b].join(",")+")";for(var h=0;h<r.length;h++)if(t<=r[h].pct)return o?"rgb("+[r[h].color.r,r[h].color.g,r[h].color.b].join(",")+")":(d=(g=r[h]).pct-(p=r[h-1]).pct,s=1-(d=(t-p.pct)/d),d=d,"rgb("+[(p={r:Math.floor(p.color.r*s+g.color.r*d),g:Math.floor(p.color.g*s+g.color.g*d),b:Math.floor(p.color.b*s+g.color.b*d)}).r,p.g,p.b].join(",")+")")}function setDy(e,t,i){(!ie||9<ie)&&e.node.firstChild.attributes.dy&&(e.node.firstChild.attributes.dy.value=0)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function humanFriendlyNumber(e,t){for(var i,o=Math.pow,a=o(10,t),n=7;n;)(i=o(10,3*n--))<=e&&(e=Math.round(e*a/i)/a+"KMGTPE"[n]);return e}function formatNumber(e){e=e.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function getStyle(e,t){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t]),i}function onCreateElementNsReady(e){void 0!==document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}(JustGage=function(e){var t=this;if(null==e)return!1;if(null!==e.id&&void 0!==e.id){if(!(y=document.getElementById(e.id)))return!1}else{if(null===e.parentNode||void 0===e.parentNode)return!1;y=e.parentNode}var i,o,a,n,l,r,u,m,c,f,g,s,d,p,v,h,x,b,k,y=y.dataset||{},S=(t.config={id:e.id,parentNode:t.kvLookup("parentNode",e,y,null),xtag:t.kvLookup("xtag",e,y,""),xtitle:t.kvLookup("xtitle",e,y,""),xval1:t.kvLookup("xval1",e,y,""),xval2:t.kvLookup("xval2",e,y,""),xlabel:t.kvLookup("xlabel",e,y,""),width:t.kvLookup("width",e,y,null),height:t.kvLookup("height",e,y,null),title:t.kvLookup("title",e,y,""),titleFontColor:t.kvLookup("titleFontColor",e,y,"#999999"),value:t.kvLookup("value",e,y,0,"float"),valueFontColor:t.kvLookup("valueFontColor",e,y,"#010101"),symbol:t.kvLookup("symbol",e,y,""),min:t.kvLookup("min",e,y,0,"float"),max:t.kvLookup("max",e,y,100,"float"),humanFriendlyDecimal:t.kvLookup("humanFriendlyDecimal",e,y,0),textRenderer:t.kvLookup("textRenderer",e,y,null),gaugeWidthScale:t.kvLookup("gaugeWidthScale",e,y,1),gaugeColor:t.kvLookup("gaugeColor",e,y,"#edebeb"),label:t.kvLookup("label",e,y,""),labelFontColor:t.kvLookup("labelFontColor",e,y,"#b3b3b3"),shadowOpacity:t.kvLookup("shadowOpacity",e,y,.2),shadowSize:t.kvLookup("shadowSize",e,y,5),shadowVerticalOffset:t.kvLookup("shadowVerticalOffset",e,y,3),levelColors:t.kvLookup("levelColors",e,y,["#ff0000","#FFFF04","#00C100"],"array",","),startAnimationTime:t.kvLookup("startAnimationTime",e,y,700),startAnimationType:t.kvLookup("startAnimationType",e,y,">"),refreshAnimationTime:t.kvLookup("refreshAnimationTime",e,y,700),refreshAnimationType:t.kvLookup("refreshAnimationType",e,y,">"),donutStartAngle:t.kvLookup("donutStartAngle",e,y,90),valueMinFontSize:t.kvLookup("valueMinFontSize",e,y,16),titleMinFontSize:t.kvLookup("titleMinFontSize",e,y,10),labelMinFontSize:t.kvLookup("labelMinFontSize",e,y,10),minLabelMinFontSize:t.kvLookup("minLabelMinFontSize",e,y,10),maxLabelMinFontSize:t.kvLookup("maxLabelMinFontSize",e,y,10),hideValue:t.kvLookup("hideValue",e,y,!1),hideMinMax:t.kvLookup("hideMinMax",e,y,!1),hideInnerShadow:t.kvLookup("hideInnerShadow",e,y,!1),humanFriendly:t.kvLookup("humanFriendly",e,y,!1),noGradient:t.kvLookup("noGradient",e,y,!1),donut:t.kvLookup("donut",e,y,!1),relativeGaugeSize:t.kvLookup("relativeGaugeSize",e,y,!1),counter:t.kvLookup("counter",e,y,!1),decimals:t.kvLookup("decimals",e,y,0),customSectors:t.kvLookup("customSectors",e,y,[]),formatNumber:t.kvLookup("formatNumber",e,y,!1)},t.config.value>t.config.max&&(t.config.value=t.config.max),t.config.value<t.config.min&&(t.config.value=t.config.min),t.originalValue=t.kvLookup("value",e,y,-1,"float"),null!==t.config.id&&null!==document.getElementById(t.config.id)?t.canvas=Raphael(t.config.id,"100%","100%"):null!==t.config.parentNode&&(t.canvas=Raphael(t.config.parentNode,"100%","100%")),!0===t.config.relativeGaugeSize&&t.canvas.setViewBox(0,0,200,150,!0),e=!0===t.config.relativeGaugeSize?(i=200,150):null!==t.config.width&&null!==t.config.height?(i=t.config.width,t.config.height):null!==t.config.parentNode?(t.canvas.setViewBox(0,0,200,150,!0),i=200,150):(i=+getStyle(document.getElementById(t.config.id),"width").slice(0,-2),+getStyle(document.getElementById(t.config.id),"height").slice(0,-2)),k=(b=(y=!0===t.config.donut?(e<i?o=a=e:i<e?e<(a=o=i)&&(o=(a/=b=a/e)/b):a=o=i,r=10<a/8?a/10:10,m=(l=(e-a)/2)+a/11,c=16<a/6.4?a/5.4:18,g=""!==t.config.label?l+a/1.85:l+a/1.7,d=f=u=(n=(i-o)/2)+o/2,h=n+o/10+o/6.666666666666667*t.config.gaugeWidthScale/2,x=p=g+(s=10<a/16?a/16:10),v=10<a/16?a/16:10):(e<i?i<(o=1.25*(a=e))&&(o/=b=o/i,a/=b):i<e?e<(a=(o=i)/1.25)&&(o=(a/=b=a/e)/b):a=.75*(o=i),r=a/8>t.config.titleMinFontSize?a/10:t.config.titleMinFontSize,m=(l=(e-a)/2)+a/6.4,c=a/6.5>t.config.valueMinFontSize?a/6.5:t.config.valueMinFontSize,s=a/16>t.config.labelMinFontSize?a/16:t.config.labelMinFontSize,d=f=u=(n=(i-o)/2)+o/2,v=a/16>t.config.minLabelMinFontSize?a/16:t.config.minLabelMinFontSize,h=n+o/10+o/6.666666666666667*t.config.gaugeWidthScale/2,x=p=(g=l+a/1.275)+c/2+5,a/16>t.config.maxLabelMinFontSize?a/16:t.config.maxLabelMinFontSize),n+o-o/10-o/6.666666666666667*t.config.gaugeWidthScale/2),p),t.params={canvasW:i,canvasH:e,widgetW:o,widgetH:a,dx:n,dy:l,titleFontSize:r,titleX:u,titleY:m,valueFontSize:c,valueX:f,valueY:g,labelFontSize:s,labelX:d,labelY:p,minFontSize:v,minX:h,minY:x,maxFontSize:y,maxX:b,maxY:k},k=null,t.canvas.customAttributes.pki=function(e,t,i,o,a,n,l,r,u){var m,c,f,g,s,d;return u?(m=(1-2*(e-t)/(i-t))*Math.PI,d="M"+((g=o/2+n)-(f=(c=o/2-o/7)-o/6.666666666666667*r))+","+(s=a/1.95+l)+" ",d+="L"+(g-c)+","+s+" ",(i-t)/2<e&&(d+="A"+c+","+c+" 0 0 1 "+(g+c)+","+s+" "),d=d+("A"+c+","+c+" 0 0 1 "+(o/2+n+c*Math.cos(m))+","+(a-(a-s)-c*Math.sin(m)))+" L"+(o/2+n+f*Math.cos(m))+","+(a-(a-s)-f*Math.sin(m))+" ",(i-t)/2<e&&(d+="A"+f+","+f+" 0 0 0 "+(g+f)+","+s+" "),{path:d=d+("A"+f+","+f+" 0 0 0 "+(g-f)+","+s+" ")+"Z "}):(m=(1-(e-t)/(i-t))*Math.PI,d="M"+((g=o/2+n)-(f=(c=o/2-o/10)-o/6.666666666666667*r))+","+(s=a/1.25+l)+" ",{path:d=(d=(d+="L"+(g-c)+","+s+" ")+("A"+c+","+c+" 0 0 1 "+(o/2+n+c*Math.cos(m))+","+(a-(a-s)-c*Math.sin(m))+" ")+("L"+(o/2+n+f*Math.cos(m))+","+(a-(a-s)-f*Math.sin(m))+" "))+("A"+f+","+f+" 0 0 0 "+(g-f)+","+s+" ")+"Z "})},t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.level=t.canvas.path().attr({stroke:"none",fill:getColor(t.config.value,(t.config.value-t.config.min)/(t.config.max-t.config.min),t.config.levelColors,t.config.noGradient,t.config.customSectors),pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.config.donut&&t.level.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy)),t.txtTitle=t.canvas.text(t.params.titleX,t.params.titleY,t.config.title),t.txtTitle.attr({"font-size":t.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.titleFontColor,"fill-opacity":"1"}),setDy(t.txtTitle,t.params.titleFontSize,t.params.titleY),t.txtValue=t.canvas.text(t.params.valueX,t.params.valueY,0),t.txtValue.attr({"font-size":t.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.valueFontColor,"fill-opacity":"0"}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),t.txtLabel=t.canvas.text(t.params.labelX,t.params.labelY,t.config.label),t.txtLabel.attr({"font-size":t.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":"0"}),setDy(t.txtLabel,t.params.labelFontSize,t.params.labelY),t.txtMinimum=t.config.min,t.config.humanFriendly?t.txtMinimum=humanFriendlyNumber(t.config.min,t.config.humanFriendlyDecimal):t.config.formatNumber&&(t.txtMinimum=formatNumber(t.config.min)),t.txtMin=t.canvas.text(t.params.minX,t.params.minY,t.txtMinimum),t.txtMin.attr({"font-size":t.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMin,t.params.minFontSize,t.params.minY),t.txtMaximum=t.config.max,t.config.formatNumber?t.txtMaximum=formatNumber(t.txtMaximum):t.config.humanFriendly&&(t.txtMaximum=humanFriendlyNumber(t.config.max,t.config.humanFriendlyDecimal)),t.txtMax=t.canvas.text(t.params.maxX,t.params.maxY,t.txtMaximum),t.txtMax.attr({"font-size":t.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMax,t.params.maxFontSize,t.params.maxY),t.canvas.canvas.childNodes[1]),F="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){t.generateShadow(F,S)}):t.generateShadow(F,S)),F=null,t.config.textRenderer?t.originalValue=t.config.textRenderer(t.originalValue):t.config.humanFriendly?t.originalValue=humanFriendlyNumber(t.originalValue,t.config.humanFriendlyDecimal)+t.config.symbol:t.config.formatNumber?t.originalValue=formatNumber(t.originalValue)+t.config.symbol:t.originalValue=(+t.originalValue).toFixed(t.config.decimals)+t.config.symbol,!0===t.config.counter?(eve.on("raphael.anim.frame."+t.level.id,function(){var e=t.level.attr("pki");t.config.textRenderer?t.txtValue.attr("text",t.config.textRenderer(Math.floor(e[0]))):t.config.humanFriendly?t.txtValue.attr("text",humanFriendlyNumber(Math.floor(e[0]),t.config.humanFriendlyDecimal)+t.config.symbol):t.config.formatNumber?t.txtValue.attr("text",formatNumber(Math.floor(e[0]))+t.config.symbol):t.txtValue.attr("text",(+e[0]).toFixed(t.config.decimals)+t.config.symbol),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),eve.on("raphael.anim.finish."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})):eve.on("raphael.anim.start."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),t.level.animate({pki:[t.config.value,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]},t.config.startAnimationTime,t.config.startAnimationType),t.txtValue.animate({"fill-opacity":t.config.hideValue?"0":"1"},t.config.startAnimationTime,t.config.startAnimationType),t.txtLabel.animate({"fill-opacity":"1"},t.config.startAnimationTime,t.config.startAnimationType)}).prototype.kvLookup=function(e,t,i,o,a,n){var l=o,r=!1;if(null!=e&&(null!=i&&"object"==typeof i&&e in i?(l=i[e],r=!0):null!=t&&"object"==typeof t&&e in t?(l=t[e],r=!0):l=o,!0===r)&&null!=a)switch(a){case"int":l=parseInt(l,10);break;case"float":l=parseFloat(l)}return l},JustGage.prototype.refresh=function(e,t){var i,o=this;null!==(t=t||null)&&(o.config.max=t,o.txtMaximum=o.config.max,o.config.humanFriendly?o.txtMaximum=humanFriendlyNumber(o.config.max,o.config.humanFriendlyDecimal):o.config.formatNumber&&(o.txtMaximum=formatNumber(o.config.max)),o.txtMax.attr({text:o.txtMaximum}),setDy(o.txtMax,o.params.maxFontSize,o.params.maxY)),i=getColor(e=+(e=+(t=e)>+o.config.max?+o.config.max:e)<+o.config.min?+o.config.min:e,(e-o.config.min)/(o.config.max-o.config.min),o.config.levelColors,o.config.noGradient,o.config.customSectors),t=o.config.textRenderer?o.config.textRenderer(t):o.config.humanFriendly?humanFriendlyNumber(t,o.config.humanFriendlyDecimal)+o.config.symbol:o.config.formatNumber?formatNumber((+t).toFixed(o.config.decimals))+o.config.symbol:(+t).toFixed(o.config.decimals)+o.config.symbol,o.originalValue=t,o.config.value=+e,o.config.counter||(o.txtValue.attr({text:t}),setDy(o.txtValue,o.params.valueFontSize,o.params.valueY)),o.level.animate({pki:[o.config.value,o.config.min,o.config.max,o.params.widgetW,o.params.widgetH,o.params.dx,o.params.dy,o.config.gaugeWidthScale,o.config.donut],fill:i},o.config.refreshAnimationTime,o.config.refreshAnimationType)},JustGage.prototype.generateShadow=function(e,t){var i=this,o=document.createElementNS(e,"filter");o.setAttribute("id","inner-shadow"),t.appendChild(o),(t=document.createElementNS(e,"feOffset")).setAttribute("dx",0),t.setAttribute("dy",i.config.shadowVerticalOffset),o.appendChild(t),(t=document.createElementNS(e,"feGaussianBlur")).setAttribute("result","offset-blur"),t.setAttribute("stdDeviation",i.config.shadowSize),o.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","out"),t.setAttribute("in","SourceGraphic"),t.setAttribute("in2","offset-blur"),t.setAttribute("result","inverse"),o.appendChild(t),(t=document.createElementNS(e,"feFlood")).setAttribute("flood-color","black"),t.setAttribute("flood-opacity",i.config.shadowOpacity),t.setAttribute("result","color"),o.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","in"),t.setAttribute("in","color"),t.setAttribute("in2","inverse"),t.setAttribute("result","shadow"),o.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","over"),t.setAttribute("in","shadow"),t.setAttribute("in2","SourceGraphic"),o.appendChild(t),i.config.hideInnerShadow||(i.canvas.canvas.childNodes[2].setAttribute("filter","url(#inner-shadow)"),i.canvas.canvas.childNodes[3].setAttribute("filter","url(#inner-shadow)"))};var ie=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return 4<e?e:void 0}();