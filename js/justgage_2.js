function getColor(e,t,o,i,n){var a,l,r,u,c,m,f,g,s,d,p,i=i||0<n.length;if(0<n.length)for(var v=0;v<n.length;v++)if(e>n[v].lo&&e<=n[v].hi)return n[v].color;if(1===(a=o.length))return o[0];for(l=i?1/a:1/(a-1),r=[],v=0;v<o.length;v++)u=i?l*(v+1):l*v,c=parseInt(cutHex(o[v]).substring(0,2),16),m=parseInt(cutHex(o[v]).substring(2,4),16),f=parseInt(cutHex(o[v]).substring(4,6),16),r[v]={pct:u,color:{r:c,g:m,b:f}};if(0===t)return"rgb("+[r[0].color.r,r[0].color.g,r[0].color.b].join(",")+")";for(var h=0;h<r.length;h++)if(t<=r[h].pct)return i?"rgb("+[r[h].color.r,r[h].color.g,r[h].color.b].join(",")+")":(d=(g=r[h]).pct-(p=r[h-1]).pct,s=1-(d=(t-p.pct)/d),d=d,"rgb("+[(p={r:Math.floor(p.color.r*s+g.color.r*d),g:Math.floor(p.color.g*s+g.color.g*d),b:Math.floor(p.color.b*s+g.color.b*d)}).r,p.g,p.b].join(",")+")")}function setDy(e,t,o){(!ie||9<ie)&&e.node.firstChild.attributes.dy&&(e.node.firstChild.attributes.dy.value=0)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return"#"==e.charAt(0)?e.substring(1,7):e}function humanFriendlyNumber(e,t){for(var o,i=Math.pow,n=i(10,t),a=7;a;)(o=i(10,3*a--))<=e&&(e=Math.round(e*n/o)/n+"KMGTPE"[a]);return e}function formatNumber(e){e=e.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function getStyle(e,t){var o="";return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),o=e.currentStyle[t]),o}function onCreateElementNsReady(e){void 0!==document.createElementNS?e():setTimeout(function(){onCreateElementNsReady(e)},100)}(JustGage=function(e){var t=this;if(null==e)return console.log("* justgage: Make sure to pass options to the constructor!"),!1;if(null!==e.id&&void 0!==e.id){if(!(y=document.getElementById(e.id)))return console.log("* justgage: No element with id : %s found",e.id),!1}else{if(null===e.parentNode||void 0===e.parentNode)return console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor."),!1;y=e.parentNode}var o,i,n,a,l,r,u,c,m,f,g,s,d,p,v,h,x,b,k,y=y.dataset||{},S=(t.config={id:e.id,parentNode:t.kvLookup("parentNode",e,y,null),xtag:t.kvLookup("xtag",e,y,""),xtitle:t.kvLookup("xtitle",e,y,""),xval1:t.kvLookup("xval1",e,y,""),xval2:t.kvLookup("xval2",e,y,""),xlabel:t.kvLookup("xlabel",e,y,""),width:t.kvLookup("width",e,y,null),height:t.kvLookup("height",e,y,null),title:t.kvLookup("title",e,y,""),titleFontColor:t.kvLookup("titleFontColor",e,y,"#999999"),value:t.kvLookup("value",e,y,0,"float"),valueFontColor:t.kvLookup("valueFontColor",e,y,"#010101"),symbol:t.kvLookup("symbol",e,y,""),min:t.kvLookup("min",e,y,0,"float"),max:t.kvLookup("max",e,y,100,"float"),humanFriendlyDecimal:t.kvLookup("humanFriendlyDecimal",e,y,0),textRenderer:t.kvLookup("textRenderer",e,y,null),gaugeWidthScale:t.kvLookup("gaugeWidthScale",e,y,1),gaugeColor:t.kvLookup("gaugeColor",e,y,"#edebeb"),label:t.kvLookup("label",e,y,""),labelFontColor:t.kvLookup("labelFontColor",e,y,"#b3b3b3"),shadowOpacity:t.kvLookup("shadowOpacity",e,y,.2),shadowSize:t.kvLookup("shadowSize",e,y,5),shadowVerticalOffset:t.kvLookup("shadowVerticalOffset",e,y,3),levelColors:t.kvLookup("levelColors",e,y,["#ff0000","#FFFF04","#00C100"],"array",","),startAnimationTime:t.kvLookup("startAnimationTime",e,y,700),startAnimationType:t.kvLookup("startAnimationType",e,y,">"),refreshAnimationTime:t.kvLookup("refreshAnimationTime",e,y,700),refreshAnimationType:t.kvLookup("refreshAnimationType",e,y,">"),donutStartAngle:t.kvLookup("donutStartAngle",e,y,90),valueMinFontSize:t.kvLookup("valueMinFontSize",e,y,16),titleMinFontSize:t.kvLookup("titleMinFontSize",e,y,10),labelMinFontSize:t.kvLookup("labelMinFontSize",e,y,10),minLabelMinFontSize:t.kvLookup("minLabelMinFontSize",e,y,10),maxLabelMinFontSize:t.kvLookup("maxLabelMinFontSize",e,y,10),hideValue:t.kvLookup("hideValue",e,y,!1),hideMinMax:t.kvLookup("hideMinMax",e,y,!1),hideInnerShadow:t.kvLookup("hideInnerShadow",e,y,!1),humanFriendly:t.kvLookup("humanFriendly",e,y,!1),noGradient:t.kvLookup("noGradient",e,y,!1),donut:t.kvLookup("donut",e,y,!1),relativeGaugeSize:t.kvLookup("relativeGaugeSize",e,y,!1),counter:t.kvLookup("counter",e,y,!1),decimals:t.kvLookup("decimals",e,y,0),customSectors:t.kvLookup("customSectors",e,y,[]),formatNumber:t.kvLookup("formatNumber",e,y,!1)},t.config.value>t.config.max&&(t.config.value=t.config.max),t.config.value<t.config.min&&(t.config.value=t.config.min),t.originalValue=t.kvLookup("value",e,y,-1,"float"),null!==t.config.id&&null!==document.getElementById(t.config.id)?t.canvas=Raphael(t.config.id,"100%","100%"):null!==t.config.parentNode&&(t.canvas=Raphael(t.config.parentNode,"100%","100%")),!0===t.config.relativeGaugeSize&&t.canvas.setViewBox(0,0,200,150,!0),e=!0===t.config.relativeGaugeSize?(o=200,150):null!==t.config.width&&null!==t.config.height?(o=t.config.width,t.config.height):null!==t.config.parentNode?(t.canvas.setViewBox(0,0,200,150,!0),o=200,150):(o=+getStyle(document.getElementById(t.config.id),"width").slice(0,-2),+getStyle(document.getElementById(t.config.id),"height").slice(0,-2)),k=(b=(y=!0===t.config.donut?(e<o?i=n=e:o<e?e<(n=i=o)&&(i=(n/=b=n/e)/b):n=i=o,r=10<n/8?n/10:10,c=(l=(e-n)/2)+n/11,m=16<n/6.4?n/5.4:18,g=""!==t.config.label?l+n/1.85:l+n/1.7,d=f=u=(a=(o-i)/2)+i/2,h=a+i/10+i/6.666666666666667*t.config.gaugeWidthScale/2,x=p=g+(s=10<n/16?n/16:10),v=10<n/16?n/16:10):(e<o?o<(i=1.25*(n=e))&&(i/=b=i/o,n/=b):o<e?e<(n=(i=o)/1.25)&&(i=(n/=b=n/e)/b):n=.75*(i=o),r=n/8>t.config.titleMinFontSize?n/10:t.config.titleMinFontSize,c=(l=(e-n)/2)+n/6.4,m=n/6.5>t.config.valueMinFontSize?n/6.5:t.config.valueMinFontSize,s=n/16>t.config.labelMinFontSize?n/16:t.config.labelMinFontSize,d=f=u=(a=(o-i)/2)+i/2,v=n/16>t.config.minLabelMinFontSize?n/16:t.config.minLabelMinFontSize,h=a+i/10+i/6.666666666666667*t.config.gaugeWidthScale/2,x=p=(g=l+n/1.275)+m/2+5,n/16>t.config.maxLabelMinFontSize?n/16:t.config.maxLabelMinFontSize),a+i-i/10-i/6.666666666666667*t.config.gaugeWidthScale/2),p),t.params={canvasW:o,canvasH:e,widgetW:i,widgetH:n,dx:a,dy:l,titleFontSize:r,titleX:u,titleY:c,valueFontSize:m,valueX:f,valueY:g,labelFontSize:s,labelX:d,labelY:p,minFontSize:v,minX:h,minY:x,maxFontSize:y,maxX:b,maxY:k},k=null,t.canvas.customAttributes.pki=function(e,t,o,i,n,a,l,r,u){var c,m,f,g,s,d;return u?(c=(1-2*(e-t)/(o-t))*Math.PI,d="M"+((g=i/2+a)-(f=(m=i/2-i/7)-i/6.666666666666667*r))+","+(s=n/1.95+l)+" ",d+="L"+(g-m)+","+s+" ",(o-t)/2<e&&(d+="A"+m+","+m+" 0 0 1 "+(g+m)+","+s+" "),d=d+("A"+m+","+m+" 0 0 1 "+(i/2+a+m*Math.cos(c))+","+(n-(n-s)-m*Math.sin(c)))+" L"+(i/2+a+f*Math.cos(c))+","+(n-(n-s)-f*Math.sin(c))+" ",(o-t)/2<e&&(d+="A"+f+","+f+" 0 0 0 "+(g+f)+","+s+" "),{path:d=d+("A"+f+","+f+" 0 0 0 "+(g-f)+","+s+" ")+"Z "}):(c=(1-(e-t)/(o-t))*Math.PI,d="M"+((g=i/2+a)-(f=(m=i/2-i/10)-i/6.666666666666667*r))+","+(s=n/1.25+l)+" ",{path:d=(d=(d+="L"+(g-m)+","+s+" ")+("A"+m+","+m+" 0 0 1 "+(i/2+a+m*Math.cos(c))+","+(n-(n-s)-m*Math.sin(c))+" ")+("L"+(i/2+a+f*Math.cos(c))+","+(n-(n-s)-f*Math.sin(c))+" "))+("A"+f+","+f+" 0 0 0 "+(g-f)+","+s+" ")+"Z "})},t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.level=t.canvas.path().attr({stroke:"none",fill:getColor(t.config.value,(t.config.value-t.config.min)/(t.config.max-t.config.min),t.config.levelColors,t.config.noGradient,t.config.customSectors),pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]}),t.config.donut&&t.level.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy)),t.txtTitle=t.canvas.text(t.params.titleX,t.params.titleY,t.config.title),t.txtTitle.attr({"font-size":t.params.titleFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.titleFontColor,"fill-opacity":"1"}),setDy(t.txtTitle,t.params.titleFontSize,t.params.titleY),t.txtValue=t.canvas.text(t.params.valueX,t.params.valueY,0),t.txtValue.attr({"font-size":t.params.valueFontSize,"font-weight":"bold","font-family":"Arial",fill:t.config.valueFontColor,"fill-opacity":"0"}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY),t.txtLabel=t.canvas.text(t.params.labelX,t.params.labelY,t.config.label),t.txtLabel.attr({"font-size":t.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":"0"}),setDy(t.txtLabel,t.params.labelFontSize,t.params.labelY),t.txtMinimum=t.config.min,t.config.humanFriendly?t.txtMinimum=humanFriendlyNumber(t.config.min,t.config.humanFriendlyDecimal):t.config.formatNumber&&(t.txtMinimum=formatNumber(t.config.min)),t.txtMin=t.canvas.text(t.params.minX,t.params.minY,t.txtMinimum),t.txtMin.attr({"font-size":t.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMin,t.params.minFontSize,t.params.minY),t.txtMaximum=t.config.max,t.config.formatNumber?t.txtMaximum=formatNumber(t.txtMaximum):t.config.humanFriendly&&(t.txtMaximum=humanFriendlyNumber(t.config.max,t.config.humanFriendlyDecimal)),t.txtMax=t.canvas.text(t.params.maxX,t.params.maxY,t.txtMaximum),t.txtMax.attr({"font-size":t.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"}),setDy(t.txtMax,t.params.maxFontSize,t.params.maxY),t.canvas.canvas.childNodes[1]),F="http://www.w3.org/2000/svg";"undefined"!==ie&&ie<9||("undefined"!==ie?onCreateElementNsReady(function(){t.generateShadow(F,S)}):t.generateShadow(F,S)),F=null,t.config.textRenderer?t.originalValue=t.config.textRenderer(t.originalValue):t.config.humanFriendly?t.originalValue=humanFriendlyNumber(t.originalValue,t.config.humanFriendlyDecimal)+t.config.symbol:t.config.formatNumber?t.originalValue=formatNumber(t.originalValue)+t.config.symbol:t.originalValue=(+t.originalValue).toFixed(t.config.decimals)+t.config.symbol,!0===t.config.counter?(eve.on("raphael.anim.frame."+t.level.id,function(){var e=t.level.attr("pki");t.config.textRenderer?t.txtValue.attr("text",t.config.textRenderer(Math.floor(e[0]))):t.config.humanFriendly?t.txtValue.attr("text",humanFriendlyNumber(Math.floor(e[0]),t.config.humanFriendlyDecimal)+t.config.symbol):t.config.formatNumber?t.txtValue.attr("text",formatNumber(Math.floor(e[0]))+t.config.symbol):t.txtValue.attr("text",(+e[0]).toFixed(t.config.decimals)+t.config.symbol),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),eve.on("raphael.anim.finish."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})):eve.on("raphael.anim.start."+t.level.id,function(){t.txtValue.attr({text:t.originalValue}),setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)}),t.level.animate({pki:[t.config.value,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]},t.config.startAnimationTime,t.config.startAnimationType),t.txtValue.animate({"fill-opacity":t.config.hideValue?"0":"1"},t.config.startAnimationTime,t.config.startAnimationType),t.txtLabel.animate({"fill-opacity":"1"},t.config.startAnimationTime,t.config.startAnimationType)}).prototype.kvLookup=function(e,t,o,i,n,a){var l=i,r=!1;if(null!=e&&(null!=o&&"object"==typeof o&&e in o?(l=o[e],r=!0):null!=t&&"object"==typeof t&&e in t?(l=t[e],r=!0):l=i,!0===r)&&null!=n)switch(n){case"int":l=parseInt(l,10);break;case"float":l=parseFloat(l)}return l},JustGage.prototype.refresh=function(e,t){var o,i=this;null!==(t=t||null)&&(i.config.max=t,i.txtMaximum=i.config.max,i.config.humanFriendly?i.txtMaximum=humanFriendlyNumber(i.config.max,i.config.humanFriendlyDecimal):i.config.formatNumber&&(i.txtMaximum=formatNumber(i.config.max)),i.txtMax.attr({text:i.txtMaximum}),setDy(i.txtMax,i.params.maxFontSize,i.params.maxY)),o=getColor(e=+(e=+(t=e)>+i.config.max?+i.config.max:e)<+i.config.min?+i.config.min:e,(e-i.config.min)/(i.config.max-i.config.min),i.config.levelColors,i.config.noGradient,i.config.customSectors),t=i.config.textRenderer?i.config.textRenderer(t):i.config.humanFriendly?humanFriendlyNumber(t,i.config.humanFriendlyDecimal)+i.config.symbol:i.config.formatNumber?formatNumber((+t).toFixed(i.config.decimals))+i.config.symbol:(+t).toFixed(i.config.decimals)+i.config.symbol,i.originalValue=t,i.config.value=+e,i.config.counter||(i.txtValue.attr({text:t}),setDy(i.txtValue,i.params.valueFontSize,i.params.valueY)),i.level.animate({pki:[i.config.value,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut],fill:o},i.config.refreshAnimationTime,i.config.refreshAnimationType)},JustGage.prototype.generateShadow=function(e,t){var o=this,i=document.createElementNS(e,"filter");i.setAttribute("id","inner-shadow"),t.appendChild(i),(t=document.createElementNS(e,"feOffset")).setAttribute("dx",0),t.setAttribute("dy",o.config.shadowVerticalOffset),i.appendChild(t),(t=document.createElementNS(e,"feGaussianBlur")).setAttribute("result","offset-blur"),t.setAttribute("stdDeviation",o.config.shadowSize),i.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","out"),t.setAttribute("in","SourceGraphic"),t.setAttribute("in2","offset-blur"),t.setAttribute("result","inverse"),i.appendChild(t),(t=document.createElementNS(e,"feFlood")).setAttribute("flood-color","black"),t.setAttribute("flood-opacity",o.config.shadowOpacity),t.setAttribute("result","color"),i.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","in"),t.setAttribute("in","color"),t.setAttribute("in2","inverse"),t.setAttribute("result","shadow"),i.appendChild(t),(t=document.createElementNS(e,"feComposite")).setAttribute("operator","over"),t.setAttribute("in","shadow"),t.setAttribute("in2","SourceGraphic"),i.appendChild(t),o.config.hideInnerShadow||(o.canvas.canvas.childNodes[2].setAttribute("filter","url(#inner-shadow)"),o.canvas.canvas.childNodes[3].setAttribute("filter","url(#inner-shadow)"))};var ie=function(){for(var e=3,t=document.createElement("div"),o=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",o[0];);return 4<e?e:void 0}();